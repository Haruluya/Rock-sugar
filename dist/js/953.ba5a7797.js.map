{"version":3,"file":"js/953.ba5a7797.js","mappings":"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","sources":["webpack://rock-sugar/./src/pages/Webgl/WebglDemo/ImageTexture/index.vue","webpack://rock-sugar/./src/pages/Webgl/WebglDemo/ImageTexture/resource/vertex-shader.js","webpack://rock-sugar/./src/pages/Webgl/WebglDemo/ImageTexture/resource/fragment-shader.js","webpack://rock-sugar/./src/pages/Webgl/WebglDemo/ImageTexture/resource/data.js","webpack://rock-sugar/./src/pages/Webgl/WebglDemo/ImageTexture/index.vue?fd19"],"sourcesContent":["<template lang=\"html\">\r\n    <nano_webgl_demo_panel\r\n        :prop_des_data=\"desData\"\r\n        :prop_ui_setter=\"uiSetter\"\r\n        :prop_vertex_shader=\"vertexShaderSource\"\r\n        :prop_fragment_shader=\"fragmentShaderSource\"\r\n        :prop_section_params=\"sectionParams\"\r\n        ref=\"page\"\r\n        @Init=\"Init\"\r\n        @Render=\"Render\"\r\n        @prop_ui_setter=\"uiSetter\"\r\n    />\r\n</template>\r\n<script>\r\nimport vertexShaderSource from './resource/vertex-shader.js'\r\nimport fragmentShaderSource from './resource/fragment-shader.js'\r\nimport data from './resource/data.js'\r\nimport uiSetting from \"../ui-setting\"\r\nimport haruluyaImg from \"_assets/images/haruluya.jpg\"\r\n\r\nconst desData = {\r\n    category:\"Webgl\",\r\n    name:\"ImageTexture\",\r\n    buttonContent:\"查看源码\",\r\n    title:\"贴图\",\r\n    content:\"Maybe putting my picture here is the only way I can make a record.\"\r\n}\r\n\r\nconst positions = data.position;\r\nconst texCoords = data.texcoord;\r\n\r\n\r\nexport default {\r\n    name:'ImageTexture',\r\n    data() {\r\n        return {\r\n            gl: null,\r\n            canvas: null,\r\n            program: null,\r\n            vertexShaderSource,\r\n            fragmentShaderSource,\r\n            desData,\r\n            transform:{\r\n                translation:[0, 0, 0],\r\n                rotation:[HNWUEngine.degToRad(0), HNWUEngine.degToRad(0), HNWUEngine.degToRad(0)],\r\n                scale:[1,1,1]\r\n            },\r\n            sectionParams:{\r\n                last:0,\r\n                fieldOfViewRadians: HNWUEngine.degToRad(60),\r\n                modelXRotationRadians: HNWUEngine.degToRad(0),\r\n                modelYRotationRadians: HNWUEngine.degToRad(0),\r\n                texture:0,\r\n                img:null,\r\n            },\r\n            perspective:{\r\n                aspect:0,\r\n                fieldOfViewRadians:  HNWUEngine.degToRad(60),\r\n                zNear: 1,\r\n                zFar: 2000,\r\n            },\r\n            camera:{\r\n                target:[0, 0, 0],\r\n                position:[0, 0, 2],\r\n                up:[0,1,0]\r\n            },\r\n        }\r\n    },\r\n\r\n    methods: {\r\n        LoadImg(){\r\n            // Set image.\r\n            let image = new Image();\r\n            image.src = haruluyaImg;\r\n            this.sectionParams.img = image;\r\n            image.onload = this.$refs.page.Init;\r\n        },\r\n        Init(){\r\n            if (!this.sectionParams.img){\r\n                return;\r\n            }\r\n            this.page = this.$refs.page;\r\n            this.gl = this.page.getGL();\r\n            this.canvas = this.page.getCanvas();\r\n            this.program = this.page.getProgram();\r\n            //Get bufferinfo and setters.\r\n            this.perspective.aspect = this.gl.canvas.clientWidth / this.gl.canvas.clientHeight;\r\n            this.page.addBuffer(\"position\",{numComponents:3,data:positions});\r\n            this.page.addBuffer(\"texcoord\",{numComponents:2,data:texCoords});\r\n            this.page.setTransform(this.transform);\r\n            this.sectionParams.texture = this.page.addTexture(this.sectionParams.img);\r\n        },\r\n        Render(){\r\n            if (!this.sectionParams.img){\r\n                return;\r\n            }\r\n            const gl = this.gl;\r\n\r\n            gl.enable(gl.CULL_FACE);\r\n            gl.enable(gl.DEPTH_TEST);\r\n           \r\n            //matrix.\r\n            const mvp = this.page.caculateMVPMatrix(this.camera,this.perspective,this.transform);\r\n            this.page.addUniform(\"u_worldViewProjection\",mvp);\r\n            this.page.addUniform(\"u_texture\",this.sectionParams.texture)\r\n\r\n\r\n            this.page.glDraw({mode:gl.TRIANGLES,first:0,count:6*6})\r\n        },\r\n\r\n        isPowerOf2(value) {\r\n            return (value & (value - 1)) === 0;\r\n        }\r\n    },\r\n    mounted(){\r\n        this.LoadImg();\r\n    }\r\n}\r\n</script>\r\n<style lang=\"less\" scoped>\r\n@import \"../index.less\";\r\n</style>\r\n","export default\r\n`\r\nattribute vec4 a_position;\r\nattribute vec2 a_texcoord;\r\n\r\n\r\nuniform mat4 u_worldViewProjection;\r\nvarying vec2 v_texcoord;\r\n\r\nvoid main() {\r\n  gl_Position = u_worldViewProjection * a_position;\r\n  v_texcoord = a_texcoord;\r\n}\r\n`","export default\r\n`\r\nprecision mediump float;\r\nvarying vec2 v_texcoord;\r\nuniform sampler2D u_texture;\r\n\r\nvoid main() {\r\n   gl_FragColor = texture2D(u_texture, v_texcoord);\r\n}\r\n`","export default\r\n{\r\n    position:new Float32Array(\r\n        [\r\n            -0.5, -0.5,  -0.5,\r\n            -0.5,  0.5,  -0.5,\r\n            0.5, -0.5,  -0.5,\r\n            -0.5,  0.5,  -0.5,\r\n            0.5,  0.5,  -0.5,\r\n            0.5, -0.5,  -0.5,\r\n\r\n            -0.5, -0.5,   0.5,\r\n            0.5, -0.5,   0.5,\r\n            -0.5,  0.5,   0.5,\r\n            -0.5,  0.5,   0.5,\r\n            0.5, -0.5,   0.5,\r\n            0.5,  0.5,   0.5,\r\n\r\n            -0.5,   0.5, -0.5,\r\n            -0.5,   0.5,  0.5,\r\n            0.5,   0.5, -0.5,\r\n            -0.5,   0.5,  0.5,\r\n            0.5,   0.5,  0.5,\r\n            0.5,   0.5, -0.5,\r\n\r\n            -0.5,  -0.5, -0.5,\r\n            0.5,  -0.5, -0.5,\r\n            -0.5,  -0.5,  0.5,\r\n            -0.5,  -0.5,  0.5,\r\n            0.5,  -0.5, -0.5,\r\n            0.5,  -0.5,  0.5,\r\n\r\n            -0.5,  -0.5, -0.5,\r\n            -0.5,  -0.5,  0.5,\r\n            -0.5,   0.5, -0.5,\r\n            -0.5,  -0.5,  0.5,\r\n            -0.5,   0.5,  0.5,\r\n            -0.5,   0.5, -0.5,\r\n\r\n            0.5,  -0.5, -0.5,\r\n            0.5,   0.5, -0.5,\r\n            0.5,  -0.5,  0.5,\r\n            0.5,  -0.5,  0.5,\r\n            0.5,   0.5, -0.5,\r\n            0.5,   0.5,  0.5,\r\n\r\n            ]\r\n    ),\r\n    texcoord: new Float32Array([\r\n        0   , 0  ,\r\n        0   , 1,\r\n        1, 0  ,\r\n        0   , 1,\r\n        1, 1,\r\n        1, 0  ,\r\n        //---\r\n        0, 0  ,\r\n        1 , 0  ,\r\n        0, 1,\r\n        0, 1,\r\n        1 , 0  ,\r\n        1 , 1,\r\n        //---\r\n        0 , 0  ,\r\n        0 , 1,\r\n        1, 0  ,\r\n        0 , 1,\r\n        1, 1,\r\n        1, 0  ,\r\n        // select the bottom left image\r\n        0   , 0,\r\n        1, 0,\r\n        0   , 1  ,\r\n        0   , 1  ,\r\n        1, 0,\r\n        1, 1  ,\r\n        // select the bottom middle image\r\n        0, 0,\r\n        0, 1  ,\r\n        1 , 0,\r\n        0, 1  ,\r\n        1 , 1  ,\r\n        1 , 0,\r\n        // select the bottom right image\r\n        0 , 0,\r\n        1, 0,\r\n        0 , 1  ,\r\n        0 , 1  ,\r\n        1, 0,\r\n        1, 1  ,\r\n    ]),\r\n}","import { render } from \"./index.vue?vue&type=template&id=4359e919&scoped=true&lang=html\"\nimport script from \"./index.vue?vue&type=script&lang=js\"\nexport * from \"./index.vue?vue&type=script&lang=js\"\n\nimport \"./index.vue?vue&type=style&index=0&id=4359e919&lang=less&scoped=true\"\n\nimport exportComponent from \"F:\\\\Note-Haruluya\\\\Project\\\\Rock-sugar\\\\rock-sugar\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-4359e919\"]])\n\nexport default __exports__"],"names":["_createBlock","_component_nano_webgl_demo_panel","prop_des_data","$data","prop_ui_setter","_ctx","prop_vertex_shader","prop_fragment_shader","prop_section_params","ref","onInit","$options","onRender","onProp_ui_setter","position","Float32Array","texcoord","desData","category","name","buttonContent","title","content","positions","data","texCoords","gl","canvas","program","vertexShaderSource","fragmentShaderSource","transform","translation","rotation","HNWUEngine","degToRad","scale","sectionParams","last","fieldOfViewRadians","modelXRotationRadians","modelYRotationRadians","texture","img","perspective","aspect","zNear","zFar","camera","target","up","methods","LoadImg","image","Image","src","haruluyaImg","this","onload","$refs","page","Init","getGL","getCanvas","getProgram","clientWidth","clientHeight","addBuffer","numComponents","setTransform","addTexture","Render","enable","CULL_FACE","DEPTH_TEST","mvp","caculateMVPMatrix","addUniform","glDraw","mode","TRIANGLES","first","count","isPowerOf2","value","mounted","__exports__","render"],"sourceRoot":""}