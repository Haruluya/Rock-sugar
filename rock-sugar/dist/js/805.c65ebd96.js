"use strict";(self["webpackChunkrock_sugar"]=self["webpackChunkrock_sugar"]||[]).push([[805],{7805:function(e,a,t){t.r(a),t.d(a,{default:function(){return b}});var r=t(3396);const i={class:"pageContainer"},l={class:"webglContainer"},s={id:"uiContainer"},n={id:"ui"};function u(e,a,t,u,o,_){const c=(0,r.up)("nano_canvas"),d=(0,r.up)("ui"),g=(0,r.up)("nano_webgl_des_panel");return(0,r.wg)(),(0,r.iD)("div",i,[(0,r._)("div",l,[(0,r.Wm)(c,{prop_vertex_shader_source:o.vertexShaderSource,prop_fragment_shader_source:o.fragmentShaderSource},null,8,["prop_vertex_shader_source","prop_fragment_shader_source"]),(0,r._)("div",s,[(0,r._)("div",n,[(0,r.Wm)(d,{id:"fieldOfView"}),(0,r.Wm)(d,{id:"x"}),(0,r.Wm)(d,{id:"y"}),(0,r.Wm)(d,{id:"z"}),(0,r.Wm)(d,{id:"angleX"}),(0,r.Wm)(d,{id:"angleY"}),(0,r.Wm)(d,{id:"angleZ"}),(0,r.Wm)(d,{id:"scaleX"}),(0,r.Wm)(d,{id:"scaleY"}),(0,r.Wm)(d,{id:"scaleZ"})])])]),(0,r.Wm)(g,{prop_category:o.desData.category,prop_name:o.desData.name,prop_button_content:o.desData.buttonContent,prop_title:o.desData.title,prop_content:o.desData.content,onHandleClick:_.handleClick},null,8,["prop_category","prop_name","prop_button_content","prop_title","prop_content","onHandleClick"])])}var o="\nattribute vec4 a_position;\nattribute vec4 a_color;\nuniform mat4 u_matrix;\nvarying vec4 v_color;\nvoid main() {\n    gl_Position = u_matrix * a_position;\n    v_color = a_color;\n}\n",_="\nprecision mediump float;\nvarying vec4 v_color;\nvoid main() {\n    gl_FragColor = v_color;\n}\n",c=(t(8675),t(3408),t(4590),{position:new Float32Array([200,50,0,0,50,0,0,150,0,0,150,0,200,150,0,200,50,0,200,50,100,0,50,100,0,50,0,0,50,0,200,50,0,200,50,100,200,50,0,200,150,0,200,150,100,200,150,100,200,50,100,200,50,0,0,50,0,0,50,100,0,150,100,0,150,100,0,150,0,0,50,0,0,150,0,0,150,100,200,150,100,200,150,100,200,150,0,0,150,0,200,50,100,200,150,100,0,150,100,0,150,100,0,50,100,200,50,100]),color:new Uint8Array([0,59,252,0,80,252,0,218,252,0,218,252,0,80,252,0,59,252,252,0,0,150,0,0,0,0,0,0,0,0,150,0,0,252,0,0,252,227,103,150,227,103,0,227,103,0,227,103,150,227,103,252,227,103,252,227,103,150,227,103,0,227,103,0,227,103,150,227,103,252,227,103,252,0,0,150,0,0,0,0,0,0,0,0,150,0,0,252,0,0,0,59,252,0,80,252,0,218,252,0,218,252,0,80,252,0,59,252])});const d={category:"Webgl",name:"Perspective",buttonContent:"查看源码",title:"透视投影",content:"Failure is like perspective, throughout a person's life."},g=c.position,h=c.color;var m={name:"ImageProcess",data(){return{gl:null,canvas:null,program:null,vertexShaderSource:o,fragmentShaderSource:_,desData:d,colors:h,bufferData:{position:{data:g},color:{data:h}},uniformsData:{u_matrix:null},bufferInfo:null,uniformSetters:null,attribSetters:null,transfrom:{translation:[-150,0,-360],rotation:[haruluya_webgl_utils.degToRad(190),haruluya_webgl_utils.degToRad(40),haruluya_webgl_utils.degToRad(320)],scale:[1,1,1]},sectionParams:{fieldOfViewRadians:haruluya_webgl_utils.degToRad(60),zNear:1,zFar:2e3}}},mounted(){this.Init(),this.SetUI()},methods:{Init(){const{gl:e,canvas:a}=haruluya_webgl_utils.initWebglContext("canvas");this.gl=e,this.canvas=a,this.program=haruluya_webgl_utils.createProgramFromScripts(e,["vertex-shader","fragment-shader"]),this.bufferInfo=haruluya_webgl_utils.createBufferInfoFromArrays(e,this.bufferData),this.uniformSetters=haruluya_webgl_utils.createUniformSetters(e,this.program),this.attribSetters=haruluya_webgl_utils.createAttributeSetters(e,this.program),this.Render()},Render(){const e=this.gl,a=this.program;haruluya_webgl_utils.resizeCanvasToDisplaySize(e.canvas),e.viewport(0,0,e.canvas.width,e.canvas.height),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT),e.enable(e.CULL_FACE),e.enable(e.DEPTH_TEST),e.useProgram(a);const t=e.canvas.clientWidth/e.canvas.clientHeight;this.uniformsData.u_matrix=haruluya_webgl_utils.perspective(this.sectionParams.fieldOfViewRadians,t,this.sectionParams.zNear,this.sectionParams.zFar),this.uniformsData.u_matrix=haruluya_webgl_utils.getTransformMatrix(this.uniformsData.u_matrix,this.transfrom),haruluya_webgl_utils.setBuffersAndAttributes(e,this.attribSetters,this.bufferInfo),haruluya_webgl_utils.setUniforms(this.uniformSetters,this.uniformsData),e.drawArrays(e.TRIANGLES,0,36)},SetUI(){const e=this.Render;let a=this.sectionParams.fieldOfViewRadians,t=this.transfrom;const r=function(t,r){a=haruluya_webgl_utils.degToRad(r.value),e()},i=function(a){return function(r,i){t.translation[a]=i.value,e()}},l=function(a){return function(r,i){let l=i.value,s=l*Math.PI/180;t.rotation[a]=s,e()}},s=function(a){return function(r,i){t.scale[a]=i.value,e()}};haruluya_webgl_utils.setupSlider("fieldOfView",{value:haruluya_webgl_utils.radToDeg(a),slide:r,min:1,max:179}),haruluya_webgl_utils.setupSlider("x",{value:t.translation[0],slide:i(0),min:-200,max:200}),haruluya_webgl_utils.setupSlider("y",{value:t.translation[1],slide:i(1),min:-200,max:200}),haruluya_webgl_utils.setupSlider("z",{value:t.translation[2],slide:i(2),min:-1e3,max:0}),haruluya_webgl_utils.setupSlider("angleX",{value:haruluya_webgl_utils.radToDeg(t.rotation[0]),slide:l(0),max:360}),haruluya_webgl_utils.setupSlider("angleY",{value:haruluya_webgl_utils.radToDeg(t.rotation[1]),slide:l(1),max:360}),haruluya_webgl_utils.setupSlider("angleZ",{value:haruluya_webgl_utils.radToDeg(t.rotation[2]),slide:l(2),max:360}),haruluya_webgl_utils.setupSlider("scaleX",{value:t.scale[0],slide:s(0),min:-5,max:5,step:.01,precision:2}),haruluya_webgl_utils.setupSlider("scaleY",{value:t.scale[1],slide:s(1),min:-5,max:5,step:.01,precision:2}),haruluya_webgl_utils.setupSlider("scaleZ",{value:t.scale[2],slide:s(2),min:-5,max:5,step:.01,precision:2})},Destory(){},handleClick(){window.location.href="https://github.com/Haruluya/Rock-sugar/blob/master/rock-sugar/src/pages/WebglDemo/Perspective/index.vue"}},beforeDestory(){this.Destory()}},p=t(89);const f=(0,p.Z)(m,[["render",u],["__scopeId","data-v-1ee13838"]]);var b=f}}]);
//# sourceMappingURL=805.c65ebd96.js.map