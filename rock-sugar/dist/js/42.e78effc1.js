"use strict";(self["webpackChunkrock_sugar"]=self["webpackChunkrock_sugar"]||[]).push([[42],{3042:function(e,t,a){a.r(t),a.d(t,{default:function(){return f}});var r=a(3396);const i={class:"pageContainer"},l={class:"webglContainer"},n={id:"uiContainer"},s={id:"ui"};function o(e,t,a,o,u,_){const c=(0,r.up)("nano_canvas"),h=(0,r.up)("ui"),g=(0,r.up)("nano_webgl_des_panel");return(0,r.wg)(),(0,r.iD)("div",i,[(0,r._)("div",l,[(0,r.Wm)(c,{prop_vertex_shader_source:u.vertexShaderSource,prop_fragment_shader_source:u.fragmentShaderSource},null,8,["prop_vertex_shader_source","prop_fragment_shader_source"]),(0,r._)("div",n,[(0,r._)("div",s,[(0,r.Wm)(h,{id:"x"}),(0,r.Wm)(h,{id:"y"}),(0,r.Wm)(h,{id:"z"}),(0,r.Wm)(h,{id:"angleX"}),(0,r.Wm)(h,{id:"angleY"}),(0,r.Wm)(h,{id:"angleZ"}),(0,r.Wm)(h,{id:"scaleX"}),(0,r.Wm)(h,{id:"scaleY"}),(0,r.Wm)(h,{id:"scaleZ"})])])]),(0,r.Wm)(g,{prop_category:u.desData.category,prop_name:u.desData.name,prop_button_content:u.desData.buttonContent,prop_title:u.desData.title,prop_content:u.desData.content,onHandleClick:_.handleClick},null,8,["prop_category","prop_name","prop_button_content","prop_title","prop_content","onHandleClick"])])}var u="\nattribute vec4 a_position;\nattribute vec4 a_color;\nattribute vec3 a_normal;\nuniform mat4 u_worldViewProjection;\nuniform mat4 u_worldInverseTranspose;\nvarying vec3 v_normal;\nvarying vec4 v_color;\nvoid main() {\n    gl_Position = u_worldViewProjection * a_position;\n    v_normal = mat3(u_worldInverseTranspose) * a_normal;\n    v_color = a_color;\n}\n",_="\nprecision mediump float;\nvarying vec3 v_normal;\nuniform vec3 u_reverseLightDirection;\nvarying vec4 v_color;\nvoid main() {\n    vec3 normal = normalize(v_normal);\n    float light = dot(normal, u_reverseLightDirection);\n    gl_FragColor = v_color;\n    gl_FragColor.rgb *= light;\n}\n",c=(a(8675),a(3408),a(4590),{position:new Float32Array([200,50,0,0,50,0,0,150,0,0,150,0,200,150,0,200,50,0,200,50,100,0,50,100,0,50,0,0,50,0,200,50,0,200,50,100,200,50,0,200,150,0,200,150,100,200,150,100,200,50,100,200,50,0,0,50,0,0,50,100,0,150,100,0,150,100,0,150,0,0,50,0,0,150,0,0,150,100,200,150,100,200,150,100,200,150,0,0,150,0,200,50,100,200,150,100,0,150,100,0,150,100,0,50,100,200,50,100]),color:new Uint8Array([0,59,252,0,80,252,0,218,252,0,218,252,0,80,252,0,59,252,252,0,0,150,0,0,0,0,0,0,0,0,150,0,0,252,0,0,252,227,103,150,227,103,0,227,103,0,227,103,150,227,103,252,227,103,252,227,103,150,227,103,0,227,103,0,227,103,150,227,103,252,227,103,252,0,0,150,0,0,0,0,0,0,0,0,150,0,0,252,0,0,0,59,252,0,80,252,0,218,252,0,218,252,0,80,252,0,59,252]),normal:new Float32Array([0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1])});const h={category:"Webgl",name:"DirectionalLight",buttonContent:"查看源码",title:"方向光",content:"Is the direction of light the direction of hope?"},g=c.color,d=c.position,p=c.normal;var m={name:"DirectionLight",data(){return{gl:null,canvas:null,program:null,vertexShaderSource:u,fragmentShaderSource:_,desData:h,bufferData:{position:{data:[]},color:{data:g},normal:{data:p}},uniformsData:{u_worldViewProjection:null,u_worldInverseTranspose:null,u_reverseLightDirection:null},bufferInfo:null,uniformSetters:null,attribSetters:null,transfrom:{translation:[0,0,0],rotation:[haruluya_webgl_utils.degToRad(180),haruluya_webgl_utils.degToRad(185),haruluya_webgl_utils.degToRad(360)],scale:[1,.8,1]},perspective:{aspect:0,fieldOfViewRadians:haruluya_webgl_utils.degToRad(60),zNear:1,zFar:2e3},camera:{target:[0,35,0],position:[100,150,200],up:[0,1,0]}}},mounted(){this.Init(),this.SetUI()},methods:{Init(){const{gl:e,canvas:t}=haruluya_webgl_utils.initWebglContext("canvas");this.gl=e,this.canvas=t,this.program=haruluya_webgl_utils.createProgramFromScripts(e,["vertex-shader","fragment-shader"]),this.perspective.aspect=e.canvas.clientWidth/e.canvas.clientHeight,this.setPosition(),this.bufferInfo=haruluya_webgl_utils.createBufferInfoFromArrays(e,this.bufferData),this.uniformSetters=haruluya_webgl_utils.createUniformSetters(e,this.program),this.attribSetters=haruluya_webgl_utils.createAttributeSetters(e,this.program),this.Render()},Render(){const e=this.gl,t=this.program;haruluya_webgl_utils.resizeCanvasToDisplaySize(e.canvas),e.viewport(0,0,e.canvas.width,e.canvas.height),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT),e.enable(e.CULL_FACE),e.enable(e.DEPTH_TEST),e.useProgram(t),haruluya_webgl_utils.setBuffersAndAttributes(e,this.attribSetters,this.bufferInfo);let a=haruluya_webgl_utils.perspective(this.perspective.fieldOfViewRadians,this.perspective.aspect,this.perspective.zNear,this.perspective.zFar),r=haruluya_webgl_utils.lookAt(this.camera.position,this.camera.target,this.camera.up),i=haruluya_webgl_utils.inverse(r);var l=haruluya_webgl_utils.multiply3d(a,i);let n=haruluya_webgl_utils.getTransformMatrix(haruluya_webgl_utils.xRotation(0),this.transfrom);var s=haruluya_webgl_utils.multiply3d(l,n),o=haruluya_webgl_utils.inverse(n),u=haruluya_webgl_utils.transpose(o);this.uniformsData.u_worldViewProjection=s,this.uniformsData.u_worldInverseTranspose=u,this.uniformsData.u_reverseLightDirection=haruluya_webgl_utils.normalize([.5,.7,1]),haruluya_webgl_utils.setUniforms(this.uniformSetters,this.uniformsData),e.drawArrays(e.TRIANGLES,0,36)},SetUI(){const e=this.gl;let t=this.Render,a=this.transfrom;const r=function(e){return function(r,i){a.translation[e]=i.value,t()}},i=function(e){return function(r,i){const l=i.value,n=l*Math.PI/180;a.rotation[e]=n,t()}},l=function(e){return function(r,i){a.scale[e]=i.value,t()}};haruluya_webgl_utils.setupSlider("x",{value:a.translation[0],slide:r(0),max:e.canvas.width}),haruluya_webgl_utils.setupSlider("y",{value:a.translation[1],slide:r(1),max:e.canvas.height}),haruluya_webgl_utils.setupSlider("z",{value:a.translation[2],slide:r(2),max:e.canvas.height}),haruluya_webgl_utils.setupSlider("angleX",{value:haruluya_webgl_utils.radToDeg(a.rotation[0]),slide:i(0),max:360}),haruluya_webgl_utils.setupSlider("angleY",{value:haruluya_webgl_utils.radToDeg(a.rotation[1]),slide:i(1),max:360}),haruluya_webgl_utils.setupSlider("angleZ",{value:haruluya_webgl_utils.radToDeg(a.rotation[2]),slide:i(2),max:360}),haruluya_webgl_utils.setupSlider("scaleX",{value:a.scale[0],slide:l(0),min:-5,max:5,step:.01,precision:2}),haruluya_webgl_utils.setupSlider("scaleY",{value:a.scale[1],slide:l(1),min:-5,max:5,step:.01,precision:2}),haruluya_webgl_utils.setupSlider("scaleZ",{value:a.scale[2],slide:l(2),min:-5,max:5,step:.01,precision:2})},Destory(){},handleClick(){window.location.href="https://github.com/Haruluya/Rock-sugar/blob/master/rock-sugar/src/pages/WebglDemo/DirectionLight/index.vue"},setPosition(){let e=haruluya_webgl_utils.xRotation(Math.PI);e=haruluya_webgl_utils.translate3d(e,-50,-75,-15);for(let t=0;t<d.length;t+=3){let a=haruluya_webgl_utils.transformPoint(e,[d[t+0],d[t+1],d[t+2],1]);d[t+0]=a[0],d[t+1]=a[1],d[t+2]=a[2]}this.bufferData.position.data=d}},beforeDestory(){this.Destory()}},v=a(89);const b=(0,v.Z)(m,[["render",o],["__scopeId","data-v-73ccc8d6"]]);var f=b}}]);
//# sourceMappingURL=42.e78effc1.js.map