"use strict";(self["webpackChunkrock_sugar"]=self["webpackChunkrock_sugar"]||[]).push([[205],{205:function(t,e,i){i.r(e),i.d(e,{default:function(){return x}});var s=i(3396);function n(t,e,i,n,a,r){const o=(0,s.up)("nano_cg_experiment_page");return(0,s.wg)(),(0,s.j4)(o,{prop_des_data:a.desData,prop_ui_setter:r.uiSetter,prop_section_params:a.sectionParams,ref:"page"},null,8,["prop_des_data","prop_ui_setter","prop_section_params"])}i(7658);var a=i(2812);class r{constructor(t){this.points=t}maxPointX(){let t=0;return this.points.forEach((e=>{t=t>e.x?t:e.x})),t}minPointX(){let t=this.maxPointX();return this.points.forEach((e=>{t=t<e.x?t:e.x})),t}maxPointY(){let t=0;return this.points.forEach((e=>{t=t>e.y?t:e.y})),t}minPointY(){let t=this.maxPointX();return this.points.forEach((e=>{t=t<e.y?t:e.y})),t}size(){return this.points.length}indexValue(t){return this.points[t]}}var o=r;class l{constructor(t,e,i){this.x=t,this.dx=e,this.ymax=i}setX(t){this.x=t}setDx(t){this.dx=t}setYmax(t){this.ymax=t}getX(){return this.x}getDx(){return this.dx}getYmax(){return this.ymax}}var c=l;const h={category:"Experiment",name:"EdgeTablePolygon",buttonContent:"查看源码",title:"多边形有序边表",content:"Edge table polygon."};var u={name:"EdgeTablePolygon",data(){return{canvas:null,ctx:null,desData:h,sectionParams:{points:[{x:20,y:20},{x:20,y:70},{x:50,y:50},{x:110,y:60},{x:110,y:30},{x:50,y:10}],color:"#0bc6e3",debugContent:null,girdSize:5}}},computed:{uiSetter(){let t=this.sectionParams,e=[{type:"slider",id:"girdSize",value:t.girdSize,min:1,max:100,callback:a.Z.globalUiCallbacks.updateValue(this,"girdSize")},{type:"color",id:"color",default:t.color,callback:a.Z.globalUiCallbacks.updateValue(this,"color")}];for(let i=0;i<this.sectionParams.points.length;i++)e.push({type:"slider-vector",id:"point"+i,value:t.points[i],min:{x:0,y:0},max:{x:500,y:500},callback:a.Z.globalUiCallbacks.updatePointArray(this,"points",i)});return e}},methods:{Init(){this.$refs.page.Init(),this.canvas=this.$refs.page.getCanvas(),this.ctx=canvas.getContext("2d"),this.Render()},Render(){this.$refs.page.Render();const t=this.ctx,e=this.sectionParams,i=parseInt(this.canvas.width/this.sectionParams.girdSize)-1,s=parseInt(this.canvas.height/this.sectionParams.girdSize)-1;t.clearRect(0,0,this.canvas.width,this.canvas.height),a.Z.drawGrid(this),this.sectionParams.debugContent=[{title:"grid",content:"The number of cells in the x direction: "+i+"\nThe number of cells in the y direction: "+s}],t.fillStyle=e.color;const n=new o(this.sectionParams.points);if(n.size()<3)return;let r,l,h,u,d,p,x,g,m,y,f,P,b={},v=[],_=[];g=n.minPointY(),m=n.maxPointY(),x=m-g;for(let a=0;a<n.size();a++)a<n.size()-1?(y=n.indexValue(a),f=n.indexValue(a+1)):(y=n.indexValue(a),f=n.indexValue(0)),y.y>f.y&&(p=y,y=f,f=p),y.y!=f.y&&(P=new c(y.x,(f.x-y.x)/(f.y-y.y),f.y-1),b[y.y-g]||(b[y.y-g]=[]),b[y.y-g].push(P));for(let o=0;o<x;o++){if(u=o+g,b[o]&&b[o].forEach((t=>{v.push(t)})),b[o]=null,v)for(let t=0;t<v.length;)v[t].getYmax()<u?v.splice(t,1):t++;if(v){for(v.forEach((t=>{_.push(t.getX()),t.setX(t.getX()+t.getDx())})),_.sort(),r=0;r<_.length;r++)r%2==0&&(d=_[r],l=_[r]-d?d+1:d,h=_[r+1]),a.Z.drawLineInGrid(this,{x:l,y:u},{x:h,y:u},this.sectionParams.color);_=[]}}b=[]},SetUI(){this.$refs.page.SetUI()}},mounted(){this.Init(),this.SetUI()}},d=i(89);const p=(0,d.Z)(u,[["render",n]]);var x=p}}]);
//# sourceMappingURL=205.69d08837.js.map