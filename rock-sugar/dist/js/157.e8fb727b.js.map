{"version":3,"file":"js/157.e8fb727b.js","mappings":"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","sources":["webpack://rock-sugar/./src/pages/WebglDemo/Triangle/index.vue","webpack://rock-sugar/./src/pages/WebglDemo/Triangle/resource/vetex-shader.js","webpack://rock-sugar/./src/pages/WebglDemo/Triangle/resource/fragment-shader.js","webpack://rock-sugar/./src/pages/WebglDemo/Triangle/resource/data.js","webpack://rock-sugar/./src/pages/WebglDemo/Triangle/index.vue?1b3a"],"sourcesContent":["<template lang=\"html\">\r\n    <div class=\"pageContainer\">\r\n        <div class=\"webglContainer\">\r\n            <nano_canvas\r\n             :prop_vertex_shader_source=\"vertexShaderSource\"\r\n             :prop_fragment_shader_source=\"fragmentShaderSource\"\r\n            />\r\n            <div id=\"uiContainer\">\r\n                <div id=\"ui\">\r\n                  <ui id=\"x\"></ui>\r\n                  <ui id=\"y\"></ui>\r\n                  <ui id=\"angle\"></ui>\r\n                  <ui id=\"scaleX\"></ui>\r\n                  <ui id=\"scaleY\"></ui>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        \r\n        <nano_webgl_des_panel\r\n            :prop_category=\"desData.category\"\r\n            :prop_name=\"desData.name\"\r\n            :prop_button_content=\"desData.buttonContent\"\r\n            :prop_title=\"desData.title\"\r\n            :prop_content=\"desData.content\"\r\n            @handleClick=\"handleClick\"\r\n            />\r\n\r\n    </div>\r\n</template>\r\n<script>\r\nimport { nano_canvas } from '@/packages';\r\nimport vertexShaderSource from './resource/vetex-shader.js'\r\nimport fragmentShaderSource from './resource/fragment-shader.js'\r\nimport data from './resource/data.js'\r\nconst desData = {\r\n    category:\"Webgl\",\r\n    name:\"Triangle\",\r\n    buttonContent:\"查看源码\",\r\n    title:\"三角\",\r\n    content:\"Say 'Hello World!' to CG world.\"\r\n}\r\nconst position =  data.position;\r\n\r\n\r\n/*\r\n    @author:haruluya\r\n    @des: Hello World!.\r\n*/\r\n\r\nexport default {\r\n    name: \"Triangle\",\r\n    data() {\r\n        return {\r\n            gl: null,\r\n            canvas: null,\r\n            program: null,\r\n            bufferData:{\r\n                position:{numComponents:2,data:position}\r\n            },\r\n            uniformsData:{\r\n                u_matrix: null,\r\n            },\r\n            bufferInfo:null,\r\n            attribSetters:null,\r\n            transfrom: {\r\n                translation: [300, 200,0],\r\n                rotation:[haruluya_webgl_utils.degToRad(0), haruluya_webgl_utils.degToRad(0), haruluya_webgl_utils.degToRad(0)],\r\n                scale: [1, 1,1]\r\n            },\r\n            angleInRadians:0,\r\n            vertexShaderSource,\r\n            fragmentShaderSource,\r\n            desData\r\n        };\r\n    },\r\n    methods: {\r\n        Init() {\r\n            const { gl, canvas } = haruluya_webgl_utils.initWebglContext(\"canvas\");\r\n            this.gl = gl;\r\n            this.canvas = canvas;\r\n            this.program = haruluya_webgl_utils.createProgramFromScripts(gl, [\"vertex-shader\", \"fragment-shader\"]);\r\n            // attributes.\r\n            this.bufferInfo = haruluya_webgl_utils.createBufferInfoFromArrays(gl, this.bufferData);\r\n            this.attribSetters  = haruluya_webgl_utils.createAttributeSetters(gl, this.program);\r\n            this.Render();\r\n\r\n        },\r\n        Render() {\r\n            const gl = this.gl;\r\n            haruluya_webgl_utils.resizeCanvasToDisplaySize(gl.canvas);\r\n            gl.viewport(0, 0, gl.canvas.width, gl.canvas.height);\r\n            gl.clear(gl.COLOR_BUFFER_BIT);\r\n            gl.useProgram(this.program);\r\n\r\n            // set matix.\r\n            const matrixLocation = gl.getUniformLocation(this.program, \"u_matrix\");\r\n            let matrix = haruluya_webgl_utils.projection2d(gl.canvas.clientWidth, gl.canvas.clientHeight);\r\n            matrix = haruluya_webgl_utils.translate2d(matrix, this.transfrom.translation[0], this.transfrom.translation[1]);\r\n            matrix = haruluya_webgl_utils.rotate2d(matrix, this.angleInRadians);\r\n            matrix = haruluya_webgl_utils.scale2d(matrix, this.transfrom.scale[0], this.transfrom.scale[1]);\r\n            gl.uniformMatrix3fv(matrixLocation, false, matrix);\r\n\r\n            haruluya_webgl_utils.setBuffersAndAttributes(gl, this.attribSetters, this.bufferInfo);\r\n\r\n            gl.drawArrays(gl.TRIANGLES, 0, 3);\r\n        },\r\n        SetUI() {\r\n            \r\n            //setup ui.\r\n            const gl = this.gl;\r\n            haruluya_webgl_utils.setupSlider(\"x\", { value: this.transfrom.translation[0], slide: updatePosition(0), max: gl.canvas.width });\r\n            haruluya_webgl_utils.setupSlider(\"y\", { value: this.transfrom.translation[1], slide: updatePosition(1), max: gl.canvas.height });\r\n            haruluya_webgl_utils.setupSlider(\"angle\", { slide: updateAngle, max: 360 });\r\n            haruluya_webgl_utils.setupSlider(\"scaleX\", { value: this.transfrom.scale[0], slide: updateScale(0), min: -5, max: 5, step: 0.01, precision: 2 });\r\n            haruluya_webgl_utils.setupSlider(\"scaleY\", { value: this.transfrom.scale[1], slide: updateScale(1), min: -5, max: 5, step: 0.01, precision: 2 });\r\n            \r\n            let transfrom = this.transfrom;\r\n            let Render = this.Render;\r\n            let angleInRadians = this.angleInRadians;\r\n            // position callback.\r\n            function updatePosition(index) {\r\n                return function (event, ui) {\r\n                    transfrom.translation[index] = ui.value;\r\n                    Render();\r\n                };\r\n            }\r\n            // rotation callback.\r\n            function updateAngle(event, ui) {\r\n                var angleInDegrees = 360 - ui.value;\r\n                angleInRadians = angleInDegrees * Math.PI / 180;\r\n                Render();\r\n            }\r\n            // scale callback.\r\n            function updateScale(index) {\r\n                return function (event, ui) {\r\n                    transfrom.scale[index] = ui.value;\r\n                    Render();\r\n                };\r\n            }\r\n        },\r\n        Destory() {\r\n            console.log(\"WBBGL DESTORY!!!\");\r\n        },\r\n        handleClick() {\r\n            window.location.href = \"https://github.com/Haruluya/Rock-sugar/blob/master/rock-sugar/src/pages/WebglDemo/Triangle/index.vue\";\r\n        }\r\n    },\r\n    mounted() {\r\n        this.Init();\r\n        this.SetUI();\r\n    },\r\n    beforeDestory() {\r\n        this.Destory();\r\n    },\r\n    components: { nano_canvas }\r\n};\r\n\r\n\r\n\r\n\r\n</script>\r\n<style lang=\"less\" scoped>\r\n@import \"../index.less\";\r\n</style>","export default\r\n`\r\n    attribute vec2 a_position;\r\n    uniform mat3 u_matrix;\r\n    varying vec4 v_color;    \r\n    void main() {\r\n        gl_Position = vec4((u_matrix * vec3(a_position, 1)).xy, 0, 1);\r\n        v_color = gl_Position * 0.5 + 0.5;\r\n    }\r\n`","export default\r\n`\r\n    precision mediump float;\r\n    varying vec4 v_color;\r\n    void main() {\r\n        gl_FragColor = v_color;\r\n    }\r\n\r\n`","export default{\r\n    position:new Float32Array([0, -100, 150, 125, -175, 100]),\r\n    \r\n}","import { render } from \"./index.vue?vue&type=template&id=7964dedc&scoped=true&lang=html\"\nimport script from \"./index.vue?vue&type=script&lang=js\"\nexport * from \"./index.vue?vue&type=script&lang=js\"\n\nimport \"./index.vue?vue&type=style&index=0&id=7964dedc&lang=less&scoped=true\"\n\nimport exportComponent from \"F:\\\\Note-Haruluya\\\\Project\\\\Rock-sugar\\\\rock-sugar\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-7964dedc\"]])\n\nexport default __exports__"],"names":["class","id","_createElementBlock","_createElementVNode","_createVNode","_component_nano_canvas","prop_vertex_shader_source","$data","prop_fragment_shader_source","_component_ui","_component_nano_webgl_des_panel","prop_category","category","prop_name","name","prop_button_content","buttonContent","prop_title","title","prop_content","content","onHandleClick","$options","position","Float32Array","desData","data","gl","canvas","program","bufferData","numComponents","uniformsData","u_matrix","bufferInfo","attribSetters","transfrom","translation","rotation","haruluya_webgl_utils","degToRad","scale","angleInRadians","vertexShaderSource","fragmentShaderSource","methods","Init","initWebglContext","this","createProgramFromScripts","createBufferInfoFromArrays","createAttributeSetters","Render","resizeCanvasToDisplaySize","viewport","width","height","clear","COLOR_BUFFER_BIT","useProgram","matrixLocation","getUniformLocation","matrix","projection2d","clientWidth","clientHeight","translate2d","rotate2d","scale2d","uniformMatrix3fv","setBuffersAndAttributes","drawArrays","TRIANGLES","SetUI","setupSlider","value","slide","updatePosition","max","updateAngle","updateScale","min","step","precision","index","event","ui","angleInDegrees","Math","PI","Destory","console","log","handleClick","window","location","href","mounted","beforeDestory","components","nano_canvas","__exports__","render"],"sourceRoot":""}