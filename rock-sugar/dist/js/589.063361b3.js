"use strict";(self["webpackChunkrock_sugar"]=self["webpackChunkrock_sugar"]||[]).push([[589],{4483:function(t,i){class e{constructor(t){this.points=t,this.points.forEach(((t,i)=>{this[i]=t}))}maxPointX(){let t=0;return this.points.forEach((i=>{t=t>i.x?t:i.x})),t}minPointX(){let t=this.maxPointX();return this.points.forEach((i=>{t=t<i.x?t:i.x})),t}maxPointY(){let t=0;return this.points.forEach((i=>{t=t>i.y?t:i.y})),t}minPointY(){let t=this.maxPointX();return this.points.forEach((i=>{t=t<i.y?t:i.y})),t}size(){return this.points.length}indexValue(t){return this.points[t]}isInPolygon(t){let i,e,s=!1;for(i=0,e=this.size()-1;i<this.size();e=i++)this.points[i].y>t.y!=this.points[e].y>t.y&&t.x<(this.points[e].x-this.points[i].x)*(t.y-this.points[i].y)/(this.points[e].y-this.points[i].y)+this.points[i].x&&(s=!s);return s}}i["Z"]=e},8589:function(t,i,e){e.r(i),e.d(i,{default:function(){return p}});var s=e(3396);function n(t,i,e,n,o,r){const a=(0,s.up)("nano_cg_experiment_page");return(0,s.wg)(),(0,s.j4)(a,{prop_des_data:o.desData,prop_ui_setter:r.uiSetter,prop_section_params:o.sectionParams,ref:"page"},null,8,["prop_des_data","prop_ui_setter","prop_section_params"])}e(7658);var o=e(2812),r=e(4483);const a={category:"Experiment",name:"EdgeTablePolygon",buttonContent:"查看源码",title:"种子填充",content:"Seed polygon."};var h={name:"SeedPolygon",data(){return{canvas:null,ctx:null,desData:a,sectionParams:{points:[{x:10,y:100},{x:100,y:10},{x:190,y:100},{x:100,y:50}],color:"#0bc6e3",debugContent:null,girdSize:3,seed:{x:100,y:20},screenTransform:{x:0,y:0,scale:100}}}},computed:{uiSetter(){let t=this.sectionParams,i=[{type:"slider",id:"girdSize",value:t.girdSize,min:1,max:100,callback:o.Z.globalUiCallbacks.updateValue(this,"girdSize")},{type:"color",id:"color",default:t.color,callback:o.Z.globalUiCallbacks.updateValue(this,"color")}];for(let e=0;e<this.sectionParams.points.length;e++)i.push({type:"slider-vector",id:"point"+e,value:t.points[e],min:{x:0,y:0},max:{x:500,y:500},callback:o.Z.globalUiCallbacks.updatePointArray(this,"points",e)});return i.push({type:"slider-vector",id:"seed",value:t.seed,min:{x:0,y:0},max:{x:500,y:500},callback:o.Z.globalUiCallbacks.updatePoint(this,"seed")}),i}},methods:{Init(){this.$refs.page.Init(),this.canvas=this.$refs.page.getCanvas(),this.ctx=canvas.getContext("2d"),this.$refs.page.setViewer(this.sectionParams.screenTransform,this.Render),this.Render()},Render(){this.$refs.page.Render();const t=this.ctx,i=parseInt(this.canvas.width/this.sectionParams.girdSize)-1,e=parseInt(this.canvas.height/this.sectionParams.girdSize)-1;t.clearRect(0,0,this.canvas.width,this.canvas.height),this.sectionParams.girdSize+=this.$refs.page.girdSize,o.Z.drawGrid(this),this.sectionParams.girdSize<=0&&(this.sectionParams.girdSize=1),this.sectionParams.debugContent=[{title:"grid",content:"The number of cells in the x direction: "+i+"\nThe number of cells in the y direction: "+e}];const s=this.sectionParams.seed,n=new r.Z(this.sectionParams.points);if(!n.isInPolygon(s)||n.size()<3)return void console.log("points invalid!!!");let a,h,l,c;if(a=n.minPointX()-1,h=n.maxPointX()+1,l=n.minPointY()-1,c=n.maxPointY()+1,s.x<=a||s.x>=h||s.y<=l||s.y>=c)return;let p,d,x,u,y,m=c-l,g=h-a,f=[];for(p=0;p<m;p++)for(d=0;d<g;d++)f[p*g+d]=!1;let P,b,v,S,_,z,I,k,w,Z,C,E=n.size();for(I=0;I<E;I++)if(I==E-1?(x=n[I],u=n[0]):(x=n[I],u=n[I+1]),k=x.x,Z=x.y,w=u.x,C=u.y,Z==C)for(b=Z,k>w&&(y=k,k=w,w=y),P=k;P<w;P++)o.Z.drawPointInGrid(this,P,b,this.sectionParams.color),f[(b-l)*g+P-a]=!0;else if(k==w)for(P=k,Z>C&&(y=Z,Z=C,C=y),b=Z;b<C;b++)o.Z.drawPointInGrid(this,P,b,this.sectionParams.color),f[(b-l)*g+P-a]=!0;else if(z=(C-Z)/(w-k),_=1/z,z>-1&&z<1)for(k>w&&(y=k,k=w,w=y,y=Z,Z=C,C=y),S=Z,P=k;P<=w;P++)b=Math.floor(S+.5),o.Z.drawPointInGrid(this,P,b,this.sectionParams.color),f[(b-l)*g+P-a]=!0,S+=z;else for(Z>C&&(y=k,k=w,w=y,y=Z,Z=C,C=y),v=k,b=Z;b<=C;b++)P=Math.floor(v+.5),o.Z.drawPointInGrid(this,P,b,this.sectionParams.color),f[(b-l)*g+P-a]=!0,v+=_;let U,G=[];G.push(s),f[(s.y-l)*g+s.x-a]=!0,x={x:0,y:0};while(G.length){let t=G.pop();U={x:t.x,y:t.y},o.Z.drawPointInGrid(this,U.x,U.y,this.sectionParams.color),x={x:U.x-1,y:U.y},f[(x.y-l)*g+x.x-a]||(G.push(x),f[(x.y-l)*g+x.x-a]=!0),x={x:U.x+1,y:U.y},f[(x.y-l)*g+x.x-a]||(G.push(x),f[(x.y-l)*g+x.x-a]=!0),x={x:U.x,y:U.y-1},f[(x.y-l)*g+x.x-a]||(G.push(x),f[(x.y-l)*g+x.x-a]=!0),x={x:U.x,y:U.y+1},f[(x.y-l)*g+x.x-a]||(G.push(x),f[(x.y-l)*g+x.x-a]=!0)}},SetUI(){this.$refs.page.SetUI()}},mounted(){this.Init(),this.SetUI()}},l=e(89);const c=(0,l.Z)(h,[["render",n]]);var p=c}}]);
//# sourceMappingURL=589.063361b3.js.map