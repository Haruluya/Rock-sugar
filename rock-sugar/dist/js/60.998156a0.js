"use strict";(self["webpackChunkrock_sugar"]=self["webpackChunkrock_sugar"]||[]).push([[60],{6060:function(e,t,i){i.r(t),i.d(t,{default:function(){return p}});var s=i(3396);function n(e,t,i,n,a,r){const o=(0,s.up)("nano_cg_experiment_page");return(0,s.wg)(),(0,s.j4)(o,{prop_des_data:a.desData,prop_ui_setter:r.uiSetter,prop_section_params:a.sectionParams,ref:"page"},null,8,["prop_des_data","prop_ui_setter","prop_section_params"])}i(7658);var a=i(2812),r=i(2042);const o={category:"Experiment",name:"Bezier",buttonContent:"查看源码",title:"Bezier",content:"Bezier."},c=500;var h={name:"Bezier",data(){return{canvas:null,ctx:null,desData:o,sectionParams:{point:[new r.Z(100,550),new r.Z(230,200),new r.Z(590,120),new r.Z(700,500)],auxPoint:[],tem:new r.Z(0,0),bezier:[],isMoving:!1,order:0,t:c/2,debugContent:null,girdSize:1,screenTransform:{x:0,y:0,scale:50}}}},computed:{uiSetter(){let e=this.sectionParams,t=[{type:"slider",id:"t",value:e.t,min:0,max:c,callback:a.Z.globalUiCallbacks.updateValue(this,"t")},{type:"slider",id:"girdSize",value:e.girdSize,min:1,max:100,callback:a.Z.globalUiCallbacks.updateValue(this,"girdSize")}];for(let i=0;i<this.sectionParams.point.length;i++)t.push({type:"slider-vector",id:"point"+i,value:e.point[i],min:{x:0,y:0},max:{x:1e3,y:1e3},callback:a.Z.globalUiCallbacks.updatePointArray(this,"point",i)});return t}},mounted(){this.Init(),this.SetUI()},methods:{Init(){this.$refs.page.Init(),this.canvas=this.$refs.page.getCanvas(),this.ctx=canvas.getContext("2d"),this.$refs.page.setViewer(this.sectionParams.screenTransform,this.Render),this.Render()},Render(){this.$refs.page.Render();const e=this.ctx,t=parseInt(this.canvas.width/this.sectionParams.girdSize)-1,i=parseInt(this.canvas.height/this.sectionParams.girdSize)-1;e.clearRect(0,0,this.canvas.width,this.canvas.height),this.sectionParams.girdSize+=this.$refs.page.girdSize,a.Z.drawGrid(this),this.sectionParams.girdSize<=0&&(this.sectionParams.girdSize=1),this.sectionParams.debugContent=[{title:"grid",content:"The number of cells in the x direction: "+t+"\nThe number of cells in the y direction: "+i}],a.Z.setScreenTransform(this.sectionParams.screenTransform),this.sectionParams.bezier=[],this.sectionParams.auxPoint=[];for(let a=0;a<this.sectionParams.t;a++)this.nextPoint(a);let s=this.sectionParams.bezier,n=this.sectionParams.point,r=this.sectionParams.auxPoint,o=this.sectionParams.tem,c=this.sectionParams.order;a.Z.drawLineInGrid(this,n[0],n[1],"blue"),a.Z.drawLineInGrid(this,n[1],n[2],"blue"),a.Z.drawLineInGrid(this,n[2],n[3],"blue");for(let h=0;h<s.length;++h)a.Z.drawEllipseInGrid(this,s[h].x,s[h].y,1,1,"red");a.Z.drawLineInGrid(this,r[0],r[1],"green"),a.Z.drawLineInGrid(this,r[1],r[2],"green"),a.Z.drawLineInGrid(this,r[3],r[4],"yellow");for(let h=0;h<4;++h)a.Z.drawEllipseInGrid(this,n[h].x-5,n[h].y-5,10,10,"black");for(let h=0;h<6;++h)a.Z.drawEllipseInGrid(this,r[h].x-5,r[h].y-5,10,10);this.sectionParams.isMoving&&(a.Z.drawEllipseInGrid(this,o.x-5,o.y-5,10,10),a.Z.drawLineInGrid(this,o,n[c]))},SetUI(){this.$refs.page.SetUI()},nextPoint(e){let t=this.sectionParams.bezier,i=this.sectionParams.auxPoint,s=this.sectionParams.point;i[0]=new r.Z((s[0].x*e+s[1].x*(c-e))/c,(s[0].y*e+s[1].y*(c-e))/c),i[1]=new r.Z((s[1].x*e+s[2].x*(c-e))/c,(s[1].y*e+s[2].y*(c-e))/c),i[2]=new r.Z((s[2].x*e+s[3].x*(c-e))/c,(s[2].y*e+s[3].y*(c-e))/c),i[3]=new r.Z((i[0].x*e+i[1].x*(c-e))/c,(i[0].y*e+i[1].y*(c-e))/c),i[4]=new r.Z((i[1].x*e+i[2].x*(c-e))/c,(i[1].y*e+i[2].y*(c-e))/c),i[5]=new r.Z((i[3].x*e+i[4].x*(c-e))/c,(i[3].y*e+i[4].y*(c-e))/c),t.push(i[5])}}},d=i(89);const l=(0,d.Z)(h,[["render",n]]);var p=l}}]);
//# sourceMappingURL=60.998156a0.js.map