"use strict";(self["webpackChunkrock_sugar"]=self["webpackChunkrock_sugar"]||[]).push([[549],{6549:function(e,t,a){a.r(t),a.d(t,{default:function(){return v}});var r=a(3396);const i=e=>((0,r.dD)("data-v-473a36af"),e=e(),(0,r.Cn)(),e),n={class:"pageContainer"},s={class:"webglContainer"},o=i((()=>(0,r._)("div",{id:"uiContainer"},[(0,r._)("div",{id:"ui"})],-1)));function u(e,t,a,i,u,l){const _=(0,r.up)("nano_canvas"),c=(0,r.up)("nano_webgl_des_panel");return(0,r.wg)(),(0,r.iD)("div",n,[(0,r._)("div",s,[(0,r.Wm)(_,{prop_vertex_shader_source:u.vertexShaderSource,prop_fragment_shader_source:u.fragmentShaderSource},null,8,["prop_vertex_shader_source","prop_fragment_shader_source"]),o]),(0,r.Wm)(c,{prop_category:u.desData.category,prop_name:u.desData.name,prop_button_content:u.desData.buttonContent,prop_title:u.desData.title,prop_content:u.desData.content,onHandleClick:l.handleClick},null,8,["prop_category","prop_name","prop_button_content","prop_title","prop_content","onHandleClick"])])}var l=a(9022),_="\nattribute vec4 a_position;\nattribute vec2 a_texcoord;\n\nuniform mat4 u_matrix;\n\nvarying vec2 v_texcoord;\n\nvoid main() {\n  gl_Position = u_matrix * a_position;\n  v_texcoord = a_texcoord;\n}\n",c="\nprecision mediump float;\nvarying vec2 v_texcoord;\nuniform sampler2D u_texture;\n\nvoid main() {\n   gl_FragColor = texture2D(u_texture, v_texcoord);\n}\n",d=(a(8675),a(3408),a(4590),{position:new Float32Array([-.5,-.5,-.5,-.5,.5,-.5,.5,-.5,-.5,-.5,.5,-.5,.5,.5,-.5,.5,-.5,-.5,-.5,-.5,.5,.5,-.5,.5,-.5,.5,.5,-.5,.5,.5,.5,-.5,.5,.5,.5,.5,-.5,.5,-.5,-.5,.5,.5,.5,.5,-.5,-.5,.5,.5,.5,.5,.5,.5,.5,-.5,-.5,-.5,-.5,.5,-.5,-.5,-.5,-.5,.5,-.5,-.5,.5,.5,-.5,-.5,.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,.5,-.5,-.5,-.5,.5,-.5,.5,.5,-.5,.5,-.5,.5,-.5,-.5,.5,.5,-.5,.5,-.5,.5,.5,-.5,.5,.5,.5,-.5,.5,.5,.5]),texcoord:new Float32Array([0,0,0,1,1,0,0,1,1,1,1,0,0,0,1,0,0,1,0,1,1,0,1,1,0,0,0,1,1,0,0,1,1,1,1,0,0,0,1,0,0,1,0,1,1,0,1,1,0,0,0,1,1,0,0,1,1,1,1,0,0,0,1,0,0,1,0,1,1,0,1,1])});const m={category:"Webgl",name:"ImageTexture",buttonContent:"查看源码",title:"材质",content:"Maybe putting my picture here is the only way I can make a record."},h=d.position,p=d.texcoord;var g={name:"ImageTexture",data(){return{gl:null,canvas:null,program:null,vertexShaderSource:_,fragmentShaderSource:c,desData:m,bufferData:{position:{numComponents:3,data:h},texcoord:{numComponents:2,data:p}},uniformsData:{u_matrix:null},bufferInfo:null,uniformSetters:null,attribSetters:null,transfrom:{},sectionParams:{last:0,fieldOfViewRadians:haruluya_webgl_utils.degToRad(60),modelXRotationRadians:haruluya_webgl_utils.degToRad(0),modelYRotationRadians:haruluya_webgl_utils.degToRad(0),texture:0,img:null},perspective:{aspect:0,fieldOfViewRadians:haruluya_webgl_utils.degToRad(60),zNear:1,zFar:2e3},camera:{target:[0,0,0],position:[0,0,2],up:[0,1,0]}}},mounted(){this.LoadImg(),this.SetUI()},methods:{LoadImg(){let e=new Image;e.src=l,this.img=e,e.onload=()=>{this.Init()}},Init(){const{gl:e,canvas:t}=haruluya_webgl_utils.initWebglContext("canvas");this.gl=e,this.canvas=t,this.program=haruluya_webgl_utils.createProgramFromScripts(e,["vertex-shader","fragment-shader"]),this.perspective.aspect=e.canvas.clientWidth/e.canvas.clientHeight,this.bufferInfo=haruluya_webgl_utils.createBufferInfoFromArrays(e,this.bufferData),this.uniformSetters=haruluya_webgl_utils.createUniformSetters(e,this.program),this.attribSetters=haruluya_webgl_utils.createAttributeSetters(e,this.program),this.texture=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this.texture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,this.img),this.isPowerOf2(this.img.width)&&this.isPowerOf2(this.img.height)&&e.generateMipmap(e.TEXTURE_2D),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),requestAnimationFrame(this.Render)},Render(e){e*=.001;let t=e-this.sectionParams.last;this.sectionParams.last=e;const a=this.gl,r=this.program;haruluya_webgl_utils.resizeCanvasToDisplaySize(a.canvas),a.viewport(0,0,a.canvas.width,a.canvas.height),a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT),a.enable(a.CULL_FACE),a.enable(a.DEPTH_TEST),this.sectionParams.modelYRotationRadians+=-.7*t,this.sectionParams.modelXRotationRadians+=-.4*t,a.useProgram(r),haruluya_webgl_utils.setBuffersAndAttributes(a,this.attribSetters,this.bufferInfo);let i=haruluya_webgl_utils.lookAt(this.camera.position,this.camera.target,this.camera.up),n=haruluya_webgl_utils.inverse(i),s=haruluya_webgl_utils.perspective(this.perspective.fieldOfViewRadians,this.perspective.aspect,this.perspective.zNear,this.perspective.zFar),o=haruluya_webgl_utils.multiply3d(s,n),u=haruluya_webgl_utils.xRotate(o,this.sectionParams.modelXRotationRadians);u=haruluya_webgl_utils.yRotate(u,this.sectionParams.modelYRotationRadians),this.uniformsData.u_matrix=u,a.uniform1i(a.getUniformLocation(r,"u_texture"),0),haruluya_webgl_utils.setUniforms(this.uniformSetters,this.uniformsData),a.drawArrays(a.TRIANGLES,0,36),requestAnimationFrame(this.Render)},SetUI(){},Destory(){},handleClick(){window.location.href="https://github.com/Haruluya/Rock-sugar/blob/master/rock-sugar/src/pages/WebglDemo/ImageTexture/index.vue"},isPowerOf2(e){return 0===(e&e-1)}},beforeDestory(){this.Destory()}},f=a(89);const b=(0,f.Z)(g,[["render",u],["__scopeId","data-v-473a36af"]]);var v=b},9022:function(e,t,a){e.exports=a.p+"img/haruluya.d6eb9f82.jpg"}}]);
//# sourceMappingURL=549.c5c3304f.js.map