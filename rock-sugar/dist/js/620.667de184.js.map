{"version":3,"file":"js/620.667de184.js","mappings":"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","sources":["webpack://rock-sugar/./src/pages/Webgl/WebglDemo/LightingPoint/index.vue","webpack://rock-sugar/./src/pages/Webgl/WebglDemo/LightingPoint/resource/vertex-shader.js","webpack://rock-sugar/./src/pages/Webgl/WebglDemo/LightingPoint/resource/fragment-shader.js","webpack://rock-sugar/./src/pages/Webgl/WebglDemo/LightingPoint/resource/data.js","webpack://rock-sugar/./src/pages/Webgl/WebglDemo/LightingPoint/index.vue?5165"],"sourcesContent":["<template lang=\"html\">\r\n    <div class=\"pageContainer\">\r\n        <div class=\"webglContainer\">\r\n            <nano_canvas\r\n             :prop_vertex_shader_source=\"vertexShaderSource\"\r\n             :prop_fragment_shader_source=\"fragmentShaderSource\"\r\n            />\r\n            <div id=\"uiContainer\">\r\n                <div id=\"ui\">\r\n                    <ui id=\"x\"></ui>\r\n                    <ui id=\"y\"></ui>\r\n                    <ui id=\"z\"></ui>\r\n                    <ui id=\"angleX\"></ui>\r\n                    <ui id=\"angleY\"></ui>\r\n                    <ui id=\"angleZ\"></ui>\r\n                    <ui id=\"scaleX\"></ui>\r\n                    <ui id=\"scaleY\"></ui>\r\n                    <ui id=\"scaleZ\"></ui>\r\n                    <ui id=\"shininess\"></ui>\r\n                    <ui id=\"lightColor\"></ui>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        \r\n        <nano_webgl_des_panel\r\n            :prop_category=\"desData.category\"\r\n            :prop_name=\"desData.name\"\r\n            :prop_button_content=\"desData.buttonContent\"\r\n            :prop_title=\"desData.title\"\r\n            :prop_content=\"desData.content\"\r\n            @handleClick=\"handleClick\"\r\n            />\r\n\r\n    </div>\r\n\r\n    \r\n</template>\r\n<script>\r\nimport vertexShaderSource from './resource/vertex-shader.js'\r\nimport fragmentShaderSource from './resource/fragment-shader.js'\r\nimport data from './resource/data'\r\n\r\nconst desData = {\r\n    category:\"Webgl\",\r\n    name:\"LightingPoint\",\r\n    buttonContent:\"查看源码\",\r\n    title:\"点光源\",\r\n    content:\"Point light source illuminates the world and causes shadows.\"\r\n}\r\n\r\nconst positions = data.position;\r\nconst colors = data.color;\r\nconst normals = data.normal;\r\n\r\n\r\nexport default {\r\n    name:'LightingPoint',\r\n    data() {\r\n        return {\r\n            gl: null,\r\n            canvas: null,\r\n            program: null,\r\n            vertexShaderSource,\r\n            fragmentShaderSource,\r\n            desData,\r\n            bufferData:{\r\n                position:{data:[]},\r\n                color:{data:colors},\r\n                normal:{data:normals}\r\n            },\r\n            uniformsData:{\r\n                u_lightWorldPosition: null,\r\n                u_viewWorldPosition:null,\r\n                u_world:null,\r\n                u_worldViewProjection:null,\r\n                u_worldInverseTranspose:null,\r\n                u_shininess:null,\r\n                u_lightColor:null,\r\n                u_specularColor:null\r\n            },\r\n            bufferInfo:null,\r\n            uniformSetters:null,\r\n            attribSetters:null,\r\n            transfrom:{\r\n                translation:[0, 0, 0],\r\n                rotation:[haruluya_webgl_utils.degToRad(180), haruluya_webgl_utils.degToRad(185), haruluya_webgl_utils.degToRad(360)],\r\n                scale:[1,0.8,1]\r\n            },\r\n            perspective:{\r\n                aspect:0,\r\n                fieldOfViewRadians:  haruluya_webgl_utils.degToRad(60),\r\n                zNear: 1,\r\n                zFar: 2000,\r\n            },\r\n            camera:{\r\n                target:[0, 35, 0],\r\n                position:[100, 150, 200],\r\n                up:[0,1,0]\r\n            },\r\n            sectionParams:{\r\n                lightColor:[1,1,1],\r\n                shininess:150,\r\n                lightPosition:[0, 0, 120],\r\n            }\r\n        }\r\n    },\r\n    mounted() {\r\n        this.Init();\r\n        this.SetUI();\r\n\r\n    },\r\n    methods: {\r\n        Init(){\r\n            const { gl, canvas } = haruluya_webgl_utils.initWebglContext(\"canvas\");\r\n            this.gl = gl;\r\n            this.canvas = canvas;\r\n            this.program = haruluya_webgl_utils.createProgramFromScripts(gl, [\"vertex-shader\", \"fragment-shader\"]);\r\n            //Get bufferinfo and setters.\r\n            this.perspective.aspect = gl.canvas.clientWidth / gl.canvas.clientHeight;\r\n\r\n            this.setPosition();\r\n\r\n            this.bufferInfo = haruluya_webgl_utils.createBufferInfoFromArrays(gl, this.bufferData);\r\n            this.uniformSetters = haruluya_webgl_utils.createUniformSetters(gl, this.program);\r\n            this.attribSetters  = haruluya_webgl_utils.createAttributeSetters(gl, this.program);\r\n            this.Render();\r\n        },\r\n        Render(){\r\n            const gl = this.gl;\r\n            const program = this.program;\r\n            haruluya_webgl_utils.resizeCanvasToDisplaySize(gl.canvas);\r\n            gl.viewport(0, 0, gl.canvas.width, gl.canvas.height);\r\n            gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\r\n\r\n            gl.enable(gl.CULL_FACE);\r\n            gl.enable(gl.DEPTH_TEST);\r\n\r\n            gl.useProgram(program);\r\n\r\n            haruluya_webgl_utils.setBuffersAndAttributes(gl, this.attribSetters, this.bufferInfo);\r\n            let projectionMatrix = haruluya_webgl_utils.perspective(\r\n                this.perspective.fieldOfViewRadians, \r\n                this.perspective.aspect, \r\n                this.perspective.zNear, \r\n                this.perspective.zFar\r\n                );\r\n            let cameraMatrix = haruluya_webgl_utils.lookAt(this.camera.position, this.camera.target, this.camera.up);\r\n            let viewMatrix = haruluya_webgl_utils.inverse(cameraMatrix);\r\n            var viewProjectionMatrix = haruluya_webgl_utils.multiply3d(projectionMatrix, viewMatrix);\r\n            let worldMatrix = haruluya_webgl_utils.getTransformMatrix(\r\n                haruluya_webgl_utils.xRotation(0),\r\n                this.transfrom\r\n            )\r\n\r\n             // normal transform.\r\n             var worldViewProjectionMatrix = haruluya_webgl_utils.multiply3d(viewProjectionMatrix, worldMatrix);\r\n            var worldInverseMatrix = haruluya_webgl_utils.inverse(worldMatrix);\r\n            var worldInverseTransposeMatrix = haruluya_webgl_utils.transpose(worldInverseMatrix);\r\n\r\n            this.uniformsData.u_worldViewProjection = worldViewProjectionMatrix;\r\n            this.uniformsData.u_worldInverseTranspose = worldInverseTransposeMatrix;\r\n            this.uniformsData.u_world = worldMatrix;\r\n            this.uniformsData.u_lightWorldPosition = this.sectionParams.lightPosition;\r\n            this.uniformsData.u_viewWorldPosition = this.camera.position;\r\n            this.uniformsData.u_shininess = this.sectionParams.shininess,\r\n            this.uniformsData.u_lightColor = haruluya_webgl_utils.normalize(this.sectionParams.lightColor);\r\n            this.uniformsData.u_specularColor = haruluya_webgl_utils.normalize(this.sectionParams.lightColor);\r\n            gl.uniform3fv( gl.getUniformLocation(program, \"u_lightColor\"), haruluya_webgl_utils.normalize(lightColor));  \r\n            haruluya_webgl_utils.setUniforms(this.uniformSetters, this.uniformsData);\r\n            gl.drawArrays(gl.TRIANGLES, 0, 36);\r\n        },\r\n        SetUI(){\r\n            const gl = this.gl;\r\n            let Render = this.Render;\r\n            let transform = this.transfrom;\r\n            let sectionParams = this.sectionParams;\r\n            // transform callback.\r\n            const updatePosition = function (index) {\r\n                return function(event, ui) {\r\n                    transform.translation[index] = ui.value;\r\n                    Render();\r\n                };\r\n            }\r\n\r\n            const updateRotation = function (index) {\r\n                return function(event, ui) {\r\n                    const angleInDegrees = ui.value;\r\n                    const angleInRadians = angleInDegrees * Math.PI / 180;\r\n                    transform.rotation[index] = angleInRadians;\r\n                    Render();\r\n                };\r\n            }\r\n\r\n            const updateScale = function (index) {\r\n                return function(event, ui) {\r\n                    transform.scale[index] = ui.value;\r\n                    Render();\r\n                };\r\n            }\r\n\r\n            const updateShininess = function (event, ui) {\r\n                sectionParams.shininess = ui.value;\r\n                Render();\r\n            }\r\n\r\n            const updateLightColor = function (event){\r\n                sectionParams.lightColor = haruluya_webgl_utils.colorToRGB(event.target.value);\r\n                Render();\r\n            }\r\n\r\n            haruluya_webgl_utils.setupSlider(\"shininess\", {value: sectionParams.shininess, slide: updateShininess, min: 1, max: 300});\r\n            haruluya_webgl_utils.setupSlider(\"x\", {value: transform.translation[0], slide: updatePosition(0), max: gl.canvas.width });\r\n            haruluya_webgl_utils.setupSlider(\"y\", {value: transform.translation[1], slide: updatePosition(1), max: gl.canvas.height});\r\n            haruluya_webgl_utils.setupSlider(\"z\", {value: transform.translation[2], slide: updatePosition(2), max: gl.canvas.height});\r\n            haruluya_webgl_utils.setupSlider(\"angleX\", {value: haruluya_webgl_utils.radToDeg(transform.rotation[0]), slide: updateRotation(0), max: 360});\r\n            haruluya_webgl_utils.setupSlider(\"angleY\", {value: haruluya_webgl_utils.radToDeg(transform.rotation[1]), slide: updateRotation(1), max: 360});\r\n            haruluya_webgl_utils.setupSlider(\"angleZ\", {value: haruluya_webgl_utils.radToDeg(transform.rotation[2]), slide: updateRotation(2), max: 360});\r\n            haruluya_webgl_utils.setupSlider(\"scaleX\", {value: transform.scale[0], slide: updateScale(0), min: -5, max: 5, step: 0.01, precision: 2});\r\n            haruluya_webgl_utils.setupSlider(\"scaleY\", {value: transform.scale[1], slide: updateScale(1), min: -5, max: 5, step: 0.01, precision: 2});\r\n            haruluya_webgl_utils.setupSlider(\"scaleZ\", {value: transform.scale[2], slide: updateScale(2), min: -5, max: 5, step: 0.01, precision: 2});\r\n            haruluya_webgl_utils.setupColorInput(\"lightColor\",updateLightColor)\r\n        },\r\n        Destory(){\r\n\r\n        },\r\n        handleClick() {\r\n            window.location.href = \"https://github.com/Haruluya/Rock-sugar/blob/master/rock-sugar/src/pages/WebglDemo/LightPoint/index.vue\";\r\n        },\r\n        setPosition(){\r\n            var matrix = haruluya_webgl_utils.xRotation(Math.PI);\r\n            matrix = haruluya_webgl_utils.translate3d(matrix, -50, -75, -15);\r\n\r\n            for (var ii = 0; ii < positions.length; ii += 3) {\r\n                var vector = haruluya_webgl_utils.transformPoint(matrix, [positions[ii + 0], positions[ii + 1], positions[ii + 2], 1]);\r\n                positions[ii + 0] = vector[0];\r\n                positions[ii + 1] = vector[1];\r\n                positions[ii + 2] = vector[2];\r\n            }\r\n            this.bufferData.position.data = positions;\r\n        }\r\n\r\n    },\r\n    beforeDestory() {\r\n        this.Destory();\r\n    },\r\n   \r\n}\r\n</script>\r\n<style lang=\"less\" scoped>\r\n@import \"../index.less\";\r\n</style>\r\n","export default\r\n`\r\nattribute vec4 a_position;\r\nattribute vec3 a_normal;\r\nattribute vec4 a_color;\r\n//点光源位置。\r\nuniform vec3 u_lightWorldPosition;\r\n//\r\nuniform vec3 u_viewWorldPosition;\r\n//变换矩阵.\r\nuniform mat4 u_world;\r\nuniform mat4 u_worldViewProjection;\r\nuniform mat4 u_worldInverseTranspose;\r\nvarying vec3 v_normal;\r\nvarying vec3 v_surfaceToLight;\r\nvarying vec3 v_surfaceToView;\r\nvarying vec4 v_color;\r\nvoid main() {\r\n    gl_Position = u_worldViewProjection * a_position;\r\n    v_normal = mat3(u_worldInverseTranspose) * a_normal;\r\n    vec3 surfaceWorldPosition = (u_world * a_position).xyz;\r\n    v_surfaceToLight = u_lightWorldPosition - surfaceWorldPosition;\r\n    v_surfaceToView = normalize(u_viewWorldPosition - surfaceWorldPosition);\r\n    v_color = a_color;\r\n}\r\n`","export default\r\n`\r\nprecision mediump float;\r\nvarying vec3 v_normal;\r\nvarying vec3 v_surfaceToLight;\r\nvarying vec3 v_surfaceToView;\r\nvarying vec4 v_color;\r\nuniform float u_shininess;\r\nuniform vec3 u_lightColor;\r\nuniform vec3 u_specularColor;\r\n\r\nvoid main() {\r\n    vec3 normal = normalize(v_normal);\r\n    vec3 surfaceToLightDirection = normalize(v_surfaceToLight);\r\n    vec3 surfaceToViewDirection = normalize(v_surfaceToView);\r\n    vec3 halfVector = normalize(surfaceToLightDirection + surfaceToViewDirection);\r\n    float light = dot(normal, surfaceToLightDirection);\r\n    float specular = 0.0;\r\n    \r\n    if (light > 0.0) {\r\n    specular = pow(dot(normal, halfVector), u_shininess);\r\n    }\r\n    \r\n    gl_FragColor = v_color;\r\n    gl_FragColor.rgb *= light * u_lightColor;\r\n    gl_FragColor.rgb += specular * u_specularColor;\r\n}\r\n`","export default\r\n{\r\n    position:new Float32Array([\r\n        // 正面。\r\n        200,   50,  0,\r\n        0, 50,  0,\r\n        0,   150,  0,\r\n        0, 150,  0,\r\n        200, 150,  0,\r\n        200,   50,  0,\r\n\r\n        // 顶面。\r\n        200,   50,  100,\r\n        0,  50,  100,\r\n        0,   50,  0,\r\n        0,  50,  0,\r\n        200,  50,  0,\r\n        200,   50,  100,\r\n\r\n        // 右侧面。\r\n        200,  50,  0,\r\n        200,  150,  0,\r\n        200,  150,  100,\r\n        200,  150,  100,\r\n        200,  50,  100,\r\n        200,  50,  0,\r\n\r\n        // 左侧面。\r\n        0,   50,  0,\r\n        0,   50,  100,\r\n        0,   150,  100,\r\n        0,   150,  100,\r\n        0,   150,  0,\r\n        0, 50,  0,\r\n\r\n        // 底面。\r\n        0,   150,  0,\r\n        0,   150,  100,\r\n        200,   150,  100,\r\n        200,   150,  100,\r\n        200,  150,  0,\r\n        0,   150,  0,\r\n\r\n        // 后面。\r\n        200,  50,  100,\r\n        200,  150,  100,\r\n        0,  150,  100,\r\n        0,  150,  100,\r\n        0,  50,  100,\r\n        200,  50,  100,  \r\n\r\n\r\n    ]),\r\n    color:new Uint8Array([\r\n        // 正面。\r\n        0,  59, 252,\r\n        0,  80, 252,\r\n        0,  218, 252,\r\n        0,  218, 252,\r\n        0,  80, 252,\r\n        0,  59, 252,\r\n        // 顶面。\r\n        252,  0, 0,\r\n        150,  0, 0,\r\n        0,  0, 0,\r\n        0,  0, 0,\r\n        150,  0, 0,\r\n        252,  0, 0,\r\n\r\n        // 右侧面。\r\n        252,  227, 103,\r\n        150,  227, 103,\r\n        0,  227, 103,\r\n        0,  227, 103,\r\n        150,  227, 103,\r\n        252,  227, 103,\r\n\r\n        // 左侧面。\r\n        252,  227, 103,\r\n        150,  227, 103,\r\n        0,  227, 103,\r\n        0,  227, 103,\r\n        150,  227, 103,\r\n        252,  227, 103,\r\n\r\n        // 底面。\r\n        252,  0, 0,\r\n        150,  0, 0,\r\n        0,  0, 0,\r\n        0,  0, 0,\r\n        150,  0, 0,\r\n        252,  0, 0,\r\n\r\n        // 后面。\r\n        0,  59, 252,\r\n        0,  80, 252,\r\n        0,  218, 252,\r\n        0,  218, 252,\r\n        0,  80, 252,\r\n        0,  59, 252,\r\n\r\n    ]),\r\n    normal:new Float32Array([\r\n        // 正面。\r\n        0,0,1,\r\n        0,0,1,\r\n        0,0,1,\r\n        0,0,1,\r\n        0,0,1,\r\n        0,0,1,\r\n        // 顶面。\r\n        0,1,0,\r\n        0,1,0,\r\n        0,1,0,\r\n        0,1,0,\r\n        0,1,0,\r\n        0,  1,0,\r\n        // 右侧面。\r\n        1,0,0,\r\n        1,0,0,\r\n        1,0,0,\r\n        1,0,0,\r\n        1,0,0,\r\n        1,0,0,\r\n        // 左侧面。\r\n        -1,0,0,\r\n        -1,0,0,\r\n        -1,0,0,\r\n        -1,0,0,\r\n        -1,0,0,\r\n        -1,0,0,\r\n        // 底面。\r\n        0,-1,0,\r\n        0,-1,0,\r\n        0,-1,0,\r\n        0,-1,0,\r\n        0,-1,0,\r\n        0,-1,0,\r\n        // 后面。\r\n        0,0,-1,\r\n        0,0,-1,\r\n        0,0,-1,\r\n        0,0,-1,\r\n        0,0,-1,\r\n        0,0,-1,\r\n\r\n    ])\r\n}","import { render } from \"./index.vue?vue&type=template&id=09f60b53&scoped=true&lang=html\"\nimport script from \"./index.vue?vue&type=script&lang=js\"\nexport * from \"./index.vue?vue&type=script&lang=js\"\n\nimport \"./index.vue?vue&type=style&index=0&id=09f60b53&lang=less&scoped=true\"\n\nimport exportComponent from \"F:\\\\Note-Haruluya\\\\Project\\\\Rock-sugar\\\\rock-sugar\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-09f60b53\"]])\n\nexport default __exports__"],"names":["class","id","_createElementBlock","_createElementVNode","_createVNode","_component_nano_canvas","prop_vertex_shader_source","$data","prop_fragment_shader_source","_component_ui","_component_nano_webgl_des_panel","prop_category","category","prop_name","name","prop_button_content","buttonContent","prop_title","title","prop_content","content","onHandleClick","$options","position","Float32Array","color","Uint8Array","normal","desData","positions","data","colors","normals","gl","canvas","program","vertexShaderSource","fragmentShaderSource","bufferData","uniformsData","u_lightWorldPosition","u_viewWorldPosition","u_world","u_worldViewProjection","u_worldInverseTranspose","u_shininess","u_lightColor","u_specularColor","bufferInfo","uniformSetters","attribSetters","transfrom","translation","rotation","haruluya_webgl_utils","degToRad","scale","perspective","aspect","fieldOfViewRadians","zNear","zFar","camera","target","up","sectionParams","lightColor","shininess","lightPosition","mounted","this","Init","SetUI","methods","initWebglContext","createProgramFromScripts","clientWidth","clientHeight","setPosition","createBufferInfoFromArrays","createUniformSetters","createAttributeSetters","Render","resizeCanvasToDisplaySize","viewport","width","height","clear","COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","enable","CULL_FACE","DEPTH_TEST","useProgram","setBuffersAndAttributes","projectionMatrix","cameraMatrix","lookAt","viewMatrix","inverse","viewProjectionMatrix","multiply3d","worldMatrix","getTransformMatrix","xRotation","worldViewProjectionMatrix","worldInverseMatrix","worldInverseTransposeMatrix","transpose","normalize","uniform3fv","getUniformLocation","setUniforms","drawArrays","TRIANGLES","transform","updatePosition","index","event","ui","value","updateRotation","angleInDegrees","angleInRadians","Math","PI","updateScale","updateShininess","updateLightColor","colorToRGB","setupSlider","slide","min","max","radToDeg","step","precision","setupColorInput","Destory","handleClick","window","location","href","matrix","translate3d","ii","length","vector","transformPoint","beforeDestory","__exports__","render"],"sourceRoot":""}