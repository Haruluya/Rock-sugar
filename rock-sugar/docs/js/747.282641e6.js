"use strict";(self["webpackChunkrock_sugar"]=self["webpackChunkrock_sugar"]||[]).push([[747],{6747:function(e,r,t){t.r(r),t.d(r,{default:function(){return _}});var n=t(3396);function a(e,r,t,a,i,o){const s=(0,n.up)("nano_webgl_demo_panel");return(0,n.wg)(),(0,n.j4)(s,{prop_des_data:i.desData,prop_ui_setter:i.uiSetter,prop_vertex_shader:i.vertexShaderSource,prop_fragment_shader:i.fragmentShaderSource,prop_section_params:i.sectionParams,ref:"page",onInit:o.Init,onRender:o.Render,onProp_ui_setter:i.uiSetter},null,8,["prop_des_data","prop_ui_setter","prop_vertex_shader","prop_fragment_shader","prop_section_params","onInit","onRender","onProp_ui_setter"])}var i="\nattribute vec4 a_position;\nattribute vec4 a_color;\nattribute vec3 a_normal;\nuniform mat4 u_worldViewProjection;\nuniform mat4 u_worldInverseTranspose;\nvarying vec3 v_normal;\nvarying vec4 v_color;\nvoid main() {\n    gl_Position = u_worldViewProjection * a_position;\n    v_normal = mat3(u_worldInverseTranspose) * a_normal;\n    v_color = a_color;\n}\n",o="\nprecision mediump float;\nvarying vec3 v_normal;\nuniform vec3 u_reverseLightDirection;\nvarying vec4 v_color;\nvoid main() {\n    vec3 normal = normalize(v_normal);\n    float light = dot(normal, u_reverseLightDirection);\n    gl_FragColor = v_color;\n    gl_FragColor.rgb *= light;\n}\n",s=(t(8675),t(3408),t(4590),{position:new Float32Array([200,50,0,0,50,0,0,150,0,0,150,0,200,150,0,200,50,0,200,50,100,0,50,100,0,50,0,0,50,0,200,50,0,200,50,100,200,50,0,200,150,0,200,150,100,200,150,100,200,50,100,200,50,0,0,50,0,0,50,100,0,150,100,0,150,100,0,150,0,0,50,0,0,150,0,0,150,100,200,150,100,200,150,100,200,150,0,0,150,0,200,50,100,200,150,100,0,150,100,0,150,100,0,50,100,200,50,100]),color:new Uint8Array([0,59,252,0,80,252,0,218,252,0,218,252,0,80,252,0,59,252,252,0,0,150,0,0,0,0,0,0,0,0,150,0,0,252,0,0,252,227,103,150,227,103,0,227,103,0,227,103,150,227,103,252,227,103,252,227,103,150,227,103,0,227,103,0,227,103,150,227,103,252,227,103,252,0,0,150,0,0,0,0,0,0,0,0,150,0,0,252,0,0,0,59,252,0,80,252,0,218,252,0,218,252,0,80,252,0,59,252]),normal:new Float32Array([0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1])}),l=t(720);const g={category:"Webgl",name:"DirectionalLight",buttonContent:"查看源码",title:"方向光",content:"Is the direction of light the direction of hope?"},p=s.color,c=s.position,d=s.normal;var h={name:"DirectionLight",data(){return{gl:null,canvas:null,program:null,vertexShaderSource:i,fragmentShaderSource:o,desData:g,perspective:{aspect:0,fieldOfViewRadians:HNWUEngine.degToRad(60),zNear:1,zFar:2e3},transform:{translation:[100,120,-20],rotation:[HNWUEngine.degToRad(180),HNWUEngine.degToRad(200),HNWUEngine.degToRad(0)],scale:[1,.7,.7]},camera:{target:[0,35,0],position:[100,150,200],up:[0,1,0]},sectionParams:{lightDir:{x:.5,y:.7,z:0}},page:null,uiSetter:[]}},methods:{Init(){this.page=this.$refs.page,this.gl=this.page.getGL(),this.canvas=this.page.getCanvas(),this.program=this.page.getProgram(),this.perspective.aspect=this.gl.canvas.clientWidth/this.gl.canvas.clientHeight,this.page.setTransform(this.transform),this.page.addBuffer("position",{data:c}),this.page.addBuffer("color",{data:p}),this.page.addBuffer("normal",{data:d})},Render(){const e=this.gl,r=[this.sectionParams.lightDir.x,this.sectionParams.lightDir.y,this.sectionParams.lightDir.z];e.enable(e.CULL_FACE),e.enable(e.DEPTH_TEST);let t=HNWUEngine.perspective(this.perspective.fieldOfViewRadians,this.perspective.aspect,this.perspective.zNear,this.perspective.zFar),n=HNWUEngine.lookAt(this.camera.position,this.camera.target,this.camera.up),a=HNWUEngine.inverse(n),i=HNWUEngine.multiply3d(t,a),o=HNWUEngine.getTransformMatrix(HNWUEngine.xRotation(0),this.transform),s=HNWUEngine.multiply3d(i,o),l=HNWUEngine.inverse(o),g=HNWUEngine.transpose(l);this.page.addUniform("u_worldViewProjection",s),this.page.addUniform("u_worldInverseTranspose",g),this.page.addUniform("u_reverseLightDirection",HNWUEngine.normalize(r)),this.page.glDraw({mode:e.TRIANGLES,first:0,count:96})}},mounted(){this.uiSetter=[{type:"slider-vector",id:"lightDir",value:this.sectionParams.lightDir,min:{x:-100,y:-100,z:-100},max:{x:100,y:100,z:100},callback:l.Z.globalUiCallbacks.updateVector3(this.sectionParams,this.$refs.page.Render,"lightDir")}]}},m=t(89);const u=(0,m.Z)(h,[["render",a],["__scopeId","data-v-579d10fa"]]);var _=u}}]);
//# sourceMappingURL=747.282641e6.js.map