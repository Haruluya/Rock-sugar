{"version":3,"file":"js/523.424b5436.js","mappings":"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","sources":["webpack://rock-sugar/./src/pages/CG/Experiment/Bezier/index.vue","webpack://rock-sugar/./src/pages/CG/Experiment/Bezier/index.vue?5844"],"sourcesContent":["<template lang=\"html\">\r\n    <nano_cg_experiment_page :prop_des_data=\"desData\" :prop_ui_setter=\"uiSetter\" :prop_section_params=\"sectionParams\"\r\n        ref=\"page\" />\r\n</template>\r\n<script>\r\n\r\nimport uiSetting from \"../ui-setting\"\r\nimport { Point} from \"../Interfaces\"\r\n\r\nconst desData = {\r\n    category: \"Experiment\",\r\n    name: \"Bezier\",\r\n    buttonContent: \"查看源码\",\r\n    title: \"Bezier\",\r\n    content: \"Bezier.\"\r\n}\r\n\r\n/*\r\n    @author:haruluya\r\n    @des: Ex20 Bezier.\r\n*/\r\nconst INTERAL = 500;\r\nexport default {\r\n    name: \"Bezier\",\r\n    data() {\r\n        return {\r\n            canvas: null,\r\n            ctx: null,\r\n            // component data.\r\n            desData,\r\n            // params of page.\r\n            sectionParams: {\r\n                point : [new Point(100,550),new Point(230,200),new Point(590,120),new Point(700,500)], //控制点\r\n                auxPoint : [], //辅助点\r\n                tem : new Point(0,0), //移动控制点时用的临时点\r\n                bezier : [], //贝塞尔曲线\r\n                isMoving : false,\r\n                order : 0, //移动的是第几个控制点\r\n                t : (INTERAL) /2 , //插值公式的t*INTERAL\r\n                debugContent: null,\r\n                girdSize: 1,\r\n                screenTransform:{x:0,y:0,scale:50}\r\n            }\r\n        };\r\n    },\r\n    computed: {\r\n        //uiSetter.\r\n        uiSetter() {\r\n            let sectionParams = this.sectionParams;\r\n            let setter = [\r\n                {type:\"slider\", id:\"t\", value: sectionParams.t, min:0, max:INTERAL, \r\n                    callback:uiSetting.globalUiCallbacks.updateValue(this,\"t\")\r\n                },\r\n                {\r\n                    type: \"slider\", id: \"girdSize\", value: sectionParams.girdSize, min: 1, max: 100,\r\n                    callback: uiSetting.globalUiCallbacks.updateValue(this, \"girdSize\")\r\n                },\r\n            ];\r\n            for (let i= 0; i < this.sectionParams.point.length; i++){\r\n                setter.push(\r\n                 { type: \"slider-vector\", id: \"point\"+i , value: sectionParams.point[i], min: { x: 0, y: 0 }, max: { x: 1000, y: 1000 }, callback: uiSetting.globalUiCallbacks.updatePointArray(this, \"point\", i) },\r\n                )\r\n            }\r\n\r\n            return setter;\r\n        },\r\n    },\r\n    mounted() {\r\n        this.Init();\r\n        this.SetUI();\r\n    },\r\n    methods: {\r\n        Init() {\r\n            this.$refs.page.Init();\r\n            \r\n            this.canvas = this.$refs.page.getCanvas();\r\n            this.ctx = canvas.getContext('2d');\r\n            this.$refs.page.setViewer(this.sectionParams.screenTransform,this.Render);\r\n\r\n            this.Render();\r\n        },\r\n        Render() {\r\n            this.$refs.page.Render();\r\n           \r\n            const ctx = this.ctx;\r\n            const gridx = parseInt(this.canvas.width / this.sectionParams.girdSize) - 1;\r\n            const gridy = parseInt(this.canvas.height / this.sectionParams.girdSize) - 1;\r\n\r\n            ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\r\n\r\n            this.sectionParams.girdSize += this.$refs.page.girdSize;\r\n            uiSetting.drawGrid(this);\r\n\r\n            if(this.sectionParams.girdSize  <= 0) {\r\n                    this.sectionParams.girdSize = 1\r\n            }\r\n            this.sectionParams.debugContent = [{\r\n                title: \"grid\", content: \"The number of cells in the x direction: \" + gridx + \"\\nThe number of cells in the y direction: \" + gridy,\r\n            }];\r\n            uiSetting.setScreenTransform(this.sectionParams.screenTransform);\r\n\r\n            \r\n            //Bezier.\r\n            this.sectionParams.bezier = [];\r\n            this.sectionParams.auxPoint = [];\r\n            for(let i = 0; i < this.sectionParams.t; i++){\r\n                this.nextPoint(i);\r\n            }\r\n            let bezier = this.sectionParams.bezier;\r\n            let point = this.sectionParams.point;\r\n            let auxPoint = this.sectionParams.auxPoint;\r\n            let tem = this.sectionParams.tem;\r\n            let order = this.sectionParams.order;\r\n\r\n            uiSetting.drawLineInGrid(this,point[0],point[1],\"blue\");\r\n            uiSetting.drawLineInGrid(this,point[1],point[2],\"blue\");\r\n            uiSetting.drawLineInGrid(this,point[2],point[3],\"blue\");\r\n            \r\n            for(let i=0;i<bezier.length;++i){\r\n                uiSetting.drawEllipseInGrid(this,bezier[i].x,bezier[i].y,1,1,\"red\");\r\n            }\r\n\r\n            uiSetting.drawLineInGrid(this,auxPoint[0],auxPoint[1],\"green\");\r\n            uiSetting.drawLineInGrid(this,auxPoint[1],auxPoint[2],\"green\");\r\n            uiSetting.drawLineInGrid(this,auxPoint[3],auxPoint[4],\"yellow\");\r\n            for(let i=0;i<4;++i)\r\n                uiSetting.drawEllipseInGrid(this,point[i].x-5,point[i].y-5,10,10,\"black\");\r\n            for(let i=0;i<6;++i)\r\n                uiSetting.drawEllipseInGrid(this,auxPoint[i].x-5,auxPoint[i].y-5,10,10);\r\n            if(this.sectionParams.isMoving) {//如果点被移动，在被移动的点和鼠标当前位置画一条虚线\r\n                uiSetting.drawEllipseInGrid(this,tem.x-5,tem.y-5,10,10);\r\n                uiSetting.drawLineInGrid(this,tem,point[order]);\r\n            }\r\n        },\r\n        SetUI() {\r\n            this.$refs.page.SetUI();\r\n        },\r\n        nextPoint(t){\r\n            let bezier = this.sectionParams.bezier;\r\n            let auxPoint = this.sectionParams.auxPoint;\r\n            let point = this.sectionParams.point;\r\n            //用插值公式生成负责点坐标\r\n            auxPoint[0]=new Point((point[0].x*t+point[1].x*(INTERAL-t))/INTERAL,(point[0].y*t+point[1].y*(INTERAL-t))/INTERAL);\r\n            auxPoint[1]=new Point((point[1].x*t+point[2].x*(INTERAL-t))/INTERAL,(point[1].y*t+point[2].y*(INTERAL-t))/INTERAL);\r\n            auxPoint[2]=new Point((point[2].x*t+point[3].x*(INTERAL-t))/INTERAL,(point[2].y*t+point[3].y*(INTERAL-t))/INTERAL);\r\n            auxPoint[3]=new Point((auxPoint[0].x*t+auxPoint[1].x*(INTERAL-t))/INTERAL,(auxPoint[0].y*t+auxPoint[1].y*(INTERAL-t))/INTERAL);\r\n            auxPoint[4]=new Point((auxPoint[1].x*t+auxPoint[2].x*(INTERAL-t))/INTERAL,(auxPoint[1].y*t+auxPoint[2].y*(INTERAL-t))/INTERAL);\r\n            auxPoint[5]=new Point((auxPoint[3].x*t+auxPoint[4].x*(INTERAL-t))/INTERAL,(auxPoint[3].y*t+auxPoint[4].y*(INTERAL-t))/INTERAL);\r\n            bezier.push(auxPoint[5])\r\n        }\r\n    }\r\n}\r\n\r\n</script>","import { render } from \"./index.vue?vue&type=template&id=5413358a&lang=html\"\nimport script from \"./index.vue?vue&type=script&lang=js\"\nexport * from \"./index.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"F:\\\\Note-Haruluya\\\\Project\\\\Rock-sugar\\\\rock-sugar\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["_createBlock","_component_nano_cg_experiment_page","prop_des_data","$data","prop_ui_setter","$options","prop_section_params","ref","desData","category","name","buttonContent","title","content","INTERAL","data","canvas","ctx","sectionParams","point","Point","auxPoint","tem","bezier","isMoving","order","t","debugContent","girdSize","screenTransform","x","y","scale","computed","uiSetter","this","setter","type","id","value","min","max","callback","uiSetting","i","length","push","mounted","Init","SetUI","methods","$refs","page","getCanvas","getContext","setViewer","Render","gridx","parseInt","width","gridy","height","clearRect","nextPoint","__exports__","render"],"sourceRoot":""}