{"version":3,"file":"js/747.282641e6.js","mappings":"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","sources":["webpack://rock-sugar/./src/pages/Webgl/WebglDemo/DirectionalLight/index.vue","webpack://rock-sugar/./src/pages/Webgl/WebglDemo/DirectionalLight/resource/vertex-shader.js","webpack://rock-sugar/./src/pages/Webgl/WebglDemo/DirectionalLight/resource/fragment-shader.js","webpack://rock-sugar/./src/pages/Webgl/WebglDemo/DirectionalLight/resource/data.js","webpack://rock-sugar/./src/pages/Webgl/WebglDemo/DirectionalLight/index.vue?62c3"],"sourcesContent":["<template lang=\"html\">\r\n    <nano_webgl_demo_panel\r\n        :prop_des_data=\"desData\"\r\n        :prop_ui_setter=\"uiSetter\"\r\n        :prop_vertex_shader=\"vertexShaderSource\"\r\n        :prop_fragment_shader=\"fragmentShaderSource\"\r\n        :prop_section_params=\"sectionParams\"\r\n        ref=\"page\"\r\n        @Init=\"Init\"\r\n        @Render=\"Render\"\r\n        @prop_ui_setter=\"uiSetter\"\r\n    />\r\n</template>\r\n<script>\r\nimport vertexShaderSource from './resource/vertex-shader.js'\r\nimport fragmentShaderSource from './resource/fragment-shader.js'\r\nimport data from './resource/data.js'\r\nimport uiSetting from \"../ui-setting\"\r\n\r\nconst desData = {\r\n    category:\"Webgl\",\r\n    name:\"DirectionalLight\",\r\n    buttonContent:\"查看源码\",\r\n    title:\"方向光\",\r\n    content:\"Is the direction of light the direction of hope?\"\r\n}\r\nconst colors = data.color;\r\nconst positions = data.position;\r\nconst normals = data.normal;\r\n\r\n\r\nexport default {\r\n    name:'DirectionLight',\r\n    data() {\r\n        return {\r\n            gl: null,\r\n            canvas: null,\r\n            program: null,\r\n            vertexShaderSource,\r\n            fragmentShaderSource,\r\n            desData,\r\n            perspective:{\r\n                aspect:0,\r\n                fieldOfViewRadians:  HNWUEngine.degToRad(60),\r\n                zNear: 1,\r\n                zFar: 2000,\r\n            },\r\n            transform:{\r\n                translation:[100, 120, -20],\r\n                rotation:[HNWUEngine.degToRad(180), HNWUEngine.degToRad(200), HNWUEngine.degToRad(0)],\r\n                scale:[1,.7,.7]\r\n            },\r\n            camera:{\r\n                target:[0, 35, 0],\r\n                position:[100, 150, 200],\r\n                up:[0,1,0]\r\n            },\r\n            sectionParams:{\r\n                lightDir:{x:0.5,y:0.7,z:0}\r\n            },\r\n            page:null,\r\n            uiSetter:[]\r\n        }\r\n    },\r\n    methods: {\r\n        Init(){\r\n            this.page = this.$refs.page;\r\n            this.gl = this.page.getGL();\r\n            this.canvas = this.page.getCanvas();\r\n            this.program = this.page.getProgram();\r\n            //Get bufferinfo and setters.\r\n            this.perspective.aspect = this.gl.canvas.clientWidth / this.gl.canvas.clientHeight;\r\n\r\n            this.page.setTransform(this.transform);\r\n            this.page.addBuffer(\"position\",{data:positions});\r\n            this.page.addBuffer(\"color\",{data:colors});\r\n            this.page.addBuffer(\"normal\",{data:normals});\r\n        },\r\n        Render(){\r\n            const gl = this.gl;\r\n            const lightDir = [\r\n                this.sectionParams.lightDir.x,\r\n                this.sectionParams.lightDir.y,\r\n                this.sectionParams.lightDir.z\r\n            ]\r\n            gl.enable(gl.CULL_FACE);\r\n            gl.enable(gl.DEPTH_TEST);\r\n\r\n            let projectionMatrix = HNWUEngine.perspective(\r\n                this.perspective.fieldOfViewRadians, \r\n                this.perspective.aspect, \r\n                this.perspective.zNear, \r\n                this.perspective.zFar\r\n                );\r\n            let cameraMatrix = HNWUEngine.lookAt(this.camera.position, this.camera.target, this.camera.up);\r\n            let viewMatrix = HNWUEngine.inverse(cameraMatrix);\r\n            let viewProjectionMatrix = HNWUEngine.multiply3d(projectionMatrix, viewMatrix);\r\n            let worldMatrix = HNWUEngine.getTransformMatrix(\r\n                HNWUEngine.xRotation(0),\r\n                this.transform\r\n            )\r\n\r\n            // normal transform.\r\n            let worldViewProjectionMatrix = HNWUEngine.multiply3d(viewProjectionMatrix, worldMatrix);\r\n            let worldInverseMatrix = HNWUEngine.inverse(worldMatrix);\r\n            let worldInverseTransposeMatrix = HNWUEngine.transpose(worldInverseMatrix);\r\n\r\n            this.page.addUniform(\"u_worldViewProjection\",worldViewProjectionMatrix);\r\n            this.page.addUniform(\"u_worldInverseTranspose\",worldInverseTransposeMatrix);\r\n            this.page.addUniform(\"u_reverseLightDirection\",HNWUEngine.normalize(lightDir));\r\n\r\n            this.page.glDraw({mode:gl.TRIANGLES,first:0,count:16*6})\r\n        },\r\n    },\r\n    mounted() {\r\n        this.uiSetter = [\r\n                { \r\n                    type: \"slider-vector\", id: \"lightDir\" , value: this.sectionParams.lightDir, min: { x: -100, y: -100,z:-100 }, max: { x: 100, y: 100,z:100 }, \r\n                    callback: uiSetting.globalUiCallbacks.updateVector3(this.sectionParams, this.$refs.page.Render, \"lightDir\")\r\n                },\r\n            ]\r\n    },\r\n}\r\n</script>\r\n<style lang=\"less\" scoped>\r\n@import \"../index.less\";\r\n</style>\r\n","export default\r\n`\r\nattribute vec4 a_position;\r\nattribute vec4 a_color;\r\nattribute vec3 a_normal;\r\nuniform mat4 u_worldViewProjection;\r\nuniform mat4 u_worldInverseTranspose;\r\nvarying vec3 v_normal;\r\nvarying vec4 v_color;\r\nvoid main() {\r\n    gl_Position = u_worldViewProjection * a_position;\r\n    v_normal = mat3(u_worldInverseTranspose) * a_normal;\r\n    v_color = a_color;\r\n}\r\n`","export default\r\n`\r\nprecision mediump float;\r\nvarying vec3 v_normal;\r\nuniform vec3 u_reverseLightDirection;\r\nvarying vec4 v_color;\r\nvoid main() {\r\n    vec3 normal = normalize(v_normal);\r\n    float light = dot(normal, u_reverseLightDirection);\r\n    gl_FragColor = v_color;\r\n    gl_FragColor.rgb *= light;\r\n}\r\n`","export default\r\n{\r\n    position:new Float32Array([\r\n        // 正面。\r\n        200,   50,  0,\r\n        0, 50,  0,\r\n        0,   150,  0,\r\n        0, 150,  0,\r\n        200, 150,  0,\r\n        200,   50,  0,\r\n\r\n        // 顶面。\r\n        200,   50,  100,\r\n        0,  50,  100,\r\n        0,   50,  0,\r\n        0,  50,  0,\r\n        200,  50,  0,\r\n        200,   50,  100,\r\n\r\n        // 右侧面。\r\n        200,  50,  0,\r\n        200,  150,  0,\r\n        200,  150,  100,\r\n        200,  150,  100,\r\n        200,  50,  100,\r\n        200,  50,  0,\r\n\r\n        // 左侧面。\r\n        0,   50,  0,\r\n        0,   50,  100,\r\n        0,   150,  100,\r\n        0,   150,  100,\r\n        0,   150,  0,\r\n        0, 50,  0,\r\n\r\n        // 底面。\r\n        0,   150,  0,\r\n        0,   150,  100,\r\n        200,   150,  100,\r\n        200,   150,  100,\r\n        200,  150,  0,\r\n        0,   150,  0,\r\n\r\n        // 后面。\r\n        200,  50,  100,\r\n        200,  150,  100,\r\n        0,  150,  100,\r\n        0,  150,  100,\r\n        0,  50,  100,\r\n        200,  50,  100,  \r\n\r\n\r\n    ]),\r\n    color:new Uint8Array([\r\n        // 正面。\r\n        0,  59, 252,\r\n        0,  80, 252,\r\n        0,  218, 252,\r\n        0,  218, 252,\r\n        0,  80, 252,\r\n        0,  59, 252,\r\n        // 顶面。\r\n        252,  0, 0,\r\n        150,  0, 0,\r\n        0,  0, 0,\r\n        0,  0, 0,\r\n        150,  0, 0,\r\n        252,  0, 0,\r\n\r\n        // 右侧面。\r\n        252,  227, 103,\r\n        150,  227, 103,\r\n        0,  227, 103,\r\n        0,  227, 103,\r\n        150,  227, 103,\r\n        252,  227, 103,\r\n\r\n        // 左侧面。\r\n        252,  227, 103,\r\n        150,  227, 103,\r\n        0,  227, 103,\r\n        0,  227, 103,\r\n        150,  227, 103,\r\n        252,  227, 103,\r\n\r\n        // 底面。\r\n        252,  0, 0,\r\n        150,  0, 0,\r\n        0,  0, 0,\r\n        0,  0, 0,\r\n        150,  0, 0,\r\n        252,  0, 0,\r\n\r\n        // 后面。\r\n        0,  59, 252,\r\n        0,  80, 252,\r\n        0,  218, 252,\r\n        0,  218, 252,\r\n        0,  80, 252,\r\n        0,  59, 252,\r\n\r\n    ]),\r\n    normal:new Float32Array([\r\n        // 正面。\r\n        0,0,1,\r\n        0,0,1,\r\n        0,0,1,\r\n        0,0,1,\r\n        0,0,1,\r\n        0,0,1,\r\n        // 顶面。\r\n        0,1,0,\r\n        0,1,0,\r\n        0,1,0,\r\n        0,1,0,\r\n        0,1,0,\r\n        0,  1,0,\r\n        // 右侧面。\r\n        1,0,0,\r\n        1,0,0,\r\n        1,0,0,\r\n        1,0,0,\r\n        1,0,0,\r\n        1,0,0,\r\n        // 左侧面。\r\n        -1,0,0,\r\n        -1,0,0,\r\n        -1,0,0,\r\n        -1,0,0,\r\n        -1,0,0,\r\n        -1,0,0,\r\n        // 底面。\r\n        0,-1,0,\r\n        0,-1,0,\r\n        0,-1,0,\r\n        0,-1,0,\r\n        0,-1,0,\r\n        0,-1,0,\r\n        // 后面。\r\n        0,0,-1,\r\n        0,0,-1,\r\n        0,0,-1,\r\n        0,0,-1,\r\n        0,0,-1,\r\n        0,0,-1,\r\n\r\n    ])\r\n}","import { render } from \"./index.vue?vue&type=template&id=579d10fa&scoped=true&lang=html\"\nimport script from \"./index.vue?vue&type=script&lang=js\"\nexport * from \"./index.vue?vue&type=script&lang=js\"\n\nimport \"./index.vue?vue&type=style&index=0&id=579d10fa&lang=less&scoped=true\"\n\nimport exportComponent from \"F:\\\\Note-Haruluya\\\\Project\\\\Rock-sugar\\\\rock-sugar\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-579d10fa\"]])\n\nexport default __exports__"],"names":["_createBlock","_component_nano_webgl_demo_panel","prop_des_data","$data","prop_ui_setter","prop_vertex_shader","prop_fragment_shader","prop_section_params","ref","onInit","$options","onRender","onProp_ui_setter","position","Float32Array","color","Uint8Array","normal","desData","category","name","buttonContent","title","content","colors","data","positions","normals","gl","canvas","program","vertexShaderSource","fragmentShaderSource","perspective","aspect","fieldOfViewRadians","HNWUEngine","degToRad","zNear","zFar","transform","translation","rotation","scale","camera","target","up","sectionParams","lightDir","x","y","z","page","uiSetter","methods","Init","this","$refs","getGL","getCanvas","getProgram","clientWidth","clientHeight","setTransform","addBuffer","Render","enable","CULL_FACE","DEPTH_TEST","projectionMatrix","cameraMatrix","lookAt","viewMatrix","inverse","viewProjectionMatrix","multiply3d","worldMatrix","getTransformMatrix","xRotation","worldViewProjectionMatrix","worldInverseMatrix","worldInverseTransposeMatrix","transpose","addUniform","normalize","glDraw","mode","TRIANGLES","first","count","mounted","type","id","value","min","max","callback","uiSetting","__exports__","render"],"sourceRoot":""}