{"version":3,"file":"js/137.73020476.js","mappings":"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","sources":["webpack://rock-sugar/./src/pages/Webgl/WebglDemo/CameraPosition/index.vue","webpack://rock-sugar/./src/pages/Webgl/WebglDemo/CameraPosition/resource/vertex-shader.js","webpack://rock-sugar/./src/pages/Webgl/WebglDemo/CameraPosition/resource/fragment-shader.js","webpack://rock-sugar/./src/pages/Webgl/WebglDemo/CameraPosition/index.vue?129a"],"sourcesContent":["<template lang=\"html\">\r\n    <nano_webgl_demo_panel\r\n        :prop_des_data=\"desData\"\r\n        :prop_ui_setter=\"uiSetter\"\r\n        :prop_vertex_shader=\"vertexShaderSource\"\r\n        :prop_fragment_shader=\"fragmentShaderSource\"\r\n        :prop_section_params=\"sectionParams\"\r\n        ref=\"page\"\r\n        @Init=\"Init\"\r\n        @Render=\"Render\"\r\n        @prop_ui_setter=\"uiSetter\"\r\n    />\r\n</template>\r\n<script>\r\nimport vertexShaderSource from './resource/vertex-shader.js'\r\nimport fragmentShaderSource from './resource/fragment-shader.js'\r\n\r\n\r\nconst desData = {\r\n    category:\"Webgl\",\r\n    name:\"CameraPosition\",\r\n    buttonContent:\"查看源码\",\r\n    title:\"相机\",\r\n    content:\"He suddenly realized he'd never taken a selfie before.\"\r\n}\r\n\r\n\r\n\r\n// import modelData from '_utils/outData/HeadData.js'\r\n\r\nexport default {\r\n    name:'CameraPosition',\r\n    data() {\r\n        return {\r\n            gl: null,\r\n            canvas: null,\r\n            program: null,\r\n            vertexShaderSource,\r\n            fragmentShaderSource,\r\n            desData,\r\n            bufferData:{\r\n                position:{data:[]},\r\n                color:{data:[]},\r\n            },\r\n            uniformsData:{\r\n                u_matrix: null,\r\n            },\r\n            bufferInfo:null,\r\n            uniformSetters:null,\r\n            attribSetters:null,\r\n            transfrom:{\r\n                translation:[0, 0, 0],\r\n                rotation:[HNWUEngine.degToRad(0), HNWUEngine.degToRad(0), HNWUEngine.degToRad(0)],\r\n                scale : [1, 1, 1]\r\n\r\n            },\r\n            perspective:{\r\n                aspect:0,\r\n                fieldOfViewRadians:  HNWUEngine.degToRad(60),\r\n                zNear: 1,\r\n                zFar: 3000,\r\n            },\r\n            camera:{\r\n                cameraTarget:[0,-100,0],\r\n                cameraPosition:[500,300,500],\r\n                up:[0,1,0]\r\n            },\r\n            sectionParams:{\r\n                target:[0, 200, 300],\r\n                targetAngleRadians: 0,\r\n                targetRadius: 300,\r\n                numFs:5,\r\n                radius:600,\r\n                deep:5,\r\n                across:5,\r\n            },\r\n            numElements:0,\r\n\r\n        }\r\n    },\r\n    mounted() {\r\n        this.Init();\r\n        this.SetUI();\r\n\r\n    },\r\n    methods: {\r\n        Init(){\r\n            this.page = this.$refs.page;\r\n            this.gl = this.page.getGL();\r\n            this.canvas = this.page.getCanvas();\r\n            this.program = this.page.getProgram();\r\n            //Get bufferinfo and setters.\r\n            this.numElements = this.setPosition();\r\n            this.setColor();\r\n            this.perspective.aspect = gl.canvas.clientWidth / gl.canvas.clientHeight;\r\n            this.page.addBuffer(\"position\",{data:positions});\r\n            this.page.addBuffer(\"color\",{data:colors});\r\n        },\r\n        Render(){\r\n            const gl = this.gl;\r\n            gl.enable(gl.CULL_FACE);\r\n            gl.enable(gl.DEPTH_TEST);\r\n\r\n            //perspective.\r\n            let projectionMatrix = HNWUEngine.perspective(this.perspective.fieldOfViewRadians, \r\n                this.perspective.aspect, \r\n                this.perspective.zNear, \r\n                this.perspective.zFar\r\n            );\r\n\r\n            let cameraMatrix = HNWUEngine.lookAt(this.camera.cameraPosition, this.camera.cameraTarget, this.camera.up);\r\n            let viewMatrix = HNWUEngine.inverse(cameraMatrix);\r\n            let viewProjectionMatrix = HNWUEngine.multiply3d(projectionMatrix, viewMatrix);\r\n            \r\n            \r\n            // Draw circle。\r\n            let deep = this.sectionParams.deep;\r\n            let across = this.sectionParams.across;\r\n            for (let zz = 0; zz < deep; ++zz) {\r\n                let v = zz / (deep - 1);\r\n                let z = (v - .5) * deep * 150;\r\n                for (let xx = 0; xx < across; ++xx) {\r\n                    let u = xx / (across - 1);\r\n                    let x = (u - .5) * across * 150;\r\n                    let matrix = HNWUEngine.lookAt([x, 0, z], this.sectionParams.target, this.camera.up);\r\n                    const MVP = HNWUEngine.multiply3d(viewProjectionMatrix, matrix);\r\n                    this.uniformsData.u_matrix = MVP;\r\n                    HNWUEngine.setUniforms(this.uniformSetters, this.uniformsData);\r\n                    gl.drawArrays(gl.TRIANGLES, 0, this.numElements);\r\n                }\r\n            }\r\n        },\r\n\r\n        setPosition(){\r\n            let positions = new Float32Array(modelData.positions);\r\n            let matrix = HNWUEngine.multiply3d(HNWUEngine.scaling3d(6, 6, 6), HNWUEngine.yRotation(Math.PI));\r\n            for (let ii = 0; ii < positions.length; ii += 3) {\r\n                let vector = HNWUEngine.vectorMultiply([positions[ii + 0], positions[ii + 1], positions[ii + 2], 1], matrix);\r\n                positions[ii + 0] = vector[0];\r\n                positions[ii + 1] = vector[1];\r\n                positions[ii + 2] = vector[2];\r\n            }\r\n            this.bufferData.position.data = positions;\r\n            return positions.length / 3;\r\n        },\r\n        setColor(){\r\n            let normals = modelData.normals;\r\n            let colors = new Uint8Array(normals.length);\r\n            let offset = 0;\r\n            for (let ii = 0; ii < colors.length; ii += 3) {\r\n                for (let jj = 0; jj < 3; ++jj) {\r\n                colors[offset] = (normals[offset] * 0.5 + 0.5) * 255;\r\n                ++offset;\r\n                }\r\n            }\r\n            this.bufferData.color.data = colors;\r\n        }\r\n\r\n    },\r\n\r\n}\r\n</script>\r\n<style lang=\"less\" scoped>\r\n@import \"../index.less\";\r\n</style>\r\n","export default\r\n`\r\nattribute vec4 a_position;\r\nattribute vec4 a_color;\r\nuniform mat4 u_matrix;\r\nvarying vec4 v_color;\r\nvoid main() {\r\n    gl_Position = u_matrix * a_position;\r\n    v_color = a_color;\r\n}\r\n`","export default\r\n`\r\nprecision mediump float;\r\nvarying vec4 v_color; \r\nvoid main() {\r\n    gl_FragColor = v_color;\r\n}\r\n`","import { render } from \"./index.vue?vue&type=template&id=432c620a&scoped=true&lang=html\"\nimport script from \"./index.vue?vue&type=script&lang=js\"\nexport * from \"./index.vue?vue&type=script&lang=js\"\n\nimport \"./index.vue?vue&type=style&index=0&id=432c620a&lang=less&scoped=true\"\n\nimport exportComponent from \"F:\\\\Note-Haruluya\\\\Project\\\\Rock-sugar\\\\rock-sugar\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-432c620a\"]])\n\nexport default __exports__"],"names":["_createBlock","_component_nano_webgl_demo_panel","prop_des_data","$data","prop_ui_setter","_ctx","prop_vertex_shader","prop_fragment_shader","prop_section_params","ref","onInit","$options","onRender","onProp_ui_setter","desData","category","name","buttonContent","title","content","data","gl","canvas","program","vertexShaderSource","fragmentShaderSource","bufferData","position","color","uniformsData","u_matrix","bufferInfo","uniformSetters","attribSetters","transfrom","translation","rotation","HNWUEngine","degToRad","scale","perspective","aspect","fieldOfViewRadians","zNear","zFar","camera","cameraTarget","cameraPosition","up","sectionParams","target","targetAngleRadians","targetRadius","numFs","radius","deep","across","numElements","mounted","this","Init","SetUI","methods","page","$refs","getGL","getCanvas","getProgram","setPosition","setColor","clientWidth","clientHeight","addBuffer","positions","colors","Render","enable","CULL_FACE","DEPTH_TEST","projectionMatrix","cameraMatrix","lookAt","viewMatrix","inverse","viewProjectionMatrix","multiply3d","zz","v","z","xx","u","x","matrix","MVP","setUniforms","drawArrays","TRIANGLES","Float32Array","modelData","scaling3d","yRotation","Math","PI","ii","length","vector","vectorMultiply","normals","Uint8Array","offset","jj","__exports__","render"],"sourceRoot":""}