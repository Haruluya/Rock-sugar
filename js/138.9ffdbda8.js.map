{"version":3,"file":"js/138.9ffdbda8.js","mappings":"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","sources":["webpack://rock-sugar/./src/pages/CG/Experiment/Interfaces/Rect.js","webpack://rock-sugar/./src/pages/CG/Experiment/ClipLine/index.vue","webpack://rock-sugar/./src/pages/CG/Experiment/ClipLine/index.vue?2ca2"],"sourcesContent":["import Point from \"./Point\";\r\n\r\nexport default class Rect{\r\n    left = 0;\r\n    right = 0;\r\n    top = 0;\r\n    bottom = 0;\r\n    constructor(left,right,top,bottom){\r\n        this.left = left;\r\n        this.right = right;\r\n        this.top = top;\r\n        this.bottom = bottom;\r\n    }\r\n    X(){\r\n        return this.left;\r\n    }\r\n    Y(){\r\n        return this.top;\r\n    }\r\n    Height(){\r\n        return this.bottom - this.top;\r\n\r\n    }\r\n    Width(){\r\n        return this.right - this.left;\r\n    }\r\n    Left(){\r\n        return this.left;\r\n    }\r\n    Right(){\r\n        return this.right;\r\n    }\r\n    Top(){\r\n        return this.top;\r\n    }\r\n    Bottom(){\r\n        return this.bottom;\r\n    }\r\n    RectPoints(){\r\n        return {\r\n            leftTop:new Point(this.left,this.top),\r\n            rightTop:new Point(this.right,this.top),\r\n            leftBottom:new Point(this.left,this.bottom),\r\n            rightBottom:new Point(this.right,this.bottom),\r\n        }\r\n    }\r\n    Intersected(rect){\r\n        const left = rect.left - this.left > 0 ?rect.left :this.left;\r\n        const right = rect.right - this.right > 0 ?this.right :rect.right;\r\n        const top = rect.top - this.top > 0 ? rect.top :this.top;\r\n        const bottom = rect.bottom - this.bottom > 0 ?this.bottom :rect.bottom;\r\n        \r\n        if(left > right || top > bottom){\r\n            return null;\r\n        }\r\n\r\n        return new Rect(left,right,top,bottom);\r\n    }\r\n    Scale(scale){\r\n        if(scale <= 0) return;\r\n        this.left *= scale;this.right *= scale;this.top *= scale;this.bottom *= scale;\r\n    }\r\n\r\n}","<template lang=\"html\">\r\n    <nano_cg_experiment_page :prop_des_data=\"desData\" :prop_ui_setter=\"uiSetter\" :prop_section_params=\"sectionParams\"\r\n        ref=\"page\" />\r\n</template>\r\n<script>\r\n\r\nimport uiSetting from \"../ui-setting\"\r\nimport { Point,Rect} from \"../Interfaces\"\r\n\r\nconst desData = {\r\n    category: \"Experiment\",\r\n    name: \"ClipLine\",\r\n    buttonContent: \"查看源码\",\r\n    title: \"直线裁剪\",\r\n    content: \"clip line.\"\r\n}\r\n\r\n\r\n\r\n/*\r\n    @author:haruluya\r\n    @des: Ex10 ClipLine.\r\n*/\r\n\r\nexport default {\r\n    name: \"ClipLine\",\r\n    data() {\r\n        return {\r\n            canvas: null,\r\n            ctx: null,\r\n            // component data.\r\n            desData,\r\n            // params of page.\r\n            sectionParams: {\r\n                beginPoint:new Point(10,10),\r\n                endPoint:new Point(100,100),\r\n                clipRect:new Rect(20,80,20,80),\r\n                innerColor:'#0bc6e3',\r\n                outerColor:'#ffffff',\r\n                clipColor:'#000000',\r\n                debugContent: null,\r\n                girdSize: 3,\r\n                screenTransform:{x:0,y:0,scale:100}\r\n   \r\n            }\r\n        };\r\n    },\r\n\r\n    computed: {\r\n        //uiSetter.\r\n        uiSetter() {\r\n            let sectionParams = this.sectionParams;\r\n            let setter = [\r\n                {\r\n                    type: \"slider\", id: \"girdSize\", value: sectionParams.girdSize, min: 1, max: 100,\r\n                    callback: uiSetting.globalUiCallbacks.updateValue(this, \"girdSize\")\r\n                },\r\n                { type: \"color\",id: \"innerColor\",default: sectionParams.innerColor, callback: uiSetting.globalUiCallbacks.updateValue(this, \"innerColor\")},\r\n                { type: \"color\",id: \"outerColor\",default: sectionParams.outerColor, callback: uiSetting.globalUiCallbacks.updateValue(this, \"outerColor\")},\r\n                { type: \"color\",id: \"clipColor\",default: sectionParams.clipColor, callback: uiSetting.globalUiCallbacks.updateValue(this, \"clipColor\")},\r\n                { type: \"slider-vector\", id: \"beginPoint\" , value: sectionParams.beginPoint, min: { x: 0, y: 0 }, max: { x: 500, y: 500 }, \r\n                callback: uiSetting.globalUiCallbacks.updatePoint(this, \"beginPoint\") },\r\n                { type: \"slider-vector\", id: \"endPoint\" , value: sectionParams.endPoint, min: { x: 0, y: 0 }, max: { x: 500, y: 500 }, \r\n                callback: uiSetting.globalUiCallbacks.updatePoint(this, \"endPoint\") },\r\n            ];\r\n\r\n            return setter;\r\n        },\r\n\r\n    },\r\n    methods: {\r\n        Init() {\r\n            this.$refs.page.Init();\r\n\r\n            this.canvas = this.$refs.page.getCanvas();\r\n            this.ctx = canvas.getContext('2d');\r\n            this.$refs.page.setViewer(this.sectionParams.screenTransform,this.Render);\r\n\r\n            this.Render();\r\n        },\r\n        Render() {\r\n            this.$refs.page.Render();\r\n\r\n            const ctx = this.ctx;\r\n            const gridx = parseInt(this.canvas.width / this.sectionParams.girdSize) - 1;\r\n            const gridy = parseInt(this.canvas.height / this.sectionParams.girdSize) - 1;\r\n\r\n            ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\r\n\r\n            this.sectionParams.girdSize += this.$refs.page.girdSize;\r\n            uiSetting.drawGrid(this);\r\n            \r\n            if(this.sectionParams.girdSize  <= 0) {\r\n                    this.sectionParams.girdSize = 1\r\n            }\r\n            this.sectionParams.debugContent = [{\r\n                title: \"grid\", content: \"The number of cells in the x direction: \" + gridx + \"\\nThe number of cells in the y direction: \" + gridy,\r\n            }];\r\n          \r\n\r\n            //clip line.\r\n            //draw clip frame.\r\n            const clipRect = this.sectionParams.clipRect;\r\n            uiSetting.drawRectInGrid(this,clipRect,this.sectionParams.clipColor);\r\n\r\n            uiSetting.drawLineInGrid(this, this.sectionParams.beginPoint, this.sectionParams.endPoint , this.sectionParams.outerColor);\r\n            const {accept,p0,p1} = this.ClipLine(this.sectionParams.beginPoint,this.sectionParams.endPoint,clipRect);\r\n            if (accept){\r\n                uiSetting.drawLineInGrid(this, p0, p1 , this.sectionParams.innerColor);\r\n            }  \r\n       \r\n        },\r\n        ClipLine(p0,p1,rt){\r\n            let accept, done;\r\n            let c0, c1, code;\r\n            let x0, y0, x1, y1, x, y;\r\n            let m;\r\n            accept = false;//线段可见标志\r\n            done = false;//裁剪完成标志\r\n            x0 = p0.x;\r\n            y0 = p0.y;\r\n            x1 = p1.x;\r\n            y1 = p1.y;\r\n            c0 = this.GetCSCode(x0, y0, rt);//返回线段起点的编码\r\n            c1 = this.GetCSCode(x1, y1, rt);//返回线段终点的编码\r\n            while (!done)\r\n            {\r\n                if (!c0 && !c1){//线段完全可见\r\n                    p0 = new Point(x0,y0);\r\n                    p1 = new Point(x1,y1);\r\n                    accept = true;\r\n                    done = true;\r\n                }\r\n                else if (c0&c1){//线段完全不可见\r\n                    p0 = new Point(0,0);\r\n                    p1 = new Point(0,0);\r\n                    accept = false;\r\n                    done = true;\r\n                }\r\n                else{//处理非完全可见又非显然不可见的情况\r\n                    if (c0){//p0不可见\r\n                        code = c0;\r\n                    }\r\n                    else{////p0可见，则p1一定不可见\r\n                        code = c1;\r\n                    }\r\n                    if (code & 0x01){//线段与窗口的左边有交\r\n                        x = rt.Left();\r\n                        m = (y1 - y0) / (x1 - x0);\r\n                        y = y0 + Math.floor((x - x0)*m);\r\n                    }\r\n                    else if (code & 0x08){//线段与窗口的下边有交\r\n                        y = rt.Bottom();\r\n                        m = (x1 - x0) / (y1 - y0);\r\n                        x = x0 + Math.floor((y - y0)*m);\r\n                    }\r\n                    else if (code & 0x02){//线段与窗口的右边有交\r\n                        x = rt.Right();\r\n                        m = (y1 - y0) / (x1 - x0);\r\n                        y = y0 + Math.floor((x - x0)*m);\r\n                    }\r\n                    else if (code & 0x04){//线段与窗口的上边有交\r\n                        y = rt.Top();\r\n                        m = (x1 - x0) / (y1 - y0);\r\n                        x = x0 + Math.floor((y - y0)*m);\r\n                    }\r\n                    if (code == c0){\r\n                        x0 = x;\t\ty0 = y;\r\n                        c0 = this.GetCSCode(x0, y0, rt);\r\n                    }\r\n                    else{\r\n                        x1 = x;\t\ty1 = y;\r\n                        c1 = this.GetCSCode(x1, y1, rt);\r\n                    }\r\n                }\r\n            }\r\n            return {accept,p0,p1};\r\n        },\r\n        GetCSCode(x,y,rt){\r\n            let code=0;\r\n            if(x<rt.Left())//编码为***1,最后一位置1\r\n                code=code|0x01;\r\n            else//编码为***0，最后一位置0\r\n                code=code&0xfe;\r\n            if(x>rt.Right())//编码为**1*\r\n                code=code|0x02;\r\n            else//编码为**0*\r\n                code=code&0xfd;\r\n            if(y<rt.Top())//编码为*1**\r\n                code=code|0x04;\r\n            else//编码为*0**\r\n                code=code&0xfb;\r\n            if(y>rt.Bottom())//编码为1***\r\n                code=code|0x08;\r\n            else//编码为0***\r\n                code=code&0xf7;\r\n            return code;\r\n        },\r\n        SetUI() {\r\n            this.$refs.page.SetUI();\r\n        },\r\n\r\n\r\n    },\r\n    mounted() {\r\n        this.Init();\r\n        this.SetUI();\r\n    },\r\n\r\n};\r\n\r\n</script>\r\n","import { render } from \"./index.vue?vue&type=template&id=45c3cd90&lang=html\"\nimport script from \"./index.vue?vue&type=script&lang=js\"\nexport * from \"./index.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"F:\\\\Note-Haruluya\\\\Project\\\\Rock-sugar\\\\rock-sugar\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["Rect","constructor","left","right","top","bottom","this","X","Y","Height","Width","Left","Right","Top","Bottom","RectPoints","leftTop","Point","rightTop","leftBottom","rightBottom","Intersected","rect","Scale","scale","_createBlock","_component_nano_cg_experiment_page","prop_des_data","$data","prop_ui_setter","$options","prop_section_params","ref","desData","category","name","buttonContent","title","content","data","canvas","ctx","sectionParams","beginPoint","endPoint","clipRect","innerColor","outerColor","clipColor","debugContent","girdSize","screenTransform","x","y","computed","uiSetter","setter","type","id","value","min","max","callback","uiSetting","default","methods","Init","$refs","page","getCanvas","getContext","setViewer","Render","gridx","parseInt","width","gridy","height","clearRect","accept","p0","p1","ClipLine","rt","done","c0","c1","code","x0","y0","x1","y1","m","GetCSCode","Math","floor","SetUI","mounted","__exports__","render"],"sourceRoot":""}