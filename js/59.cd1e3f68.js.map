{"version":3,"file":"js/59.cd1e3f68.js","mappings":"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","sources":["webpack://rock-sugar/./src/pages/Webgl/WebglDemo/SpotLight/index.vue","webpack://rock-sugar/./src/pages/Webgl/WebglDemo/SpotLight/resource/vertex-shader.js","webpack://rock-sugar/./src/pages/Webgl/WebglDemo/SpotLight/resource/fragment-shader.js","webpack://rock-sugar/./src/pages/Webgl/WebglDemo/SpotLight/resource/data.js","webpack://rock-sugar/./src/pages/Webgl/WebglDemo/SpotLight/index.vue?a9e3"],"sourcesContent":["<template lang=\"html\">\r\n    <nano_webgl_demo_panel\r\n        :prop_des_data=\"desData\"\r\n        :prop_ui_setter=\"uiSetter\"\r\n        :prop_vertex_shader=\"vertexShaderSource\"\r\n        :prop_fragment_shader=\"fragmentShaderSource\"\r\n        :prop_section_params=\"sectionParams\"\r\n        ref=\"page\"\r\n        @Init=\"Init\"\r\n        @Render=\"Render\"\r\n        @prop_ui_setter=\"uiSetter\"\r\n    />\r\n</template>\r\n<script>\r\nimport vertexShaderSource from './resource/vertex-shader.js'\r\nimport fragmentShaderSource from './resource/fragment-shader.js'\r\nimport data from './resource/data.js'\r\nimport uiSetting from \"../ui-setting\"\r\n\r\nconst desData = {\r\n    category:\"Webgl\",\r\n    name:\"SpotLight\",\r\n    buttonContent:\"查看源码\",\r\n    title:\"聚光灯\",\r\n    content:\"potlight will never be on me.\"\r\n}\r\n\r\n\r\n\r\n\r\nconst positions = data.position;\r\nconst colors = data.color;\r\nconst normals = data.normal;\r\n\r\nexport default {\r\n    name:'SpotLight',\r\n    data() {\r\n        return {\r\n            gl: null,\r\n            canvas: null,\r\n            program: null,\r\n            vertexShaderSource,\r\n            fragmentShaderSource,\r\n            desData,\r\n            perspective:{\r\n                aspect:0,\r\n                fieldOfViewRadians:  HNWUEngine.degToRad(60),\r\n                zNear: 1,\r\n                zFar: 2000,\r\n            },\r\n            transform:{\r\n                translation:[0, 0, 0],\r\n                rotation:[HNWUEngine.degToRad(190), HNWUEngine.degToRad(200), HNWUEngine.degToRad(360)],\r\n                scale : [1, 0.8, 1]\r\n            },\r\n            camera:{\r\n                target:[0, 35, 0],\r\n                position:[100, 150, 200],\r\n                up:[0,1,0]\r\n            },\r\n            sectionParams:{\r\n                shininess:10,\r\n                lightRotation:{x:0,y:0},\r\n                lightDirection:[0,0,1],\r\n                lightPosition:{x:40,y:60,z:120},\r\n                innerLimit:21,\r\n                outerLimit:35,\r\n            },\r\n\r\n            uiSetter:[]\r\n        }\r\n    },\r\n\r\n    methods: {\r\n        Init(){\r\n            this.gl = this.$refs.page.getGL();\r\n            this.canvas = this.$refs.page.getCanvas();\r\n            this.program = this.$refs.page.getProgram();\r\n\r\n            //Get bufferinfo and setters.\r\n            this.perspective.aspect = this.gl.canvas.clientWidth / this.gl.canvas.clientHeight;\r\n\r\n            this.setPosition();\r\n\r\n            const lightPosition = [\r\n                this.sectionParams.lightPosition.x,\r\n                this.sectionParams.lightPosition.y,\r\n                this.sectionParams.lightPosition.z\r\n            ]\r\n\r\n            var lmat = HNWUEngine.lookAt(lightPosition, this.camera.target, this.camera.up);\r\n            lmat = HNWUEngine.multiply3d(HNWUEngine.xRotation(this.sectionParams.lightRotation.x), lmat);\r\n            lmat = HNWUEngine.multiply3d(HNWUEngine.yRotation(this.sectionParams.lightRotation.y), lmat);\r\n            this.sectionParams.lightDirection = [-lmat[8], -lmat[9],-lmat[10]];\r\n            \r\n            this.$refs.page.setTransform(this.transform);\r\n            this.$refs.page.addBuffer(\"position\",{data:positions});\r\n            this.$refs.page.addBuffer(\"color\",{data:colors});\r\n            this.$refs.page.addBuffer(\"normal\",{data:normals});\r\n        },\r\n        Render(){\r\n            const gl = this.gl;\r\n            const lightPosition = [\r\n                this.sectionParams.lightPosition.x,\r\n                this.sectionParams.lightPosition.y,\r\n                this.sectionParams.lightPosition.z\r\n            ]\r\n\r\n            gl.enable(gl.CULL_FACE);\r\n            gl.enable(gl.DEPTH_TEST);\r\n\r\n            let cameraMatrix = HNWUEngine.lookAt(\r\n                this.camera.position, \r\n                this.camera.target, \r\n                this.camera.up\r\n                );\r\n            let viewMatrix = HNWUEngine.inverse(cameraMatrix);\r\n            let projectionMatrix = HNWUEngine.perspective(\r\n                this.perspective.fieldOfViewRadians, \r\n                this.perspective.aspect, \r\n                this.perspective.zNear, \r\n                this.perspective.zFar\r\n                );\r\n            let viewProjectionMatrix = HNWUEngine.multiply3d(projectionMatrix, viewMatrix);\r\n\r\n   \r\n            let worldMatrix = HNWUEngine.getTransformMatrix(\r\n                    HNWUEngine.yRotation(0),this.transform);\r\n\r\n            // Multiply the matrices.\r\n            let worldViewProjectionMatrix = HNWUEngine.multiply3d(viewProjectionMatrix, worldMatrix);\r\n            let worldInverseMatrix = HNWUEngine.inverse(worldMatrix);\r\n            let worldInverseTransposeMatrix = HNWUEngine.transpose(worldInverseMatrix);\r\n\r\n            this.$refs.page.addUniform(\"u_worldViewProjection\",worldViewProjectionMatrix);\r\n            this.$refs.page.addUniform(\"u_worldInverseTranspose\",worldInverseTransposeMatrix);\r\n            this.$refs.page.addUniform(\"u_world\",worldMatrix);\r\n            this.$refs.page.addUniform(\"u_lightWorldPosition\",lightPosition);\r\n            this.$refs.page.addUniform(\"u_viewWorldPosition\",this.camera.position);\r\n            this.$refs.page.addUniform(\"u_shininess\",this.sectionParams.shininess);\r\n            this.$refs.page.addUniform(\"u_lightDirection\",this.sectionParams.lightDirection);\r\n            this.$refs.page.addUniform(\"u_innerLimit\",Math.cos(HNWUEngine.degToRad(this.sectionParams.innerLimit)));\r\n            this.$refs.page.addUniform(\"u_outerLimit\",Math.cos(HNWUEngine.degToRad(this.sectionParams.outerLimit)));\r\n\r\n            //update lightDirection.\r\n            var lmat = HNWUEngine.lookAt(\r\n                lightPosition, \r\n                this.camera.target, \r\n                this.camera.up\r\n                );\r\n\r\n            lmat = HNWUEngine.multiply3d(HNWUEngine.xRotation(this.sectionParams.lightRotation.x), lmat);\r\n            lmat = HNWUEngine.multiply3d(HNWUEngine.yRotation(this.sectionParams.lightRotation.y), lmat);\r\n            this.sectionParams.lightDirection = [-lmat[8], -lmat[9],-lmat[10]];\r\n\r\n            this.$refs.page.glDraw({mode:gl.TRIANGLES,first:0,count:16*6})\r\n\r\n        },\r\n        setPosition(){\r\n            let matrix = HNWUEngine.xRotation(Math.PI);\r\n            matrix = HNWUEngine.translate3d(matrix, -50, -75, -15);\r\n\r\n            for (let ii = 0; ii < positions.length; ii += 3) {\r\n                let vector = HNWUEngine.transformPoint(matrix, [positions[ii + 0], positions[ii + 1], positions[ii + 2], 1]);\r\n                positions[ii + 0] = vector[0];\r\n                positions[ii + 1] = vector[1];\r\n                positions[ii + 2] = vector[2];\r\n            }\r\n        },\r\n\r\n    },\r\n    mounted() {\r\n        this.uiSetter = [\r\n                {\r\n                    type: \"slider\", id: \"shininess\", value: this.sectionParams.shininess, min: 0, max: 20,\r\n                    callback: uiSetting.globalUiCallbacks.updateValue(this.sectionParams,this.$refs.page.Render, \"shininess\")\r\n                },\r\n                {\r\n                    type: \"slider\", id: \"innerLimit\", value: this.sectionParams.innerLimit, min: 0, max: 50,\r\n                    callback: uiSetting.globalUiCallbacks.updateValue(this.sectionParams,this.$refs.page.Render, \"innerLimit\")\r\n                },\r\n                {\r\n                    type: \"slider\", id: \"outerLimit\", value: this.sectionParams.outerLimit, min: 0, max: 100,\r\n                    callback: uiSetting.globalUiCallbacks.updateValue(this.sectionParams,this.$refs.page.Render, \"outerLimit\")\r\n                },\r\n\r\n                { \r\n                    type: \"slider-vector\", id: \"lightRotation\" , value: this.sectionParams.lightRotation, min: { x: -100, y: -100 }, max: { x: 100, y: 100 }, \r\n                    callback: uiSetting.globalUiCallbacks.updateVector3(this.sectionParams, this.$refs.page.Render, \"lightRotation\")\r\n                },\r\n                \r\n                { \r\n                    type: \"slider-vector\", id: \"lightPosition\" , value: this.sectionParams.lightPosition, min: { x: -100, y: -100,z:-100 }, max: { x: 100, y: 100,z:100 }, \r\n                    callback: uiSetting.globalUiCallbacks.updateVector3(this.sectionParams, this.$refs.page.Render, \"lightPosition\")\r\n                },\r\n            ]\r\n    },\r\n}\r\n</script>\r\n<style lang=\"less\" scoped>\r\n@import \"../index.less\";\r\n</style>\r\n","export default\r\n`\r\nattribute vec4 a_position;\r\nattribute vec3 a_normal;\r\nattribute vec4 a_color;\r\nuniform vec3 u_lightWorldPosition;\r\nuniform vec3 u_viewWorldPosition;\r\nuniform mat4 u_world;\r\nuniform mat4 u_worldViewProjection;\r\nuniform mat4 u_worldInverseTranspose;\r\nvarying vec3 v_normal;\r\nvarying vec3 v_surfaceToLight;\r\nvarying vec3 v_surfaceToView;\r\nvarying vec4 v_color;\r\nvoid main() {\r\n    gl_Position = u_worldViewProjection * a_position;\r\n    v_normal = mat3(u_worldInverseTranspose) * a_normal;\r\n    vec3 surfaceWorldPosition = (u_world * a_position).xyz;\r\n    v_surfaceToLight = u_lightWorldPosition - surfaceWorldPosition;\r\n    v_surfaceToView = u_viewWorldPosition - surfaceWorldPosition;\r\n    v_color = a_color;\r\n}\r\n`","export default\r\n`\r\nprecision mediump float;\r\nvarying vec3 v_normal;\r\nvarying vec3 v_surfaceToLight;\r\nvarying vec3 v_surfaceToView;\r\n\r\nvarying vec4 v_color;\r\nuniform float u_shininess;\r\nuniform vec3 u_lightDirection;\r\nuniform float u_innerLimit;          // in dot space\r\nuniform float u_outerLimit;          // in dot space\r\nvoid main() {\r\n    vec3 normal = normalize(v_normal);\r\n    vec3 surfaceToLightDirection = normalize(v_surfaceToLight);\r\n    vec3 surfaceToViewDirection = normalize(v_surfaceToView);\r\n    vec3 halfVector = normalize(surfaceToLightDirection + surfaceToViewDirection);\r\n    float dotFromDirection = dot(surfaceToLightDirection,\r\n                                -u_lightDirection);\r\n    float inLight = smoothstep(u_outerLimit, u_innerLimit, dotFromDirection);\r\n    float light = inLight * dot(normal, surfaceToLightDirection);\r\n    float specular = inLight * pow(dot(normal, halfVector), u_shininess);\r\n\r\n    gl_FragColor = v_color;\r\n    gl_FragColor.rgb *= light;\r\n    gl_FragColor.rgb += specular;\r\n}\r\n\r\n`","export default{\r\n    position:new Float32Array([\r\n        // 正面。\r\n        200,   50,  0,\r\n        0, 50,  0,\r\n        0,   150,  0,\r\n        0, 150,  0,\r\n        200, 150,  0,\r\n        200,   50,  0,\r\n\r\n        // 顶面。\r\n        200,   50,  100,\r\n        0,  50,  100,\r\n        0,   50,  0,\r\n        0,  50,  0,\r\n        200,  50,  0,\r\n        200,   50,  100,\r\n\r\n        // 右侧面。\r\n        200,  50,  0,\r\n        200,  150,  0,\r\n        200,  150,  100,\r\n        200,  150,  100,\r\n        200,  50,  100,\r\n        200,  50,  0,\r\n\r\n        // 左侧面。\r\n        0,   50,  0,\r\n        0,   50,  100,\r\n        0,   150,  100,\r\n        0,   150,  100,\r\n        0,   150,  0,\r\n        0, 50,  0,\r\n\r\n        // 底面。\r\n        0,   150,  0,\r\n        0,   150,  100,\r\n        200,   150,  100,\r\n        200,   150,  100,\r\n        200,  150,  0,\r\n        0,   150,  0,\r\n\r\n        // 后面。\r\n        200,  50,  100,\r\n        200,  150,  100,\r\n        0,  150,  100,\r\n        0,  150,  100,\r\n        0,  50,  100,\r\n        200,  50,  100,  \r\n\r\n\r\n    ]),\r\n    color: new Uint8Array([\r\n        // 正面。\r\n        0,  59, 252,\r\n        0,  80, 252,\r\n        0,  218, 252,\r\n        0,  218, 252,\r\n        0,  80, 252,\r\n        0,  59, 252,\r\n        // 顶面。\r\n        252,  0, 0,\r\n        150,  0, 0,\r\n        0,  0, 0,\r\n        0,  0, 0,\r\n        150,  0, 0,\r\n        252,  0, 0,\r\n\r\n        // 右侧面。\r\n        252,  227, 103,\r\n        150,  227, 103,\r\n        0,  227, 103,\r\n        0,  227, 103,\r\n        150,  227, 103,\r\n        252,  227, 103,\r\n\r\n        // 左侧面。\r\n        252,  227, 103,\r\n        150,  227, 103,\r\n        0,  227, 103,\r\n        0,  227, 103,\r\n        150,  227, 103,\r\n        252,  227, 103,\r\n\r\n        // 底面。\r\n        252,  0, 0,\r\n        150,  0, 0,\r\n        0,  0, 0,\r\n        0,  0, 0,\r\n        150,  0, 0,\r\n        252,  0, 0,\r\n\r\n        // 后面。\r\n        0,  59, 252,\r\n        0,  80, 252,\r\n        0,  218, 252,\r\n        0,  218, 252,\r\n        0,  80, 252,\r\n        0,  59, 252,\r\n\r\n      ]),\r\n      normal: [\r\n        // 正面。\r\n        0,0,1,\r\n        0,0,1,\r\n        0,0,1,\r\n        0,0,1,\r\n        0,0,1,\r\n        0,0,1,\r\n        // 顶面。\r\n        0,1,0,\r\n        0,1,0,\r\n        0,1,0,\r\n        0,1,0,\r\n        0,1,0,\r\n        0,  1,0,\r\n        // 右侧面。\r\n        1,0,0,\r\n        1,0,0,\r\n        1,0,0,\r\n        1,0,0,\r\n        1,0,0,\r\n        1,0,0,\r\n        // 左侧面。\r\n        -1,0,0,\r\n        -1,0,0,\r\n        -1,0,0,\r\n        -1,0,0,\r\n        -1,0,0,\r\n        -1,0,0,\r\n        // 底面。\r\n        0,-1,0,\r\n        0,-1,0,\r\n        0,-1,0,\r\n        0,-1,0,\r\n        0,-1,0,\r\n        0,-1,0,\r\n        // 后面。\r\n        0,0,-1,\r\n        0,0,-1,\r\n        0,0,-1,\r\n        0,0,-1,\r\n        0,0,-1,\r\n        0,0,-1,\r\n\r\n    ]\r\n    \r\n    \r\n}","import { render } from \"./index.vue?vue&type=template&id=5255c19a&scoped=true&lang=html\"\nimport script from \"./index.vue?vue&type=script&lang=js\"\nexport * from \"./index.vue?vue&type=script&lang=js\"\n\nimport \"./index.vue?vue&type=style&index=0&id=5255c19a&lang=less&scoped=true\"\n\nimport exportComponent from \"F:\\\\Note-Haruluya\\\\Project\\\\Rock-sugar\\\\rock-sugar\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-5255c19a\"]])\n\nexport default __exports__"],"names":["_createBlock","_component_nano_webgl_demo_panel","prop_des_data","$data","prop_ui_setter","prop_vertex_shader","prop_fragment_shader","prop_section_params","ref","onInit","$options","onRender","onProp_ui_setter","position","Float32Array","color","Uint8Array","normal","desData","category","name","buttonContent","title","content","positions","data","colors","normals","gl","canvas","program","vertexShaderSource","fragmentShaderSource","perspective","aspect","fieldOfViewRadians","HNWUEngine","degToRad","zNear","zFar","transform","translation","rotation","scale","camera","target","up","sectionParams","shininess","lightRotation","x","y","lightDirection","lightPosition","z","innerLimit","outerLimit","uiSetter","methods","Init","this","$refs","page","getGL","getCanvas","getProgram","clientWidth","clientHeight","setPosition","lmat","lookAt","multiply3d","xRotation","yRotation","setTransform","addBuffer","Render","enable","CULL_FACE","DEPTH_TEST","cameraMatrix","viewMatrix","inverse","projectionMatrix","viewProjectionMatrix","worldMatrix","getTransformMatrix","worldViewProjectionMatrix","worldInverseMatrix","worldInverseTransposeMatrix","transpose","addUniform","Math","cos","glDraw","mode","TRIANGLES","first","count","matrix","PI","translate3d","ii","length","vector","transformPoint","mounted","type","id","value","min","max","callback","uiSetting","__exports__","render"],"sourceRoot":""}