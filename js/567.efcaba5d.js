"use strict";(self["webpackChunkrock_sugar"]=self["webpackChunkrock_sugar"]||[]).push([[567],{567:function(e,t,n){n.r(t),n.d(t,{default:function(){return _}});var r=n(3396);function o(e,t,n,o,i,a){const s=(0,r.up)("nano_webgl_demo_panel");return(0,r.wg)(),(0,r.j4)(s,{prop_des_data:i.desData,prop_ui_setter:e.uiSetter,prop_vertex_shader:i.vertexShaderSource,prop_fragment_shader:i.fragmentShaderSource,prop_section_params:i.sectionParams,ref:"page",onInit:a.Init,onRender:a.Render,onProp_ui_setter:e.uiSetter},null,8,["prop_des_data","prop_ui_setter","prop_vertex_shader","prop_fragment_shader","prop_section_params","onInit","onRender","onProp_ui_setter"])}n(8675),n(3408),n(4590);var i="\nattribute vec2 a_position;\nattribute vec2 a_texCoord;\nuniform vec2 u_resolution;\nvarying vec2 v_texCoord;\n\nvoid main() {\n    vec2 zeroToOne = a_position / u_resolution;\n    vec2 zeroToTwo = zeroToOne * 2.0;\n    vec2 clipSpace = zeroToTwo - 1.0;\n    gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);\n    v_texCoord = a_texCoord;\n}\n",a="\nprecision mediump float;\n                \nuniform sampler2D u_image;\nuniform vec2 u_textureSize;\nuniform float u_kernel[9];\nuniform float u_kernelWeight;\n\nvarying vec2 v_texCoord;\n\nvoid main() {\n    vec2 onePixel = vec2(1.0, 1.0) / u_textureSize;\n    vec4 colorSum =\n        texture2D(u_image, v_texCoord + onePixel * vec2(-1, -1)) * u_kernel[0] +\n        texture2D(u_image, v_texCoord + onePixel * vec2( 0, -1)) * u_kernel[1] +\n        texture2D(u_image, v_texCoord + onePixel * vec2( 1, -1)) * u_kernel[2] +\n        texture2D(u_image, v_texCoord + onePixel * vec2(-1,  0)) * u_kernel[3] +\n        texture2D(u_image, v_texCoord + onePixel * vec2( 0,  0)) * u_kernel[4] +\n        texture2D(u_image, v_texCoord + onePixel * vec2( 1,  0)) * u_kernel[5] +\n        texture2D(u_image, v_texCoord + onePixel * vec2(-1,  1)) * u_kernel[6] +\n        texture2D(u_image, v_texCoord + onePixel * vec2( 0,  1)) * u_kernel[7] +\n        texture2D(u_image, v_texCoord + onePixel * vec2( 1,  1)) * u_kernel[8] ;\n    gl_FragColor = vec4((colorSum / u_kernelWeight).rgb, 1);\n}\n",s={texcoord:[0,0,1,0,0,1,0,1,1,0,1,1],kernels:{normal:[0,0,0,0,1,0,0,0,0],gaussianBlur:[.045,.122,.045,.122,.332,.122,.045,.122,.045],gaussianBlur2:[1,2,1,2,4,2,1,2,1],gaussianBlur3:[0,1,0,1,1,1,0,1,0],unsharpen:[-1,-1,-1,-1,9,-1,-1,-1,-1],sharpness:[0,-1,0,-1,5,-1,0,-1,0],sharpen:[-1,-1,-1,-1,16,-1,-1,-1,-1],edgeDetect:[-.125,-.125,-.125,-.125,1,-.125,-.125,-.125,-.125],edgeDetect2:[-1,-1,-1,-1,8,-1,-1,-1,-1],edgeDetect3:[-5,0,0,0,0,0,0,0,5],edgeDetect4:[-1,-1,-1,0,0,0,1,1,1],edgeDetect5:[-1,-1,-1,2,2,2,-1,-1,-1],edgeDetect6:[-5,-5,-5,-5,39,-5,-5,-5,-5],sobelHorizontal:[1,2,1,0,0,0,-1,-2,-1],sobelVertical:[1,0,-1,2,0,-2,1,0,-1],previtHorizontal:[1,1,1,0,0,0,-1,-1,-1],previtVertical:[1,0,-1,1,0,-1,1,0,-1],boxBlur:[.111,.111,.111,.111,.111,.111,.111,.111,.111],triangleBlur:[.0625,.125,.0625,.125,.25,.125,.0625,.125,.0625],emboss:[-2,-1,0,-1,1,1,0,1,2]}},u=(n(720),n(9022));const g={category:"Webgl",name:"ImageProcess",buttonContent:"查看源码",title:"图像处理",content:"Image processing can change people's appearance and judge people's life and death."},c=s.texcoord,l=s.kernels;var d={name:"ImageProcess",data(){return{gl:null,canvas:null,program:null,vertexShaderSource:i,fragmentShaderSource:a,desData:g,positions:null,sectionParams:{img:null,selection:"normal"},texture:null,kernels:l}},mounted(){this.LoadImg()},methods:{LoadImg(){const e=new Image;e.src=u,this.sectionParams.img=e,e.onload=()=>{this.positions=this.getImgPosition(canvas,this.sectionParams.img.width,this.sectionParams.img.height),this.$refs.page.Init()}},Init(){if(!this.sectionParams.img)return;this.page=this.$refs.page,this.gl=this.page.getGL(),this.canvas=this.page.getCanvas(),this.program=this.page.getProgram();this.gl;this.page.addBuffer("position",{numComponents:2,data:this.positions}),this.page.addBuffer("texCoord",{numComponents:2,data:c}),this.texture=this.page.addTexture(this.sectionParams.img)},Render(){if(!this.sectionParams.img)return;const e=this.gl;this.page.addUniform("u_resolution",[e.canvas.width,e.canvas.height]),this.page.addUniform("u_textureSize",[this.sectionParams.img.width,this.sectionParams.img.height]),this.page.addUniform("u_kernel",this.kernels[this.sectionParams.selection]),this.page.addUniform("u_kernelWeight",this.computeKernelWeight(this.kernels[this.sectionParams.selection])),this.page.glDraw({mode:e.TRIANGLES,first:0,count:6})},computeKernelWeight(e){let t=e.reduce((function(e,t){return e+t}));return t<=0?1:t},getImgPosition(e,t,n){t=t>300?300:t,n=n>300?300:n;const r=e.getBoundingClientRect().width/2-t/2,o=e.getBoundingClientRect().height/2-n/2;let i=r,a=r+t,s=o,u=o+n;return new Float32Array([i,s,a,s,i,u,i,u,a,s,a,u])}}},m=n(89);const p=(0,m.Z)(d,[["render",o]]);var _=p},9022:function(e,t,n){e.exports=n.p+"img/haruluya.d6eb9f82.jpg"}}]);
//# sourceMappingURL=567.efcaba5d.js.map