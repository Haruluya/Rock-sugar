{"version":3,"file":"js/567.efcaba5d.js","mappings":"iQACIA,EAAAA,EAAAA,IAUEC,EAAA,CATGC,cAAeC,EAAAA,QACfC,eAAgBC,EAAAA,SAChBC,mBAAoBH,EAAAA,mBACpBI,qBAAsBJ,EAAAA,qBACtBK,oBAAqBL,EAAAA,cACtBM,IAAI,OACHC,OAAMC,EAAAA,KACNC,SAAQD,EAAAA,OACRE,iBAAgBR,EAAAA,UATrB,mJ,6BCDJ,EACC,4VCDD,EACC,+jCCDD,GAEIS,SAAS,CACL,EAAM,EACN,EAAM,EACN,EAAM,EACN,EAAM,EACN,EAAM,EACN,EAAM,GAEVC,QAAQ,CACJC,OAAQ,CACR,EAAG,EAAG,EACN,EAAG,EAAG,EACN,EAAG,EAAG,GAENC,aAAc,CACd,KAAO,KAAO,KACd,KAAO,KAAO,KACd,KAAO,KAAO,MAEdC,cAAe,CACf,EAAG,EAAG,EACN,EAAG,EAAG,EACN,EAAG,EAAG,GAENC,cAAe,CACf,EAAG,EAAG,EACN,EAAG,EAAG,EACN,EAAG,EAAG,GAENC,UAAW,EACV,GAAI,GAAI,GACR,EAAI,GAAI,GACR,GAAI,GAAI,GAETC,UAAW,CACX,GAAG,EAAG,GACL,EAAG,GAAG,EACP,GAAG,EAAG,GAENC,QAAS,EACR,GAAI,GAAI,GACR,EAAG,IAAK,GACR,GAAI,GAAI,GAETC,WAAY,EACX,MAAQ,MAAQ,MAChB,KAAQ,GAAQ,MAChB,MAAQ,MAAQ,MAEjBC,YAAa,EACZ,GAAI,GAAI,GACR,EAAI,GAAI,GACR,GAAI,GAAI,GAETC,YAAa,EACZ,EAAG,EAAG,EACH,EAAG,EAAG,EACN,EAAG,EAAG,GAEVC,YAAa,EACZ,GAAI,GAAI,EACL,EAAI,EAAI,EACR,EAAI,EAAI,GAEZC,YAAa,EACZ,GAAI,GAAI,EACL,EAAI,EAAI,GACX,GAAI,GAAI,GAETC,YAAa,EACZ,GAAI,GAAI,GACR,EAAG,IAAK,GACR,GAAI,GAAI,GAETC,gBAAiB,CACb,EAAI,EAAI,EACR,EAAI,EAAI,GACX,GAAI,GAAI,GAETC,cAAe,CACX,EAAI,GAAI,EACR,EAAI,GAAI,EACR,EAAI,GAAI,GAEZC,iBAAkB,CACd,EAAI,EAAI,EACR,EAAI,EAAI,GACX,GAAI,GAAI,GAETC,eAAgB,CACZ,EAAI,GAAI,EACR,EAAI,GAAI,EACR,EAAI,GAAI,GAEZC,QAAS,CACL,KAAO,KAAO,KACd,KAAO,KAAO,KACd,KAAO,KAAO,MAElBC,aAAc,CACV,MAAQ,KAAO,MACf,KAAQ,IAAO,KACf,MAAQ,KAAO,OAEnBC,OAAQ,EACP,GAAI,EAAI,GACR,EAAI,EAAI,EACL,EAAI,EAAI,K,mBHxFpB,MAAMC,EAAU,CACZC,SAAS,QACTC,KAAK,eACLC,cAAc,OACdC,MAAM,OACNC,QAAQ,sFAGNC,EAAYC,EAAK7B,SACjBC,EAAU4B,EAAK5B,QASrB,OACIuB,KAAK,eACLK,OACI,MAAO,CACHC,GAAI,KACJC,OAAQ,KACRC,QAAS,KACTC,mBAJG,EAKHC,qBALG,EAMHZ,UACAa,UAAU,KACVC,cAAc,CACVC,IAAI,KACJC,UAAU,UAGdC,QAAQ,KACRtC,UAGP,EACDuC,UACIC,KAAKC,SACR,EACDC,QAAS,CACLD,UACI,MAAME,EAAQ,IAAIC,MAClBD,EAAME,IAAMC,EACZN,KAAKL,cAAcC,IAAMO,EACzBA,EAAMI,OAAS,KACXP,KAAKN,UAAYM,KAAKQ,eAAelB,OAAQU,KAAKL,cAAcC,IAAIa,MAAMT,KAAKL,cAAcC,IAAIc,QACjGV,KAAKW,MAAMC,KAAKC,MAAhB,CAEP,EACDA,OACI,IAAKb,KAAKL,cAAcC,IACpB,OAEJI,KAAKY,KAAOZ,KAAKW,MAAMC,KACvBZ,KAAKX,GAAKW,KAAKY,KAAKE,QACpBd,KAAKV,OAASU,KAAKY,KAAKG,YACxBf,KAAKT,QAAUS,KAAKY,KAAKI,aACdhB,KAAKX,GAGhBW,KAAKY,KAAKK,UAAU,WAAW,CAACC,cAAc,EAAE9B,KAAKY,KAAKN,YAC1DM,KAAKY,KAAKK,UAAU,WAAW,CAACC,cAAc,EAAE9B,KAAKD,IAGrDa,KAAKF,QAAUE,KAAKY,KAAKO,WAAWnB,KAAKL,cAAcC,IAC1D,EACDwB,SACI,IAAKpB,KAAKL,cAAcC,IACpB,OAEJ,MAAMP,EAAKW,KAAKX,GAEhBW,KAAKY,KAAKS,WAAW,eAAe,CAAChC,EAAGC,OAAOmB,MAAOpB,EAAGC,OAAOoB,SAChEV,KAAKY,KAAKS,WAAW,gBAAgB,CAACrB,KAAKL,cAAcC,IAAIa,MAAOT,KAAKL,cAAcC,IAAIc,SAC3FV,KAAKY,KAAKS,WAAW,WAAWrB,KAAKxC,QAAQwC,KAAKL,cAAcE,YAChEG,KAAKY,KAAKS,WAAW,iBAAiBrB,KAAKsB,oBAAoBtB,KAAKxC,QAAQwC,KAAKL,cAAcE,aAG/FG,KAAKY,KAAKW,OAAO,CAACC,KAAKnC,EAAGoC,UAAUC,MAAM,EAAEC,MAAM,GAErD,EAGDL,oBAAoBM,GAChB,IAAIC,EAASD,EAAOE,QAAO,SAASC,EAAMC,GAClC,OAAOD,EAAOC,CACjB,IACD,OAAOH,GAAU,EAAI,EAAIA,CAChC,EAEDrB,eAAelB,EAAQmB,EAAOC,GAC1BD,EAAQA,EAAQ,IAAM,IAAMA,EAC5BC,EAASA,EAAS,IAAM,IAAMA,EAC9B,MAAMuB,EAAS3C,EAAO4C,wBAAwBzB,MAAM,EAAIA,EAAM,EACxD0B,EAAU7C,EAAO4C,wBAAwBxB,OAAO,EAAIA,EAAO,EACjE,IAAI0B,EAAKH,EACLI,EAAKJ,EAASxB,EACd6B,EAAKH,EACLI,EAAKJ,EAASzB,EAClB,OAAO,IAAI8B,aAAa,CACpBJ,EAAIE,EACJD,EAAIC,EACJF,EAAIG,EACJH,EAAIG,EACJF,EAAIC,EACJD,EAAIE,GAEZ,I,QI9HR,MAAME,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,KAEpE,O","sources":["webpack://rock-sugar/./src/pages/Webgl/WebglDemo/ImageProcess/index.vue","webpack://rock-sugar/./src/pages/Webgl/WebglDemo/ImageProcess/resource/vertex-shader.js","webpack://rock-sugar/./src/pages/Webgl/WebglDemo/ImageProcess/resource/fragment-shader.js","webpack://rock-sugar/./src/pages/Webgl/WebglDemo/ImageProcess/resource/data.js","webpack://rock-sugar/./src/pages/Webgl/WebglDemo/ImageProcess/index.vue?1b94"],"sourcesContent":["<template lang=\"html\">\r\n    <nano_webgl_demo_panel\r\n        :prop_des_data=\"desData\"\r\n        :prop_ui_setter=\"uiSetter\"\r\n        :prop_vertex_shader=\"vertexShaderSource\"\r\n        :prop_fragment_shader=\"fragmentShaderSource\"\r\n        :prop_section_params=\"sectionParams\"\r\n        ref=\"page\"\r\n        @Init=\"Init\"\r\n        @Render=\"Render\"\r\n        @prop_ui_setter=\"uiSetter\"\r\n    />\r\n</template>\r\n<script>\r\nimport vertexShaderSource from './resource/vertex-shader.js'\r\nimport fragmentShaderSource from './resource/fragment-shader.js'\r\nimport data from './resource/data.js'\r\nimport uiSetting from \"../ui-setting\"\r\nimport haruluyaImg from \"_assets/images/haruluya.jpg\"\r\n\r\n\r\nconst desData = {\r\n    category:\"Webgl\",\r\n    name:\"ImageProcess\",\r\n    buttonContent:\"查看源码\",\r\n    title:\"图像处理\",\r\n    content:\"Image processing can change people's appearance and judge people's life and death.\"\r\n}\r\n\r\nconst texCoords = data.texcoord;\r\nconst kernels = data.kernels;\r\n\r\n\r\n/*\r\n    @author:haruluya\r\n    @des: Simple image processing.\r\n*/\r\n\r\n\r\nexport default {\r\n    name:'ImageProcess',\r\n    data() {\r\n        return {\r\n            gl: null,\r\n            canvas: null,\r\n            program: null,\r\n            vertexShaderSource,\r\n            fragmentShaderSource,\r\n            desData,\r\n            positions:null,\r\n            sectionParams:{\r\n                img:null,\r\n                selection:\"normal\"\r\n            },\r\n\r\n            texture:null,\r\n            kernels,\r\n\r\n        }   \r\n    },\r\n    mounted() {\r\n        this.LoadImg();\r\n    },\r\n    methods: {\r\n        LoadImg(){\r\n            const image = new Image();\r\n            image.src = haruluyaImg;\r\n            this.sectionParams.img = image;\r\n            image.onload = ()=>{\r\n                this.positions = this.getImgPosition(canvas, this.sectionParams.img.width,this.sectionParams.img.height);\r\n                this.$refs.page.Init();\r\n            }\r\n        },\r\n        Init(){\r\n            if (!this.sectionParams.img){\r\n                return;\r\n            }\r\n            this.page = this.$refs.page;\r\n            this.gl = this.page.getGL();\r\n            this.canvas = this.page.getCanvas();\r\n            this.program = this.page.getProgram();\r\n            const gl = this.gl;\r\n\r\n            //Get bufferinfo and setters.\r\n            this.page.addBuffer(\"position\",{numComponents:2,data:this.positions});\r\n            this.page.addBuffer(\"texCoord\",{numComponents:2,data:texCoords});\r\n\r\n\r\n            this.texture = this.page.addTexture(this.sectionParams.img);\r\n        },\r\n        Render(){\r\n            if (!this.sectionParams.img){\r\n                return;\r\n            }\r\n            const gl = this.gl;\r\n\r\n            this.page.addUniform(\"u_resolution\",[gl.canvas.width, gl.canvas.height]);\r\n            this.page.addUniform(\"u_textureSize\",[this.sectionParams.img.width, this.sectionParams.img.height]);\r\n            this.page.addUniform(\"u_kernel\",this.kernels[this.sectionParams.selection]);\r\n            this.page.addUniform(\"u_kernelWeight\",this.computeKernelWeight(this.kernels[this.sectionParams.selection]));\r\n            \r\n\r\n            this.page.glDraw({mode:gl.TRIANGLES,first:0,count:6})\r\n\r\n        },\r\n      \r\n\r\n        computeKernelWeight(kernel){\r\n            let weight = kernel.reduce(function(prev, curr) {\r\n                    return prev + curr;\r\n                });\r\n                return weight <= 0 ? 1 : weight;\r\n        },\r\n        //Restricted position.\r\n        getImgPosition(canvas, width, height){\r\n            width = width > 300 ? 300 : width;\r\n            height = height > 300 ? 300 : height;\r\n            const beginX = canvas.getBoundingClientRect().width/2 - width/2;\r\n            const beginY =  canvas.getBoundingClientRect().height/2 - height/2;\r\n            let x1 = beginX;\r\n            let x2 = beginX + width;\r\n            let y1 = beginY;\r\n            let y2 = beginY + height;\r\n            return new Float32Array([\r\n                x1, y1,\r\n                x2, y1,\r\n                x1, y2,\r\n                x1, y2,\r\n                x2, y1,\r\n                x2, y2,\r\n            ]);\r\n        }\r\n    },\r\n\r\n}\r\n</script>\r\n\r\n","export default\r\n`\r\nattribute vec2 a_position;\r\nattribute vec2 a_texCoord;\r\nuniform vec2 u_resolution;\r\nvarying vec2 v_texCoord;\r\n\r\nvoid main() {\r\n    vec2 zeroToOne = a_position / u_resolution;\r\n    vec2 zeroToTwo = zeroToOne * 2.0;\r\n    vec2 clipSpace = zeroToTwo - 1.0;\r\n    gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);\r\n    v_texCoord = a_texCoord;\r\n}\r\n`","export default\r\n`\r\nprecision mediump float;\r\n                \r\nuniform sampler2D u_image;\r\nuniform vec2 u_textureSize;\r\nuniform float u_kernel[9];\r\nuniform float u_kernelWeight;\r\n\r\nvarying vec2 v_texCoord;\r\n\r\nvoid main() {\r\n    vec2 onePixel = vec2(1.0, 1.0) / u_textureSize;\r\n    vec4 colorSum =\r\n        texture2D(u_image, v_texCoord + onePixel * vec2(-1, -1)) * u_kernel[0] +\r\n        texture2D(u_image, v_texCoord + onePixel * vec2( 0, -1)) * u_kernel[1] +\r\n        texture2D(u_image, v_texCoord + onePixel * vec2( 1, -1)) * u_kernel[2] +\r\n        texture2D(u_image, v_texCoord + onePixel * vec2(-1,  0)) * u_kernel[3] +\r\n        texture2D(u_image, v_texCoord + onePixel * vec2( 0,  0)) * u_kernel[4] +\r\n        texture2D(u_image, v_texCoord + onePixel * vec2( 1,  0)) * u_kernel[5] +\r\n        texture2D(u_image, v_texCoord + onePixel * vec2(-1,  1)) * u_kernel[6] +\r\n        texture2D(u_image, v_texCoord + onePixel * vec2( 0,  1)) * u_kernel[7] +\r\n        texture2D(u_image, v_texCoord + onePixel * vec2( 1,  1)) * u_kernel[8] ;\r\n    gl_FragColor = vec4((colorSum / u_kernelWeight).rgb, 1);\r\n}\r\n`","export default\r\n{\r\n    texcoord:[\r\n        0.0,  0.0,\r\n        1.0,  0.0,\r\n        0.0,  1.0,\r\n        0.0,  1.0,\r\n        1.0,  0.0,\r\n        1.0,  1.0,\r\n    ],\r\n    kernels:{\r\n        normal: [\r\n        0, 0, 0,\r\n        0, 1, 0,\r\n        0, 0, 0\r\n        ],\r\n        gaussianBlur: [\r\n        0.045, 0.122, 0.045,\r\n        0.122, 0.332, 0.122,\r\n        0.045, 0.122, 0.045\r\n        ],\r\n        gaussianBlur2: [\r\n        1, 2, 1,\r\n        2, 4, 2,\r\n        1, 2, 1\r\n        ],\r\n        gaussianBlur3: [\r\n        0, 1, 0,\r\n        1, 1, 1,\r\n        0, 1, 0\r\n        ],\r\n        unsharpen: [\r\n        -1, -1, -1,\r\n        -1,  9, -1,\r\n        -1, -1, -1\r\n        ],\r\n        sharpness: [\r\n        0,-1, 0,\r\n        -1, 5,-1,\r\n        0,-1, 0\r\n        ],\r\n        sharpen: [\r\n        -1, -1, -1,\r\n        -1, 16, -1,\r\n        -1, -1, -1\r\n        ],\r\n        edgeDetect: [\r\n        -0.125, -0.125, -0.125,\r\n        -0.125,  1,     -0.125,\r\n        -0.125, -0.125, -0.125\r\n        ],\r\n        edgeDetect2: [\r\n        -1, -1, -1,\r\n        -1,  8, -1,\r\n        -1, -1, -1\r\n        ],\r\n        edgeDetect3: [\r\n        -5, 0, 0,\r\n            0, 0, 0,\r\n            0, 0, 5\r\n        ],\r\n        edgeDetect4: [\r\n        -1, -1, -1,\r\n            0,  0,  0,\r\n            1,  1,  1\r\n        ],\r\n        edgeDetect5: [\r\n        -1, -1, -1,\r\n            2,  2,  2,\r\n        -1, -1, -1\r\n        ],\r\n        edgeDetect6: [\r\n        -5, -5, -5,\r\n        -5, 39, -5,\r\n        -5, -5, -5\r\n        ],\r\n        sobelHorizontal: [\r\n            1,  2,  1,\r\n            0,  0,  0,\r\n        -1, -2, -1\r\n        ],\r\n        sobelVertical: [\r\n            1,  0, -1,\r\n            2,  0, -2,\r\n            1,  0, -1\r\n        ],\r\n        previtHorizontal: [\r\n            1,  1,  1,\r\n            0,  0,  0,\r\n        -1, -1, -1\r\n        ],\r\n        previtVertical: [\r\n            1,  0, -1,\r\n            1,  0, -1,\r\n            1,  0, -1\r\n        ],\r\n        boxBlur: [\r\n            0.111, 0.111, 0.111,\r\n            0.111, 0.111, 0.111,\r\n            0.111, 0.111, 0.111\r\n        ],\r\n        triangleBlur: [\r\n            0.0625, 0.125, 0.0625,\r\n            0.125,  0.25,  0.125,\r\n            0.0625, 0.125, 0.0625\r\n        ],\r\n        emboss: [\r\n        -2, -1,  0,\r\n        -1,  1,  1,\r\n            0,  1,  2\r\n        ]\r\n    },\r\n}","import { render } from \"./index.vue?vue&type=template&id=0e574aca&lang=html\"\nimport script from \"./index.vue?vue&type=script&lang=js\"\nexport * from \"./index.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"F:\\\\Note-Haruluya\\\\Project\\\\Rock-sugar\\\\rock-sugar\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["_createBlock","_component_nano_webgl_demo_panel","prop_des_data","$data","prop_ui_setter","_ctx","prop_vertex_shader","prop_fragment_shader","prop_section_params","ref","onInit","$options","onRender","onProp_ui_setter","texcoord","kernels","normal","gaussianBlur","gaussianBlur2","gaussianBlur3","unsharpen","sharpness","sharpen","edgeDetect","edgeDetect2","edgeDetect3","edgeDetect4","edgeDetect5","edgeDetect6","sobelHorizontal","sobelVertical","previtHorizontal","previtVertical","boxBlur","triangleBlur","emboss","desData","category","name","buttonContent","title","content","texCoords","data","gl","canvas","program","vertexShaderSource","fragmentShaderSource","positions","sectionParams","img","selection","texture","mounted","this","LoadImg","methods","image","Image","src","haruluyaImg","onload","getImgPosition","width","height","$refs","page","Init","getGL","getCanvas","getProgram","addBuffer","numComponents","addTexture","Render","addUniform","computeKernelWeight","glDraw","mode","TRIANGLES","first","count","kernel","weight","reduce","prev","curr","beginX","getBoundingClientRect","beginY","x1","x2","y1","y2","Float32Array","__exports__","render"],"sourceRoot":""}