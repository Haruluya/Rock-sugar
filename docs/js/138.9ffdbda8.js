"use strict";(self["webpackChunkrock_sugar"]=self["webpackChunkrock_sugar"]||[]).push([[138],{5351:function(t,e,i){i.d(e,{Z:function(){return r}});var o=i(2482),s=i(2042);class r{constructor(t,e,i,s){(0,o.Z)(this,"left",0),(0,o.Z)(this,"right",0),(0,o.Z)(this,"top",0),(0,o.Z)(this,"bottom",0),this.left=t,this.right=e,this.top=i,this.bottom=s}X(){return this.left}Y(){return this.top}Height(){return this.bottom-this.top}Width(){return this.right-this.left}Left(){return this.left}Right(){return this.right}Top(){return this.top}Bottom(){return this.bottom}RectPoints(){return{leftTop:new s.Z(this.left,this.top),rightTop:new s.Z(this.right,this.top),leftBottom:new s.Z(this.left,this.bottom),rightBottom:new s.Z(this.right,this.bottom)}}Intersected(t){const e=t.left-this.left>0?t.left:this.left,i=t.right-this.right>0?this.right:t.right,o=t.top-this.top>0?t.top:this.top,s=t.bottom-this.bottom>0?this.bottom:t.bottom;return e>i||o>s?null:new r(e,i,o,s)}Scale(t){t<=0||(this.left*=t,this.right*=t,this.top*=t,this.bottom*=t)}}},8138:function(t,e,i){i.r(e),i.d(e,{default:function(){return d}});var o=i(3396);function s(t,e,i,s,r,n){const a=(0,o.up)("nano_cg_experiment_page");return(0,o.wg)(),(0,o.j4)(a,{prop_des_data:r.desData,prop_ui_setter:n.uiSetter,prop_section_params:r.sectionParams,ref:"page"},null,8,["prop_des_data","prop_ui_setter","prop_section_params"])}var r=i(2812),n=i(2042),a=i(5351);const l={category:"Experiment",name:"ClipLine",buttonContent:"查看源码",title:"直线裁剪",content:"clip line."};var h={name:"ClipLine",data(){return{canvas:null,ctx:null,desData:l,sectionParams:{beginPoint:new n.Z(10,10),endPoint:new n.Z(100,100),clipRect:new a.Z(20,80,20,80),innerColor:"#0bc6e3",outerColor:"#ffffff",clipColor:"#000000",debugContent:null,girdSize:3,screenTransform:{x:0,y:0,scale:100}}}},computed:{uiSetter(){let t=this.sectionParams,e=[{type:"slider",id:"girdSize",value:t.girdSize,min:1,max:100,callback:r.Z.globalUiCallbacks.updateValue(this,"girdSize")},{type:"color",id:"innerColor",default:t.innerColor,callback:r.Z.globalUiCallbacks.updateValue(this,"innerColor")},{type:"color",id:"outerColor",default:t.outerColor,callback:r.Z.globalUiCallbacks.updateValue(this,"outerColor")},{type:"color",id:"clipColor",default:t.clipColor,callback:r.Z.globalUiCallbacks.updateValue(this,"clipColor")},{type:"slider-vector",id:"beginPoint",value:t.beginPoint,min:{x:0,y:0},max:{x:500,y:500},callback:r.Z.globalUiCallbacks.updatePoint(this,"beginPoint")},{type:"slider-vector",id:"endPoint",value:t.endPoint,min:{x:0,y:0},max:{x:500,y:500},callback:r.Z.globalUiCallbacks.updatePoint(this,"endPoint")}];return e}},methods:{Init(){this.$refs.page.Init(),this.canvas=this.$refs.page.getCanvas(),this.ctx=canvas.getContext("2d"),this.$refs.page.setViewer(this.sectionParams.screenTransform,this.Render),this.Render()},Render(){this.$refs.page.Render();const t=this.ctx,e=parseInt(this.canvas.width/this.sectionParams.girdSize)-1,i=parseInt(this.canvas.height/this.sectionParams.girdSize)-1;t.clearRect(0,0,this.canvas.width,this.canvas.height),this.sectionParams.girdSize+=this.$refs.page.girdSize,r.Z.drawGrid(this),this.sectionParams.girdSize<=0&&(this.sectionParams.girdSize=1),this.sectionParams.debugContent=[{title:"grid",content:"The number of cells in the x direction: "+e+"\nThe number of cells in the y direction: "+i}];const o=this.sectionParams.clipRect;r.Z.drawRectInGrid(this,o,this.sectionParams.clipColor),r.Z.drawLineInGrid(this,this.sectionParams.beginPoint,this.sectionParams.endPoint,this.sectionParams.outerColor);const{accept:s,p0:n,p1:a}=this.ClipLine(this.sectionParams.beginPoint,this.sectionParams.endPoint,o);s&&r.Z.drawLineInGrid(this,n,a,this.sectionParams.innerColor)},ClipLine(t,e,i){let o,s,r,a,l,h,c,p,d,u,g,m;o=!1,s=!1,h=t.x,c=t.y,p=e.x,d=e.y,r=this.GetCSCode(h,c,i),a=this.GetCSCode(p,d,i);while(!s)r||a?r&a?(t=new n.Z(0,0),e=new n.Z(0,0),o=!1,s=!0):(l=r||a,1&l?(u=i.Left(),m=(d-c)/(p-h),g=c+Math.floor((u-h)*m)):8&l?(g=i.Bottom(),m=(p-h)/(d-c),u=h+Math.floor((g-c)*m)):2&l?(u=i.Right(),m=(d-c)/(p-h),g=c+Math.floor((u-h)*m)):4&l&&(g=i.Top(),m=(p-h)/(d-c),u=h+Math.floor((g-c)*m)),l==r?(h=u,c=g,r=this.GetCSCode(h,c,i)):(p=u,d=g,a=this.GetCSCode(p,d,i))):(t=new n.Z(h,c),e=new n.Z(p,d),o=!0,s=!0);return{accept:o,p0:t,p1:e}},GetCSCode(t,e,i){let o=0;return t<i.Left()?o|=1:o&=254,t>i.Right()?o|=2:o&=253,e<i.Top()?o|=4:o&=251,e>i.Bottom()?o|=8:o&=247,o},SetUI(){this.$refs.page.SetUI()}},mounted(){this.Init(),this.SetUI()}},c=i(89);const p=(0,c.Z)(h,[["render",s]]);var d=p}}]);
//# sourceMappingURL=138.9ffdbda8.js.map