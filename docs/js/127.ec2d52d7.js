"use strict";(self["webpackChunkrock_sugar"]=self["webpackChunkrock_sugar"]||[]).push([[127],{4483:function(t,e){class i{constructor(t){this.points=t,this.points.forEach(((t,e)=>{this[e]=t}))}maxPointX(){let t=0;return this.points.forEach((e=>{t=t>e.x?t:e.x})),t}minPointX(){let t=this.maxPointX();return this.points.forEach((e=>{t=t<e.x?t:e.x})),t}maxPointY(){let t=0;return this.points.forEach((e=>{t=t>e.y?t:e.y})),t}minPointY(){let t=this.maxPointX();return this.points.forEach((e=>{t=t<e.y?t:e.y})),t}size(){return this.points.length}indexValue(t){return this.points[t]}isInPolygon(t){let e,i,s=!1;for(e=0,i=this.size()-1;e<this.size();i=e++)this.points[e].y>t.y!=this.points[i].y>t.y&&t.x<(this.points[i].x-this.points[e].x)*(t.y-this.points[e].y)/(this.points[i].y-this.points[e].y)+this.points[e].x&&(s=!s);return s}}e["Z"]=i},5127:function(t,e,i){i.r(e),i.d(e,{default:function(){return d}});var s=i(3396);function n(t,e,i,n,a,r){const o=(0,s.up)("nano_cg_experiment_page");return(0,s.wg)(),(0,s.j4)(o,{prop_des_data:a.desData,prop_ui_setter:r.uiSetter,prop_section_params:a.sectionParams,ref:"page"},null,8,["prop_des_data","prop_ui_setter","prop_section_params"])}i(7658);var a=i(2812),r=i(4483);class o{constructor(t,e,i){this.x=t,this.dx=e,this.ymax=i}setX(t){this.x=t}setDx(t){this.dx=t}setYmax(t){this.ymax=t}getX(){return this.x}getDx(){return this.dx}getYmax(){return this.ymax}}var h=o;const c={category:"Experiment",name:"EdgeTablePolygon",buttonContent:"查看源码",title:"多边形有序边表",content:"Edge table polygon."};var l={name:"EdgeTablePolygon",data(){return{canvas:null,ctx:null,desData:c,sectionParams:{points:[{x:20,y:20},{x:20,y:70},{x:50,y:50},{x:110,y:60},{x:110,y:30},{x:50,y:10}],color:"#0bc6e3",debugContent:null,girdSize:3,screenTransform:{x:0,y:0,scale:100}}}},computed:{uiSetter(){let t=this.sectionParams,e=[{type:"slider",id:"girdSize",value:t.girdSize,min:1,max:100,callback:a.Z.globalUiCallbacks.updateValue(this,"girdSize")},{type:"color",id:"color",default:t.color,callback:a.Z.globalUiCallbacks.updateValue(this,"color")}];for(let i=0;i<this.sectionParams.points.length;i++)e.push({type:"slider-vector",id:"point"+i,value:t.points[i],min:{x:0,y:0},max:{x:500,y:500},callback:a.Z.globalUiCallbacks.updatePointArray(this,"points",i)});return e}},methods:{Init(){this.$refs.page.Init(),this.canvas=this.$refs.page.getCanvas(),this.ctx=canvas.getContext("2d"),this.$refs.page.setViewer(this.sectionParams.screenTransform,this.Render),this.Render()},Render(){this.$refs.page.Render();const t=this.ctx,e=(this.sectionParams,parseInt(this.canvas.width/this.sectionParams.girdSize)-1),i=parseInt(this.canvas.height/this.sectionParams.girdSize)-1;t.clearRect(0,0,this.canvas.width,this.canvas.height),this.sectionParams.girdSize+=this.$refs.page.girdSize,a.Z.drawGrid(this),this.sectionParams.girdSize<=0&&(this.sectionParams.girdSize=1),this.sectionParams.debugContent=[{title:"grid",content:"The number of cells in the x direction: "+e+"\nThe number of cells in the y direction: "+i}];const s=new r.Z(this.sectionParams.points);if(s.size()<3)return;let n,o,c,l,p,u,d,x,g,y,m,f,P={},b=[],_=[];x=s.minPointY(),g=s.maxPointY(),d=g-x;for(let a=0;a<s.size();a++)a<s.size()-1?(y=s.indexValue(a),m=s.indexValue(a+1)):(y=s.indexValue(a),m=s.indexValue(0)),y.y>m.y&&(u=y,y=m,m=u),y.y!=m.y&&(f=new h(y.x,(m.x-y.x)/(m.y-y.y),m.y-1),P[y.y-x]||(P[y.y-x]=[]),P[y.y-x].push(f));for(let r=0;r<d;r++){if(l=r+x,P[r]&&P[r].forEach((t=>{b.push(t)})),P[r]=null,b)for(let t=0;t<b.length;)b[t].getYmax()<l?b.splice(t,1):t++;if(b){for(b.forEach((t=>{_.push(t.getX()),t.setX(t.getX()+t.getDx())})),_.sort(),n=0;n<_.length;n++)n%2==0&&(p=_[n],o=_[n]-p?p+1:p,c=_[n+1]),a.Z.drawLineInGrid(this,{x:o,y:l},{x:c,y:l},this.sectionParams.color);_=[]}}P=[]},SetUI(){this.$refs.page.SetUI()}},mounted(){this.Init(),this.SetUI()}},p=i(89);const u=(0,p.Z)(l,[["render",n]]);var d=u}}]);
//# sourceMappingURL=127.ec2d52d7.js.map