{"version":3,"file":"js/11.5c399b6f.js","mappings":"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","sources":["webpack://rock-sugar/./src/pages/CG/Experiment/Interfaces/Rect.js","webpack://rock-sugar/./src/pages/CG/Experiment/ViewTransform/index.vue","webpack://rock-sugar/./src/pages/CG/Experiment/ViewTransform/index.vue?2906"],"sourcesContent":["import Point from \"./Point\";\r\n\r\nexport default class Rect{\r\n    left = 0;\r\n    right = 0;\r\n    top = 0;\r\n    bottom = 0;\r\n    constructor(left,right,top,bottom){\r\n        this.left = left;\r\n        this.right = right;\r\n        this.top = top;\r\n        this.bottom = bottom;\r\n    }\r\n    X(){\r\n        return this.left;\r\n    }\r\n    Y(){\r\n        return this.top;\r\n    }\r\n    Height(){\r\n        return this.bottom - this.top;\r\n\r\n    }\r\n    Width(){\r\n        return this.right - this.left;\r\n    }\r\n    Left(){\r\n        return this.left;\r\n    }\r\n    Right(){\r\n        return this.right;\r\n    }\r\n    Top(){\r\n        return this.top;\r\n    }\r\n    Bottom(){\r\n        return this.bottom;\r\n    }\r\n    RectPoints(){\r\n        return {\r\n            leftTop:new Point(this.left,this.top),\r\n            rightTop:new Point(this.right,this.top),\r\n            leftBottom:new Point(this.left,this.bottom),\r\n            rightBottom:new Point(this.right,this.bottom),\r\n        }\r\n    }\r\n    Intersected(rect){\r\n        const left = rect.left - this.left > 0 ?rect.left :this.left;\r\n        const right = rect.right - this.right > 0 ?this.right :rect.right;\r\n        const top = rect.top - this.top > 0 ? rect.top :this.top;\r\n        const bottom = rect.bottom - this.bottom > 0 ?this.bottom :rect.bottom;\r\n        \r\n        if(left > right || top > bottom){\r\n            return null;\r\n        }\r\n\r\n        return new Rect(left,right,top,bottom);\r\n    }\r\n    Scale(scale){\r\n        if(scale <= 0) return;\r\n        this.left *= scale;this.right *= scale;this.top *= scale;this.bottom *= scale;\r\n    }\r\n\r\n}","<template lang=\"html\">\r\n    <nano_cg_experiment_page :prop_des_data=\"desData\" :prop_ui_setter=\"uiSetter\" :prop_section_params=\"sectionParams\"\r\n        ref=\"page\" />\r\n</template>\r\n<script>\r\n\r\nimport uiSetting from \"../ui-setting\"\r\nimport {Rect} from \"../Interfaces\"\r\n\r\nconst desData = {\r\n    category: \"Experiment\",\r\n    name: \"ViewTransform\",\r\n    buttonContent: \"查看源码\",\r\n    title: \"视角变换\",\r\n    content: \"ViewTransform.\"\r\n}\r\n\r\n/*\r\n    @author:haruluya\r\n    @des: Ex13 ViewTransform.\r\n*/\r\n\r\nexport default {\r\n    name: \"ViewTransform\",\r\n    data() {\r\n        return {\r\n            canvas: null,\r\n            ctx: null,\r\n            // component data.\r\n            desData,\r\n            // params of page.\r\n            sectionParams: {\r\n                rects:[new Rect(10,50,10,50),new Rect(60,85,50,70),new Rect(8,70,45,90)],\r\n                winRectColor:\"#ffffff\",\r\n                viewRectColor:\"#000000\",\r\n                rectsClipColor:\"#0bc6e3\",\r\n                rectsColor:\"#ff0000\",\r\n                winRectOffset:{x:0,y:0},\r\n                viewRectOffset:{x:0,y:0},\r\n                showOriginRects:true,\r\n                debugContent: null,\r\n                girdSize: 3,\r\n                screenTransform:{x:0,y:0,scale:100}\r\n            }\r\n        };\r\n    },\r\n    computed: {\r\n        //uiSetter.\r\n        uiSetter() {\r\n            let sectionParams = this.sectionParams;\r\n            let setter = [\r\n                { type: \"color\",id: \"winRectColor\",default: sectionParams.winRectColor, callback: uiSetting.globalUiCallbacks.updateValue(this, \"winRectColor\")},\r\n                { type: \"color\",id: \"viewRectColor\",default: sectionParams.viewRectColor, callback: uiSetting.globalUiCallbacks.updateValue(this, \"viewRectColor\")},\r\n                { type: \"color\",id: \"rectsClipColor\",default: sectionParams.rectsClipColor, callback: uiSetting.globalUiCallbacks.updateValue(this, \"rectsClipColor\")},\r\n                { type: \"color\",id: \"rectsColor\",default: sectionParams.rectsColor, callback: uiSetting.globalUiCallbacks.updateValue(this, \"rectsColor\")},\r\n                {\r\n                    type: \"slider\", id: \"girdSize\", value: sectionParams.girdSize, min: 1, max: 100,\r\n                    callback: uiSetting.globalUiCallbacks.updateValue(this, \"girdSize\")\r\n                },\r\n                { type: \"slider-vector\", id: \"winRectOffset\" , value: sectionParams.winRectOffset, min: { x: -100, y: -100 }, max: { x: 500, y: 500 }, callback: uiSetting.globalUiCallbacks.updatePoint(this, \"winRectOffset\") },\r\n                { type: \"slider-vector\", id: \"viewRectOffset\" , value: sectionParams.viewRectOffset, min: { x: -100, y: -100 }, max: { x: 500, y: 500 }, callback: uiSetting.globalUiCallbacks.updatePoint(this, \"viewRectOffset\") },\r\n            ];\r\n\r\n            return setter;\r\n        },\r\n        winRect(){\r\n            const {x,y} = this.sectionParams.winRectOffset;\r\n            return new Rect(5 + x,100+x,5+y,100+y);\r\n        },\r\n        viewRect(){\r\n            const {x,y} = this.sectionParams.viewRectOffset;\r\n            return new Rect(20+x,80+x,20+y,80+y); \r\n        }\r\n\r\n    },\r\n    mounted() {\r\n        this.Init();\r\n        this.SetUI();\r\n    },\r\n    methods: {\r\n        Init() {\r\n            this.$refs.page.Init();\r\n\r\n            this.canvas = this.$refs.page.getCanvas();\r\n            this.ctx = canvas.getContext('2d');\r\n            this.$refs.page.setViewer(this.sectionParams.screenTransform,this.Render);\r\n\r\n            this.Render();\r\n        },\r\n        Render() {\r\n            this.$refs.page.Render();\r\n           \r\n\r\n            const ctx = this.ctx;\r\n            const gridx = parseInt(this.canvas.width / this.sectionParams.girdSize) - 1;\r\n            const gridy = parseInt(this.canvas.height / this.sectionParams.girdSize) - 1;\r\n\r\n            ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\r\n\r\n            this.sectionParams.girdSize += this.$refs.page.girdSize;\r\n            uiSetting.drawGrid(this);\r\n            \r\n            if(this.sectionParams.girdSize  <= 0) {\r\n                    this.sectionParams.girdSize = 1\r\n            }\r\n            this.sectionParams.debugContent = [{\r\n                title: \"grid\", content: \"The number of cells in the x direction: \" + gridx + \"\\nThe number of cells in the y direction: \" + gridy,\r\n            }];\r\n            //ViewTransform.\r\n\r\n            if(this.sectionParams.showOriginRects){\r\n                this.sectionParams.rects.forEach(rect=>{\r\n                    uiSetting.drawRectInGrid(this,rect,this.sectionParams.rectsColor);\r\n                })\r\n            }\r\n            \r\n            this.Clip().forEach(rect=>{\r\n                uiSetting.drawRectInGrid(this,rect,this.sectionParams.rectsClipColor);\r\n            })\r\n\r\n            uiSetting.drawRectInGrid(this,this.winRect,this.sectionParams.winRectColor);\r\n            uiSetting.drawRectInGrid(this,this.viewRect,this.sectionParams.viewRectColor);\r\n\r\n        },\r\n        Clip(){\r\n            const clipRects = [];\r\n            this.sectionParams.rects.forEach(rect=>{\r\n                const winClipRect = rect.Intersected(this.winRect);\r\n                const viewClipRect = rect.Intersected(this.viewRect);\r\n                if(!winClipRect || !viewClipRect){\r\n                    return clipRects;\r\n                }\r\n                clipRects.push(winClipRect.Intersected(viewClipRect));\r\n            })\r\n            return clipRects;\r\n        },\r\n        SetUI() {\r\n            this.$refs.page.SetUI();\r\n        },\r\n    }\r\n}\r\n\r\n</script>","import { render } from \"./index.vue?vue&type=template&id=bd8606a4&lang=html\"\nimport script from \"./index.vue?vue&type=script&lang=js\"\nexport * from \"./index.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"F:\\\\Note-Haruluya\\\\Project\\\\Rock-sugar\\\\rock-sugar\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["Rect","constructor","left","right","top","bottom","this","X","Y","Height","Width","Left","Right","Top","Bottom","RectPoints","leftTop","Point","rightTop","leftBottom","rightBottom","Intersected","rect","Scale","scale","_createBlock","_component_nano_cg_experiment_page","prop_des_data","$data","prop_ui_setter","$options","prop_section_params","ref","desData","category","name","buttonContent","title","content","data","canvas","ctx","sectionParams","rects","winRectColor","viewRectColor","rectsClipColor","rectsColor","winRectOffset","x","y","viewRectOffset","showOriginRects","debugContent","girdSize","screenTransform","computed","uiSetter","setter","type","id","default","callback","uiSetting","value","min","max","winRect","viewRect","mounted","Init","SetUI","methods","$refs","page","getCanvas","getContext","setViewer","Render","gridx","parseInt","width","gridy","height","clearRect","forEach","Clip","clipRects","winClipRect","viewClipRect","push","__exports__","render"],"sourceRoot":""}