"use strict";(self["webpackChunkrock_sugar"]=self["webpackChunkrock_sugar"]||[]).push([[137],{5137:function(e,t,a){a.r(t),a.d(t,{default:function(){return d}});var n=a(3396);function r(e,t,a,r,i,o){const s=(0,n.up)("nano_webgl_demo_panel");return(0,n.wg)(),(0,n.j4)(s,{prop_des_data:i.desData,prop_ui_setter:e.uiSetter,prop_vertex_shader:i.vertexShaderSource,prop_fragment_shader:i.fragmentShaderSource,prop_section_params:i.sectionParams,ref:"page",onInit:o.Init,onRender:o.Render,onProp_ui_setter:e.uiSetter},null,8,["prop_des_data","prop_ui_setter","prop_vertex_shader","prop_fragment_shader","prop_section_params","onInit","onRender","onProp_ui_setter"])}a(8675),a(3408),a(4590);var i="\nattribute vec4 a_position;\nattribute vec4 a_color;\nuniform mat4 u_matrix;\nvarying vec4 v_color;\nvoid main() {\n    gl_Position = u_matrix * a_position;\n    v_color = a_color;\n}\n",o="\nprecision mediump float;\nvarying vec4 v_color; \nvoid main() {\n    gl_FragColor = v_color;\n}\n";const s={category:"Webgl",name:"CameraPosition",buttonContent:"查看源码",title:"相机",content:"He suddenly realized he'd never taken a selfie before."};var l={name:"CameraPosition",data(){return{gl:null,canvas:null,program:null,vertexShaderSource:i,fragmentShaderSource:o,desData:s,bufferData:{position:{data:[]},color:{data:[]}},uniformsData:{u_matrix:null},bufferInfo:null,uniformSetters:null,attribSetters:null,transfrom:{translation:[0,0,0],rotation:[HNWUEngine.degToRad(0),HNWUEngine.degToRad(0),HNWUEngine.degToRad(0)],scale:[1,1,1]},perspective:{aspect:0,fieldOfViewRadians:HNWUEngine.degToRad(60),zNear:1,zFar:3e3},camera:{cameraTarget:[0,-100,0],cameraPosition:[500,300,500],up:[0,1,0]},sectionParams:{target:[0,200,300],targetAngleRadians:0,targetRadius:300,numFs:5,radius:600,deep:5,across:5},numElements:0}},mounted(){this.Init(),this.SetUI()},methods:{Init(){this.page=this.$refs.page,this.gl=this.page.getGL(),this.canvas=this.page.getCanvas(),this.program=this.page.getProgram(),this.numElements=this.setPosition(),this.setColor(),this.perspective.aspect=gl.canvas.clientWidth/gl.canvas.clientHeight,this.page.addBuffer("position",{data:positions}),this.page.addBuffer("color",{data:colors})},Render(){const e=this.gl;e.enable(e.CULL_FACE),e.enable(e.DEPTH_TEST);let t=HNWUEngine.perspective(this.perspective.fieldOfViewRadians,this.perspective.aspect,this.perspective.zNear,this.perspective.zFar),a=HNWUEngine.lookAt(this.camera.cameraPosition,this.camera.cameraTarget,this.camera.up),n=HNWUEngine.inverse(a),r=HNWUEngine.multiply3d(t,n),i=this.sectionParams.deep,o=this.sectionParams.across;for(let s=0;s<i;++s){let t=s/(i-1),a=(t-.5)*i*150;for(let n=0;n<o;++n){let t=n/(o-1),i=(t-.5)*o*150,s=HNWUEngine.lookAt([i,0,a],this.sectionParams.target,this.camera.up);const l=HNWUEngine.multiply3d(r,s);this.uniformsData.u_matrix=l,HNWUEngine.setUniforms(this.uniformSetters,this.uniformsData),e.drawArrays(e.TRIANGLES,0,this.numElements)}}},setPosition(){let e=new Float32Array(modelData.positions),t=HNWUEngine.multiply3d(HNWUEngine.scaling3d(6,6,6),HNWUEngine.yRotation(Math.PI));for(let a=0;a<e.length;a+=3){let n=HNWUEngine.vectorMultiply([e[a+0],e[a+1],e[a+2],1],t);e[a+0]=n[0],e[a+1]=n[1],e[a+2]=n[2]}return this.bufferData.position.data=e,e.length/3},setColor(){let e=modelData.normals,t=new Uint8Array(e.length),a=0;for(let n=0;n<t.length;n+=3)for(let r=0;r<3;++r)t[a]=255*(.5*e[a]+.5),++a;this.bufferData.color.data=t}}},p=a(89);const c=(0,p.Z)(l,[["render",r],["__scopeId","data-v-432c620a"]]);var d=c}}]);
//# sourceMappingURL=137.73020476.js.map