"use strict";(self["webpackChunkrock_sugar"]=self["webpackChunkrock_sugar"]||[]).push([[306],{7306:function(n,e,r){r.r(e),r.d(e,{default:function(){return g}});var o=r(3396);const i=n=>((0,o.dD)("data-v-725df62c"),n=n(),(0,o.Cn)(),n),a=(0,o.uE)('<div class="webglContainer" data-v-725df62c><div class="canvesContainer" data-v-725df62c><canvas id="canvas" data-v-725df62c><pre id="vertex-shader" type="x-shader/x-vertex" data-v-725df62c>                        uniform mat4 u_worldViewProjection;\r\n                        uniform vec3 u_lightWorldPos;\r\n                        uniform mat4 u_world;\r\n                        uniform mat4 u_viewInverse;\r\n                        uniform mat4 u_worldInverseTranspose;\r\n                        attribute vec4 a_position;\r\n                        attribute vec3 a_normal;\r\n                        attribute vec2 a_texcoord;\r\n                        varying vec4 v_position;\r\n                        varying vec2 v_texCoord;\r\n                        varying vec3 v_normal;\r\n                        varying vec3 v_surfaceToLight;\r\n                        varying vec3 v_surfaceToView;\r\n                \r\n                        void main() {\r\n                            v_texCoord = a_texcoord;\r\n                            v_position = (u_worldViewProjection * a_position);\r\n                            v_normal = (u_worldInverseTranspose * vec4(a_normal, 0)).xyz;\r\n                            v_surfaceToLight = u_lightWorldPos - (u_world * a_position).xyz;\r\n                            v_surfaceToView = (u_viewInverse[3] - (u_world * a_position)).xyz;\r\n                            gl_Position = v_position;\r\n                        }\r\n                \r\n                    </pre><pre id="fragment-shader" type="x-shader/x-fragment" data-v-725df62c>                        precision mediump float;\r\n                \r\n                        varying vec4 v_position;\r\n                        varying vec2 v_texCoord;\r\n                        varying vec3 v_normal;\r\n                        varying vec3 v_surfaceToLight;\r\n                        varying vec3 v_surfaceToView;\r\n                        \r\n                        uniform vec4 u_lightColor;\r\n                        uniform vec4 u_colorMult;\r\n                        uniform sampler2D u_diffuse;\r\n                        uniform vec4 u_specular;\r\n                        uniform float u_shininess;\r\n                        uniform float u_specularFactor;\r\n                        \r\n                        vec4 lit(float l ,float h, float m) {\r\n                          return vec4(1.0,\r\n                                      abs(l), (l &gt; 0.0) ? pow(max(0.0, h), m) : 0.0,\r\n                                      1.0);\r\n                        }\r\n                        \r\n                        void main() {\r\n                          vec4 diffuseColor = texture2D(u_diffuse, v_texCoord);\r\n                          vec3 a_normal = normalize(v_normal);\r\n                          vec3 surfaceToLight = normalize(v_surfaceToLight);\r\n                          vec3 surfaceToView = normalize(v_surfaceToView);\r\n                          vec3 halfVector = normalize(surfaceToLight + surfaceToView);\r\n                          vec4 litR = lit(dot(a_normal, surfaceToLight),\r\n                                            dot(a_normal, halfVector), u_shininess);\r\n                          vec4 outColor = vec4((\r\n                          u_lightColor * (diffuseColor * litR.y * u_colorMult +\r\n                                        u_specular * litR.z * u_specularFactor)).rgb,\r\n                              diffuseColor.a);\r\n                          gl_FragColor = outColor;\r\n                        }\r\n                    </pre></canvas></div><div id="uiContainer" data-v-725df62c><div id="ui" data-v-725df62c><div id="color1" data-v-725df62c></div><div id="color2" data-v-725df62c></div><div id="amount" data-v-725df62c></div></div></div></div>',1),t={class:"desContainer"},s={class:"des"},u=i((()=>(0,o._)("div",{class:"title"},[(0,o._)("span",{id:"category"},"webgl"),(0,o._)("span",{id:"name"},"MultipleObject")],-1))),c={class:"codeLink"},l=i((()=>(0,o._)("div",{class:"conclusion"},[(0,o._)("span",{class:"title"},[(0,o._)("span",{id:"conTitle"},"多物体渲染")]),(0,o._)("span",{class:"content"},"I want to render a lot of money.")],-1))),d={class:"menu"};function v(n,e,r,i,v,_){const f=(0,o.up)("nano_button"),m=(0,o.up)("nano_items_menu");return(0,o.wg)(),(0,o.iD)("body",null,[a,(0,o._)("div",t,[(0,o._)("div",s,[u,(0,o._)("div",c,[(0,o.Wm)(f,{onHandleClick:n.handleClick},null,8,["onHandleClick"])])]),l,(0,o._)("div",d,[(0,o.Wm)(m)])])])}r(7658);var _={name:"MultipleObject",mounted(){this.Render()},methods:{Render(){HNWUEngine.degToRad(0);var n=HNWUEngine.degToRad(60),e=document.querySelector("#canvas"),r=e.getContext("webgl");if(!r)return;r.enable(r.DEPTH_TEST);var o={position:{numComponents:3,data:[0,-10,0,10,10,0,-10,10,0]},texcoord:{numComponents:2,data:[.5,0,1,1,0,1]},normal:{numComponents:3,data:[0,0,1,0,0,1,0,0,1]}},i=HNWUEngine.createBufferInfoFromArrays(r,o),a=HNWUEngine.createProgramInfo(r,["vertex-shader","fragment-shader"]),t={u_lightWorldPos:[-50,30,100],u_viewInverse:HNWUEngine.identity(),u_lightColor:[1,1,1,1]},s={u_worldViewProjection:HNWUEngine.identity(),u_world:HNWUEngine.identity(),u_worldInverseTranspose:HNWUEngine.identity()},u=function(n,e){return void 0===e&&(e=n,n=0),n+Math.random()*(e-n)},c=function(n){return Math.floor(Math.random()*n)};let l="#FFD700",d="#FFFF00",v=200;function _(n){l=n.target.value,p(),h()}function f(n){l=n.target.value,p(),h()}function m(n,e){v=e.value,p(),h()}HNWUEngine.setupSlider("amount",{value:v,slide:m,min:0,max:300,step:10,precision:2}),HNWUEngine.setupColorInput("color1",_),HNWUEngine.setupColorInput("color2",f);var g=[];function p(){g=[];for(var n=[HNWUEngine.makeStripeTexture(r,{color1:l,color2:d}),HNWUEngine.makeCheckerTexture(r,{color1:l,color2:d}),HNWUEngine.makeCircleTexture(r,{color1:l,color2:d})],e=v,o=u(240),i=0;i<e;++i)g.push({radius:u(150),xRotation:u(2*Math.PI),yRotation:u(Math.PI),materialUniforms:{u_colorMult:chroma.hsv(u(o,o+120),.5,1).gl(),u_diffuse:n[c(n.length)],u_specular:[1,1,1,1],u_shininess:u(500),u_specularFactor:u(1)}})}function h(e){e=1e-4*e+5,HNWUEngine.resizeCanvasToDisplaySize(r.canvas),r.viewport(0,0,r.canvas.width,r.canvas.height),r.clear(r.COLOR_BUFFER_BIT|r.DEPTH_BUFFER_BIT);var o=r.canvas.clientWidth/r.canvas.clientHeight,u=HNWUEngine.perspective(n,o,1,2e3),c=[0,0,100],l=[0,0,0],d=[0,1,0],v=HNWUEngine.lookAt(c,l,d,t.u_viewInverse),_=HNWUEngine.inverse(v),f=HNWUEngine.multiply3d(u,_);r.useProgram(a.program),HNWUEngine.setBuffersAndAttributes(r,a,i),HNWUEngine.setUniforms(a,t),g.forEach((function(n){var o=HNWUEngine.xRotation(n.xRotation*e);o=HNWUEngine.yRotate(o,n.yRotation*e),o=HNWUEngine.translate3d(o,0,0,n.radius),s.u_world=o,HNWUEngine.multiply3d(f,o,s.u_worldViewProjection),HNWUEngine.transpose(HNWUEngine.inverse(o),s.u_worldInverseTranspose),HNWUEngine.setUniforms(a,s),HNWUEngine.setUniforms(a,n.materialUniforms),r.drawArrays(r.TRIANGLES,0,i.numElements)})),requestAnimationFrame(h)}p(),requestAnimationFrame(h)}}},f=r(89);const m=(0,f.Z)(_,[["render",v],["__scopeId","data-v-725df62c"]]);var g=m}}]);
//# sourceMappingURL=306.8a6acf80.js.map